function $_global_mapviewtemplate(){(function(){a:;if(typeof a=="object")return;var a=function(){a:;if(typeof GeolocationFieldTemplate!=="object")throw"GeolocationFieldTemplate not loaded";var b=null,c='<img src="/_layouts/15/images/loadingcirclests16.gif?rev=23" style="display:block;padding-left:40%;padding-top:20%;" width="16px" height="16px" />';return{RenderCardViewBodyTemplate:function(e){var f=e.ListSchema,u=f.group1,v=f.group2,q=f.groupRender;if(u!=null||v!=null||q==true){if(b==null){b=addStatus(STSHtmlEncode(Strings.STS.L_GroupingEnabled_MapView),null,false);setStatusPriColor(b,"yellow")}return RenderViewTemplate(e)}if(e.Templates.Body=="")return RenderViewTemplate(e);var m=false;for(g=0;g<f.Field.length;g++)if(f.Field[g].Type=="Geolocation"){m=true;break}if(!m){if(b==null){b=addStatus(STSHtmlEncode(Strings.STS.L_GeolocationField_Deleted_MapView),null,false);setStatusPriColor(b,"yellow")}return RenderViewTemplate(e)}e.AllowGridMode=false;var n=e.Templates.Item;if(n==null||n=={})return"";var i=e.ListData,j=a.CalculateHeight(),p=parseInt(f.Field.length)+1,d="",r=e.Templates.Header!="";if(r){d+=RenderHeaderTemplate(e);d+='<script id="scriptBody';d+=e.wpq;d+='"><\/script>'}else d="<table>";if(i.Row==0||f.Field.length==0||f.Field.length==1&&f.Field[0].FieldType=="Attachments"){j-=100;d+='<tbody><tr ><td colspan="100">';d+='<div id="mapContainer_'+e.wpq+'" class="ms-positionRelative ms-fullWidth"  style="height:'+String(j)+'px;">';d+='<a id="mapAnchor_'+e.wpq+'" href="javascript:;" style="display:block; width:100%; height:100%;" ';d+='title="'+STSHtmlEncode(Strings.STS.L_BingMapsControl)+'"></a>';d+="</div></td></tr></tbody>";d+="</table>";return d}if(f.Field.length==1&&f.Field[0].Type=="Geolocation"||f.Field.length==2&&f.Field[0].Type=="Geolocation"&&f.Field[1].FieldType=="Attachments"||f.Field.length==2&&f.Field[1].Type=="Geolocation"&&f.Field[0].FieldType=="Attachments"){for(var w=f.Field[0].Type=="Geolocation"?0:1,t=f.Field[w].RealFieldName,s=i.Row.length,g=0;g<s;g++){e.CurrentItem=i.Row[g];e.CurrentIdx=g;var k=GeolocationFieldTemplate.ParseGeolocationValue(i.Row[g][t]);if(k!=null){var h={};h.latitude=k.latitude;h.longitude=k.longitude;h.isDraggable=false;h.showHover=false;h.label=String(g+1);h.pushpinID=GenerateIID(e);h.icon="/_layouts/15/images/MapPushpin.25x39x32.png?rev=23";e.GeolocationPoints.push(h)}e.CurrentItem=null;e.CurrentIdx=null}d+="<tbody><tr ><td colspan="+String(p)+">";d+='<div id="mapContainer_'+e.wpq+'" class="ms-positionRelative ms-fullWidth" style="height:'+String(j)+'px;">';d+='<a id="mapAnchor_'+e.wpq+'" href="javascript:;" style="display:block; width:100%; height:100%;" ';d+='title="'+STSHtmlEncode(Strings.STS.L_BingMapsControl)+'">';d+=c;d+="</a>";d+="</div></td></tr></tbody>";d+="</table>";return d}d+="<tbody><tr ><td colspan="+String(p)+">";d+='<table width="100%"><tr ><td style="width:30%;">';d+='<div  style="overflow:auto; height:'+String(j)+'px; " id="cardsContainer_'+e.wpq+'">';d+='<table summary="'+STSHtmlEncode(e.ListTitle);d+='"  width="100%" border="0" cellspacing="0" dir="';d+=f.Direction;d+='" FilterLink="';d+=i.FilterLink;d+='" id="mapviewListTable_'+e.wpq;d+='" class="ms-mapviewtable" >';for(var l in i.Row){var o=i.Row[l];if(l=="0")o.firstRow=true;e.CurrentItem=o;e.CurrentIdx=l;d+=CoreRender(a.RenderCardViewItemTemplate,e);e.CurrentItem=null;e.CurrentIdx=null}d+='</table></div></td><td style="position:relative;width:70%;height:100%">';d+='<div id="mapContainer_'+e.wpq+'" class="ms-positionRelative ms-fullWidth" style="height:'+String(j)+'px;">';d+='<a id="mapAnchor_'+e.wpq+'" href="javascript:;" style="display:block; width:100%; height:100%;" ';d+='title="'+STSHtmlEncode(Strings.STS.L_BingMapsControl)+'">';d+=c;d+="</a>";d+="</div></td></tr></table></td></tr></tbody></table>";return d},CalculateHeight:function(){a:;var a=document.documentElement.clientHeight;if(a==null)a=document.body.clientHeight;if(a==null)a=window.innerHeight;a-=370;return a},RenderCardViewItemTemplate:function(d){var i=d.CurrentItem,k=d.ListSchema,h=d.CurrentIdx,p=parseInt(h)%2==1?"ms-alternating ":"";if(FHasRowHoverBehavior(d))p+=" ms-itmHoverEnabled ";var b=[];b.push('<tr class="');b.push(p);b.push("ms-itmhover");b.push('" onmouseover="MapViewTemplate.HighlightCard('+h);b.push(", '");var f=GenerateIID(d);b.push(f);b.push("'); ");b.push('" onmouseout="MapViewTemplate.UnHighlightCard('+h);b.push(", '");b.push(f);b.push("'); ");b.push('" iid="');b.push(f);b.push('" id="');b.push(f);b.push('">');var c,o,m=false,j=k?k.Field:null,e=[];e.push('<div id="cardTitle_'+String(f)+'" style="padding-bottom:5px;">');for(var t in j){c=j[t];if(c.GroupField!=null)break;if(c.RealFieldName=="Title"){o=i.Title;m=true;e.push('<span><H2 class="ms-accentText">'+i.Title+"</H2></span>");break}}e.push("</div>");e.push('<div id="cardContent_'+String(f)+'">');for(var u in j){c=j[u];if(c.GroupField!=null)break;if(c.Type=="Geolocation"){if(d.CurrentIdx!=d.GeolocationPoints.length)continue;var l=GeolocationFieldTemplate.ParseGeolocationValue(i[c.Name]);if(l!=null){var g={};g.latitude=l.latitude;g.longitude=l.longitude;g.isDraggable=false;g.showHover=true;g.label=String(1+parseInt(h));g.pushpinID=GenerateIID(d);g.icon="/_layouts/15/images/MapPushpin.25x39x32.png?rev=23";d.GeolocationPoints.push(g)}else d.GeolocationPoints.push(null);continue}if(c.RealFieldName=="Title"||c.FieldType=="Attachments")continue;a.DisableMenu(c);e.push('<div style="overflow:hidden;">');e.push('<span class="ms-floatLeft ms-soften">');e.push(c.DisplayName);e.push("&nbsp;:&nbsp;");e.push("</span>");d.CurrentFieldSchema=c;e.push("<span>");if(c.Type=="Number"||c.Type=="Currency")e.push(i[c.Name]);else e.push(spMgr.RenderField(d,c,i,k));e.push("</span></div>");d.CurrentFieldSchema=null}e.push("</div>");var q=e.join(""),r="id_Cards_"+f,n="id_CardsPushpin_"+f;b.push('<td id="'+STSHtmlEncode(r)+'" align="center" valign="top" class="ms-cellStyleNonEditable ms-vb-itmcbx ms-vb-imgFirstCell" tabindex=0 style="width:35px;" role="checkbox">');b.push('<div style="POSITION: relative; WIDTH: 25px; HEIGHT: 39px; OVERFLOW: hidden; padding-top:5px; padding-bottom:5px;">');b.push('<a onClick= "MapViewTemplate.SetView('+h);b.push(", '");b.push(f);b.push('\');" href="javascript:;">');if(d.GeolocationPoints[h])b.push('<img id="'+STSHtmlEncode(n)+'" src="/_layouts/15/images/MapPushpin.25x39x32.png?rev=23"/>');else b.push('<img id="'+STSHtmlEncode(n)+'" src="/_layouts/15/images/MapPushpinDisabled.25x39x32.png?rev=23"/>');b.push('<div style="POSITION: absolute; TEXT-ALIGN: center; WIDTH: 100%;');b.push('FONT: bold 10pt Arial, Helvetica, Sans-Serif; COLOR: #fff; TOP: 10px; LEFT: 0px">');b.push(String(parseInt(h)+1));b.push("</div></a></div>");for(var s in j){c=j[s];if(c.FieldType=="Attachments"){a.DisableMenu(c);b.push("<div>");b.push(spMgr.RenderField(d,c,i,k));b.push("</div>");break}}b.push('<div class="s4-itm-cbx s4-itm-imgCbx" tabindex="-1"><span class="s4-itm-imgCbx-inner"><span class="ms-selectitem-span"><img class="ms-selectitem-icon" alt="" src="');b.push(GetThemedImageUrl("spcommon.png"));b.push('"/></span></span></div>');b.push("</td>");b.push('<td valign="top" style="border-width:0px;">');b.push('<div style="padding-right:20px; padding-top:5px; padding-bottom:10px;">');b.push(q);b.push("</div>");b.push("</td>");m&&b.push('<td class="ms-vb-title ms-hide"><span>'+String(o)+"</span></td>");b.push("</tr>");return b.join("")},DisableMenu:function(a){if(typeof a.CalloutMenu!="undefined")a.CalloutMenu=null;if(typeof a.listItemMenu!="undefined")a.listItemMenu=null},HighlightCard:function(b,a){EnsureScriptFunc("core.js","GetCtxRgiidFromIid",function(){a:;var c=GetCtxRgiidFromIid(a).ctx;if(c.GeolocationPoints[b]){var d=document.getElementById(STSHtmlEncode("id_CardsPushpin_"+a));if(d!=null)d.src="/_layouts/15/images/MapPushpinHover.25x39x32.png?rev=23";ExecuteOrDelayUntilEventNotified(function(){a:;c.MapControl&&c.MapControl.addHighlightedPushpin(c.GeolocationPoints[b])},"bingmapjsloaded")}})},UnHighlightCard:function(b,a){EnsureScriptFunc("core.js","GetCtxRgiidFromIid",function(){a:;var c=GetCtxRgiidFromIid(a).ctx;if(c.GeolocationPoints[b]){var d=document.getElementById(STSHtmlEncode("id_CardsPushpin_"+a));if(d!=null)d.src="/_layouts/15/images/MapPushpin.25x39x32.png?rev=23";ExecuteOrDelayUntilEventNotified(function(){a:;c.MapControl&&c.MapControl.removeHighlightedPushpin()},"bingmapjsloaded")}})},RenderMapCalloutBodyTemplate:function(d,i){var f=GetListItemByIID(i),k=d.CurrentItem;d.CurrentItem=f;var e=d.ListSchema,b=[],g=true,h=e?e.Field:null;b.push('<div class= "js-callout-bodySection">');for(var l in h){var c=h[l];a.DisableMenu(c);if(c.FieldType=="Attachments"||c.Type=="Geolocation"||c.RealFieldName=="Title")continue;if(c.GroupField!=null)break;g=false;b.push('<div style="overflow:hidden;">');b.push('<span class="ms-floatLeft ms-soften">');b.push(c.DisplayName);b.push("&nbsp;:&nbsp;");b.push("</span>");d.CurrentFieldSchema=c;b.push("<span>");if(c.Type=="Number"||c.Type=="Currency")b.push(f[c.Name]);else b.push(spMgr.RenderField(d,c,f,e));b.push("</span></div>");d.CurrentFieldSchema=null}d.CurrentItem=k;b.push("</div></div>");if(g!=true){var j=document.getElementById("MapCalloutContent_"+i);j.innerHTML=b.join("")}},RenderMapCalloutTitleTemplate:function(h,d){var f=GetListItemByIID(d),b=h.ListSchema,a=[],c=b?b.Field:null;for(var i in c){var g=c[i];if(g.RealFieldName=="Title"){a.push("<div>");a.push(f.Title);a.push("</div>");break}}var e=document.getElementById("MapCalloutTitle_"+d);e.innerHTML=a.join("")},ShowMapPushpinHover:function(c,d,b){EnsureScriptFunc("callout.js","Callout",function(){a:;EnsureScriptFunc("core.js","GetCtxRgiidFromIid",function(){a:;var f=b.pushpinID,h=GetCtxRgiidFromIid(f).ctx,i="mapCalloutContainer-"+f,g=null,e=document.getElementById(i);if(e===null){var m=document.getElementById("mapContainer_"+h.wpq);e=document.createElement("div");e.setAttribute("style","position:absolute;z-index:-1;");e.id=i;m.appendChild(e);var n='<span id="MapCalloutTitle_'+f+'"></span>',l='<span id="MapCalloutContent_'+f+'"></span>',k=function(){a:;var c=document.getElementById(STSHtmlEncode("id_CardsPushpin_"+f));if(c!=null)c.src="/_layouts/15/images/MapPushpinHover.25x39x32.png?rev=23";b.setOptions({icon:"/_layouts/15/images/MapPushpinHover.25x39x32.png?rev=23"});a.RenderMapCalloutTitleTemplate(h,f);a.RenderMapCalloutBodyTemplate(h,f);typeof ProcessImn=="function"&&ProcessImn()},j=function(){a:;b.setOptions({icon:"/_layouts/15/images/MapPushpin.25x39x32.png?rev=23"});var a=document.getElementById(STSHtmlEncode("id_CardsPushpin_"+f));if(a!=null)a.src="/_layouts/15/images/MapPushpin.25x39x32.png?rev=23"};g=CalloutManager.createNew({launchPoint:e,openOptions:{event:"hover",showCloseButton:false},ID:f,title:n,content:l,onClosingCallback:j,onOpeningCallback:k});g.addAction(new CalloutAction({text:Strings.STS.L_ViewOnMap,onClickCallback:function(){a:;var a=b.getLocation(),c=GeolocationFieldTemplate.GetRedirectUrl(h.CurrentUICultureName,a.latitude,a.longitude);window.open(c)}}))}else g=CalloutManager.getFromLaunchPoint(e);e.style.left=String(c)+"px";e.style.top=String(d)+"px";g.open()})})},HideMapPushpinHover:function(c){var b="mapCalloutContainer-"+c,a=document.getElementById(b),d=CalloutManager.getFromLaunchPoint(a);EnsureScriptFunc("mquery.js","m$",function(){a:;m$(a).trigger("mouseout")})},SetView:function(a,b){EnsureScriptFunc("core.js","GetCtxRgiidFromIid",function(){a:;var c=GetCtxRgiidFromIid(b).ctx;if(c.GeolocationPoints[a]){var d=new SP.Maps.Geolocation(c.GeolocationPoints[a].latitude,c.GeolocationPoints[a].longitude);ExecuteOrDelayUntilEventNotified(function(){a:;c.MapControl&&c.MapControl.moveMapToSelectedLocation(d)},"bingmapjsloaded")}})},OnMapViewPreRender:function(a){if(a.BaseViewID=="MapView"){a.GeolocationPoints=[];EnsureScriptFunc("core.js","SPAnimation",function(){a:;SPAnimation.Settings.DisableAnimation()})}},OnMapViewPostRender:function(b){if(b.BaseViewID=="MapView"){var c=b.ListSchema.Field;for(var g in c)if(c[g].Type=="Geolocation"){var h=c[g].IsBingMapBlockedInCurrentRegion=="TRUE"?true:false;ExecuteOrDelayUntilEventNotified(function(){a:;SP.Maps.BingMaps.blockedStatus(h)},"bingmapjsloaded");var i=c[g].BingMapsKey;a.HideSelectAllItemsCbxAndTH(b);a.MaximizeListTableWidth(b);var f=document.getElementById("bottomPagingCell"+b.wpq);if(f!=null){var e=document.getElementById("mapContainer_"+b.wpq),d=document.getElementById("cardsContainer_"+b.wpq);if(e!=null)e.style.height=String(e.clientHeight-f.clientHeight)+"px";if(d!=null)d.style.height=String(d.clientHeight-f.clientHeight)+"px"}ExecuteOrDelayUntilScriptLoaded(function(){a:;a.DelayCreateMap(b,i)},"inplview.js")}}},EnsureSelectionHandler:function(a){if(a.clvp==null)return;var c=a.clvp.tab;if(c!=null)c.onmouseover=null;var b=document.getElementById("mapviewListTable_"+a.wpq);b!=null&&EnsureSelectionHandlerDeferred(null,b,a.ctxId)},HideSelectAllItemsCbxAndTH:function(b){var a=document.getElementById("cbxSelectAllItems"+b.ctxId);if(a!=null)a.parentNode.style.display="none"},MaximizeListTableWidth:function(b){var a=document.getElementById("js-listviewthead-"+b.wpq);if(a!=null)a.parentNode.style.width="100%"},DelayCreateMap:function(b,c){ExecuteOrDelayUntilEventNotified(function(){a:;a.EnsureSelectionHandler(b);a.CreateMap(b,c)},"bingmapjsloaded")},CreateMap:function(a,j){var g=false;if(typeof a.clvp!="undefined"&&a.clvp!=null&&typeof a.clvp.tab!="undefined"&&a.clvp.tab!=null)g=HasCssClass(a.clvp.tab,"s4-hide-tr",true);var d=document.getElementById("mapContainer_"+a.wpq),c=new SP.Maps.SPMapOption;c.mapDiv=d;c.apiKey=j;var f=a.GeolocationPoints,i=SP.Maps.MapView.getCenter(f);if(i!=null){c.center=i;c.zoom=10}if(f.length==1)c.zoom=15;var h=document.activeElement,b=a.MapControl;b=null;b=new SP.Maps.MapProviderFactory.createMapProvider("Bing","7.0");b.loadMap(c);b.addPushpins(f);b.disableKeyboardInputOnMap(true);var e=document.getElementById("mapAnchor_"+a.wpq);if(e!=null){AddEvtHandler(e,"onfocus",function(){a:;b.disableKeyboardInputOnMap(false)});AddEvtHandler(e,"onblur",function(){a:;b.disableKeyboardInputOnMap(true)});AddEvtHandler(d,"onmouseover",function(){a:;b.disableKeyboardInputOnMap(false)});AddEvtHandler(d,"onmouseout",function(){a:;b.disableKeyboardInputOnMap(true)})}d!=null&&AddEvtHandler(d,"onclick",function(){a:;var b=document.getElementById("mapAnchor_"+a.wpq);b!=null&&b.focus()});a.MapControl=b;h!=null&&h.focus();g&&AddCssClassToElement(a.clvp.tab,"s4-hide-tr")}}}();window.MapViewTemplate=a;function b(){a:;var b={};b.BaseViewID="MapView";b.Templates={};b.Templates.View=a.RenderCardViewBodyTemplate;b.OnPreRender=a.OnMapViewPreRender;b.OnPostRender=a.OnMapViewPostRender;SPClientTemplates.TemplateManager.RegisterTemplateOverrides(b)}ExecuteOrDelayUntilScriptLoaded(b,"clienttemplates.js")})();typeof Sys!="undefined"&&typeof Sys.Application!="undefined"&&typeof Sys.Application.notifyScriptLoaded!="undefined"&&Sys.Application.notifyScriptLoaded();typeof NotifyScriptLoadedAndExecuteWaitingJobs=="function"&&NotifyScriptLoadedAndExecuteWaitingJobs("mapviewtemplate.js")}function ULSS3N(){var a={};a.ULSTeamName="Microsoft SharePoint Foundation";a.ULSFileName="mapviewtemplate.commentedjs";return a}$_global_mapviewtemplate();