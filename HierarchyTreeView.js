function $_global_hierarchytreeview(){HIERARCHY_TREE_NODE_ELEMENT="hierarchytreenode";HIERARCHYFLAG_ATTRIBUTE="hierarchytree";HIERARCHYTREE_PARTIALCHECK_CSSCLASS="hierarchy-node-partialcheck";CHECK_STATE_CHECKED="t";CHECK_STATE_PARTIAL="p";CHECK_STATE_UNCHECKED="f";NODE_TYPE_ALL="All";NODE_TYPE_ROOT="Root";HierarchyTreeNode_InitializePrototype();NODE_ELEMENT=1}var HIERARCHY_TREE_NODE_ELEMENT,HIERARCHYFLAG_ATTRIBUTE,HIERARCHYTREE_PARTIALCHECK_CSSCLASS,CHECK_STATE_CHECKED,CHECK_STATE_PARTIAL,CHECK_STATE_UNCHECKED,NODE_TYPE_ALL,NODE_TYPE_ROOT;function HierarchyTreeNode_InitializePrototype(){var b=undefined,a=undefined;HierarchyTreeNode.prototype.oNodeTable=undefined;HierarchyTreeNode.prototype.oCheckBox=undefined;HierarchyTreeNode.prototype.oTextElement=undefined;HierarchyTreeNode.prototype.oHierarchyNodeElement=undefined;HierarchyTreeNode.prototype.type=undefined;HierarchyTreeNode.prototype.index=undefined;HierarchyTreeNode.prototype.level=undefined;HierarchyTreeNode.prototype.checkState=undefined;HierarchyTreeNode.prototype.value=undefined;HierarchyTreeNode.prototype.text=undefined;HierarchyTreeNode.prototype.click=undefined;HierarchyTreeNode.prototype.check=undefined;HierarchyTreeNode.prototype.checkStateChanged=undefined;HierarchyTreeNode.prototype.childCheckStateChanged=undefined;HierarchyTreeNode.prototype.childNodes=undefined;HierarchyTreeNode.prototype.checkChildren=undefined;HierarchyTreeNode.prototype.setItalicText=undefined;HierarchyTreeNode.prototype.parent=undefined;HierarchyTreeNode.prototype.show=undefined;HierarchyTreeNode.prototype.getCheckState=undefined;HierarchyTreeNode.prototype.normalizeCheckState=undefined}function createHierarchyTreeView(b){var a=document.getElementById(b);if(a==null)return null;if(typeof a.treeView!="undefined")return a.treeView;a.treeView=new HierarchyTreeView(a);return a.treeView}function HierarchyTreeView(h){var a=null,b=h;b.onclick=HierarchyTreeView_onClick;this.checkAll=g;this.normalizeCheckState=d;this.rootNodes=f;this.getCheckedNodesValues=c;this.getCheckedNodes=e;function g(d){for(var b=this.rootNodes(),a=0;a<b.length;a++){var c=b[a];c.type!=NODE_TYPE_ALL&&c.check(d,true)}}function d(){for(var c=this.rootNodes(),b=0;b<c.length;b++){var a=c[b];if(a.type==NODE_TYPE_ALL){if(a.getCheckState()==CHECK_STATE_CHECKED){this.checkAll(CHECK_STATE_UNCHECKED);break}continue}a.normalizeCheckState()}}function c(){var b=this.getCheckedNodes();if(b==null)return null;for(var c=[],a=0;a<b.length;a++)c[a]=b[a].value;return c.length>0?c:null}function e(){for(var a=[],f=b.getElementsByTagName("table"),e=0;e<f.length;e++){var c=f[e];if(typeof c.hierarchyTreeNode=="undefined")c.hierarchyTreeNode=nodeFromTable(c);var d=c.hierarchyTreeNode;if(d!=null&&d.getCheckState()==CHECK_STATE_CHECKED){a[a.length]=c.hierarchyTreeNode;if(d.type==NODE_TYPE_ALL){a[a.length]=d;break}}}return a.length>0?a:null}function f(){if(a!=null)return a;for(var d=[],f=b.getElementsByTagName("table"),e=0;e<f.length;e++){var c=f[e];if(typeof c.hierarchyTreeNode=="undefined")c.hierarchyTreeNode=nodeFromTable(c);if(typeof c.hierarchyTreeNode!="undefined"&&c.hierarchyTreeNode.level==0)d[d.length]=c.hierarchyTreeNode}if(d.length>0)a=d;return a}}var NODE_ELEMENT;function HierarchyTreeView_onClick(c){if(typeof c=="undefined")c=window.event;var a=c.srcElement;if(typeof a=="undefined"){a=c.target;while(a.nodeType!=1)a=a.parentNode}if(a.nodeType!=NODE_ELEMENT||a.nodeName.toLowerCase()!="input"||a.type!="checkbox")return;var b=findElementByType(a,"table",true,"table");if(b!=null){if(typeof b.hierarchyTreeNode=="undefined")b.hierarchyTreeNode=new HierarchyTreeNode(b,null);b.hierarchyTreeNode.checkStateChanged()}}function nodeFromTable(a){if(typeof a.hierarchyTreeNode!="undefined")return a.hierarchyTreeNode;var b=findElementByType(a,HIERARCHY_TREE_NODE_ELEMENT,false,undefined);return b!=null?new HierarchyTreeNode(a,b):null}function HierarchyTreeNode(o,a){var c=null,p;this.oNodeTable=o;if(a==null)a=findElementByType(this.oNodeTable,HIERARCHY_TREE_NODE_ELEMENT,false,"");this.oCheckBox=findElementByTypeAndTag(this.oNodeTable,"input","type","checkbox",false,"");this.oTextElement=findElementByTypeAndTag(this.oNodeTable,"span",HIERARCHYFLAG_ATTRIBUTE,"",false,"");this.oHierarchyNodeElement=a;this.type=a.type;this.index=a.index;if(typeof a.level!="undefined")this.level=a.level;this.checkState=String(a.checked);this.value=a.value;this.text=this.oTextElement.innerText;this.click=m;this.check=l;this.checkStateChanged=f;this.childCheckStateChanged=d;this.childNodes=j;this.checkChildren=g;this.setItalicText=i;this.parent=k;this.show=n;this.getCheckState=h;this.normalizeCheckState=e;function n(a){this.oNodeTable.style.display=a?"block":"none"}function m(){var a=findElementByType(this.oNodeTable,"a",false,"");a!=null&&a.click()}function f(){this.checkState=this.oCheckBox.checked?CHECK_STATE_CHECKED:CHECK_STATE_UNCHECKED;if(this.type!=NODE_TYPE_ALL){this.setItalicText(false);this.checkChildren(this.checkState,true);var b=this.parent();b!=null&&b.childCheckStateChanged(this.checkState)}else{var a=this.oNodeTable.parentNode;while(a!=null&&typeof a.treeView=="undefined")a=a.parentNode;a!=null&&typeof a.treeView!="undefined"&&typeof a.treeView.checkAll!="undefined"&&a.treeView.checkAll(this.checkState)}}function h(){return this.checkState}function d(d){var b=d,c=this.childNodes(),a=0;if(c!=null){if(d==CHECK_STATE_PARTIAL)b=CHECK_STATE_PARTIAL;else if(d==CHECK_STATE_CHECKED){var f=true;for(a=0;a<c.length&&f;a++)f=c[a].checkState==CHECK_STATE_CHECKED;b=f?CHECK_STATE_CHECKED:CHECK_STATE_PARTIAL}else if(d==CHECK_STATE_UNCHECKED){var e=false;for(a=0;a<c.length&&!e;a++)e=c[a].checkState!=CHECK_STATE_UNCHECKED;b=e?CHECK_STATE_PARTIAL:CHECK_STATE_UNCHECKED}this.check(b,false)}var g=this.parent();g!=null&&typeof g.childCheckStateChanged!="undefined"&&g.childCheckStateChanged(b)}function l(a,b){if(this.oCheckBox!=null){this.checkState=a;this.oCheckBox.checked=a!=CHECK_STATE_UNCHECKED;this.setItalicText(a==CHECK_STATE_PARTIAL)}b==true&&this.checkChildren(a,true)}function g(d,c){var a=this.childNodes();if(a==null)return;for(var b=0;b<a.length;b++)a[b].check(d,c)}function i(a){if(this.oTextElement==null)return;this.oTextElement.className=a?HIERARCHYTREE_PARTIALCHECK_CSSCLASS:""}function j(){if(typeof this.nodeChildNodes!="undefined")return this.nodeChildNodes;var e=[],d=0,a=this.oNodeTable.nextSibling;while(a!=null){var c=b(a);if(c!=null){if(c.level<=this.level)break;else if(c.index==d){e[d]=c;a=c.oNodeTable.nextSibling;d=d+1}}else a=null;if(a!=null){var f=a.nodeName.toLowerCase();if(f=="span"||f=="div")a=a.nextSibling}}if(e.length==0)return null;this.nodeChildNodes=e;return e}function b(a){if(typeof a.hierarchyTreeNode!="undefined")return a.hierarchyTreeNode;var b=findElementByType(a,HIERARCHY_TREE_NODE_ELEMENT,false,"");if(b!=null){a=findElementByType(b,"table",true,"");if(a.hierarchyTreeNode==null)a.hierarchyTreeNode=new HierarchyTreeNode(a,b);return a.hierarchyTreeNode}return null}function k(){if(typeof this.oParent!="undefined")return this.oParent;var d=null,a=this.oNodeTable.previousSibling;while(a!=null){if(a.tagName.toLowerCase()!="table"){a=a.previousSibling;continue}d=b(a);if(d.level==this.level){a=a.previousSibling;d=null;continue}if(d.level==this.level-1)break}if(d==null){var e=this.oNodeTable.parentNode;a=e.previousSibling;if(a==null)return null;d=b(a)}if(d!=null&&d.type!=NODE_TYPE_ROOT&&d.level==this.level-1){c=d;return c}return null}function e(){if(this.checkState==CHECK_STATE_PARTIAL)this.oCheckBox.checked=false;var b=this.childNodes(),a=0;if(b!=null)if(this.checkState==CHECK_STATE_CHECKED)for(a=0;a<b.length;a++)b[a].check(CHECK_STATE_UNCHECKED,true);else for(a=0;a<b.length;a++)b[a].normalizeCheckState()}}function findElementByType(a,d,c,b){return findElementByTypeAndTag(a,d,null,null,c,b)}function findElementByTypeAndTag(k,b,d,c,h,g){b=b.toLowerCase();var a=k;while(a!=null&&a.tagName!=null){var i=a.tagName.toLowerCase();if(i==b)if(d==null)return a;else{var e=a.attributes[d];if(e!=null)if(c==null)return a;else if(typeof e.value!="undefined"&&e.value==c)return a}if(i==g)return null;if(h==true)a=a.parentNode;else{for(var l=a.childNodes.length,f=0;f<l;f++){var j=findElementByTypeAndTag(a.childNodes[f],b,d,c,h,g);if(j!=null)return j}a=null}}return null}function isReady(a){if(typeof a!="undefined"&&typeof a.readyState!="undefined")switch(a.readyState){case"loaded":case"interactive":case"complete":return true}return false}$_global_hierarchytreeview();