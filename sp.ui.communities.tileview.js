Type.registerNamespace("SP.UI.Communities.TileView");SP.UI.Communities.TileView.CategoriesTileViewRenderer=function(a,b){this.$$d_$4_1=Function.createDelegate(this,this.$4_1);this.$$d_$1_1=Function.createDelegate(this,this.$1_1);this.$$d_$3_1=Function.createDelegate(this,this.$3_1);this.$$d_$6_1=Function.createDelegate(this,this.$6_1);this.$$d_$5_1=Function.createDelegate(this,this.$5_1);SP.UI.Communities.TileView.CategoriesTileViewRenderer.initializeBase(this,[a,b])};SP.UI.Communities.TileView.CategoriesTileViewRenderer.$9=function(c){var m=window.self.ajaxNavigate,b=m.get_href(),d=SP.ScriptHelpers.replaceOrAddQueryString(b,"SortField","LastPostDate");d=SP.ScriptHelpers.replaceOrAddQueryString(d,"SortDir","Desc");var e=SP.ScriptHelpers.replaceOrAddQueryString(b,"SortField","ReplyCount");e=SP.ScriptHelpers.replaceOrAddQueryString(e,"SortDir","Desc");var f=SP.ScriptHelpers.replaceOrAddQueryString(b,"SortField","Title");f=SP.ScriptHelpers.replaceOrAddQueryString(f,"SortDir","Asc");var g=SP.ScriptHelpers.replaceOrAddQueryString(b,"SortField","Title");g=SP.ScriptHelpers.replaceOrAddQueryString(g,"SortDir","Desc");var h=new SP.UI.Discussions.SortFilterItem(c,SP.UI.Communities.TileView.TemplateResources.get_l_SPCategorySortRecent()),i=new SP.UI.Discussions.SortFilterItem(c,SP.UI.Communities.TileView.TemplateResources.get_l_SPCategorySortPopular()),j=new SP.UI.Discussions.SortFilterItem(c,SP.UI.Communities.TileView.TemplateResources.get_l_SPCategorySortAlpha()),k=new SP.UI.Discussions.SortFilterItem(c,SP.UI.Communities.TileView.TemplateResources.get_l_SPCategorySortAlphaRev());h.set_linkUrl(d);i.set_linkUrl(e);j.set_linkUrl(f);k.set_linkUrl(g);var l=SP.UI.Communities.TileView.CategoriesTileViewRenderer.$7();if(!l)h.set_isSelected(true);else if(l===1)i.set_isSelected(true);else if(l===2)j.set_isSelected(true);else k.set_isSelected(true);var a=new SP.UI.Discussions.SortFilterPickerControl;a.addItem(j);a.addItem(k);a.addItem(i);a.addItem(h);return a};SP.UI.Communities.TileView.CategoriesTileViewRenderer.$7=function(){var b=SP.ScriptHelpers.getDocumentQueryPairs(),a=b.SortField,c=b.SortDir;return a==="LastPostDate"?0:a==="ReplyCount"?1:a==="Title"&&c==="Asc"?2:a==="Title"&&c==="Desc"?3:2};SP.UI.Communities.TileView.CategoriesTileViewRenderer.$8=function(c,d,e){var b;if(!SP.UI.Discussions.Helpers.isNullOrUndefined(c.ListSchema.PropertyBag))b=c.ListSchema.PropertyBag.CategoryPageName;else b=SP.UI.Communities.TileView.TemplateResources.get_l_SPDiscCategoryPage();var a=c.HttpRoot+String.format("/SitePages/{0}.aspx",b);if(!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(d)){a=SP.ScriptHelpers.replaceOrAddQueryString(a,"CategoryID",e);a=SP.ScriptHelpers.replaceOrAddQueryString(a,"SiteMapTitle",d)}return a};SP.UI.Communities.TileView.CategoriesTileViewRenderer.prototype={$0_1:null,onCreateRenderingContextOverrides:function(a){a.Templates.Header=this.$$d_$5_1;a.Templates.View=this.$$d_$6_1;a.Templates.Body=this.$$d_$3_1;a.Templates.Item=this.$$d_$1_1;a.Templates.Footer=this.$$d_$4_1},$5_1:function(b){var a=new SP.HtmlBuilder;this.$0_1=SP.UI.Communities.TileView.CategoriesTileViewRenderer.$9(b);a.addCommunitiesCssClass("forumHeaderContainer");a.renderBeginTag("div");this.$0_1.render(a);a.renderEndTag();return a.toString()},$6_1:function(b){var a='<div class="ms-comm-cat-root" id="'+SP.UI.TileView.TileViewRenderer.getRootElementID(b)+'">',c=b.ListData.Row;if(c&&c.length>0){a+='<div class="ms-comm-cat-header">';a+=b.RenderHeader(b);a+='<div class="ms-clear"></div>';a+="</div>"}a+=b.RenderBody(b);a+=b.RenderFooter(b);a+="</div>";return a},$3_1:function(a){var d=a.ListData.Row,e=a.ListSchema.ListRight_AddListItems==="1";if(!d.length)if(e){var f=a.HttpRoot+String.format("/Lists/Categories/{0}.aspx","AdminView"),g='<a href="'+f+'">'+Strings.STS.L_SPCategoryEmptyFillerTextCategory+"</a>";return String.format(Strings.STS.L_SPCategoryEmptyFillerText,g)}else return"";for(var b='<div class="ms-comm-cat-body">',c=0,h=d.length;c<h;c++){b+='<div class="ms-comm-tCat-tile">';a.CurrentItem=d[c];a.CurrentItemIdx=c;b+=this.$1_1(a);a.CurrentItem=null;a.CurrentItemIdx=-1;b+="</div>"}b+="</div>";return b},$1_1:function(b){var a=b.CurrentItem;if(!a)return"";var c=a.ID,d=a.Title,e=STSHtmlEncode(d),f=a.CategoryImage,g=SP.UI.Communities.TileView.CategoriesTileViewRenderer.$8(b,d,c),h=new SP.UI.Communities.TileView.CategoriesTileRenderer(b,c,e,f,g);return h.render()},$4_1:function(c){var a="<div>",b=new Array(0);RenderPaging(b,c);a+=b.join("");a+="</div>";return a},onPostRender:function(a){SP.UI.TileView.TileViewRenderer.prototype.onPostRender.call(this,a);SP.ScriptHelpers.disableWebpartSelection(a);!SP.UI.Discussions.Helpers.isNullOrUndefined(this.$0_1)&&this.$0_1.initialize()}};SP.UI.Communities.TileView.CategoriesTileRenderer=function(a,b,c,d,e){SP.UI.Communities.TileView.CategoriesTileRenderer.initializeBase(this,[a,b,150,c,d,null,null]);this.$2_1=e};SP.UI.Communities.TileView.CategoriesTileRenderer.prototype={$2_1:null,get_tileDescription:function(){var b=this.context.CurrentItem;if(!b)return"";var c=b.TopicCount,d=b.ReplyCount,e=b.CategoryDescription,f=SP.Utilities.LocUtility.getLocalizedCountValue(Strings.STS.L_SPDiscNumberOfDiscussions,Strings.STS.L_SPDiscNumberOfDiscussionsIntervals,Number.parseLocale(c)),g=SP.Utilities.LocUtility.getLocalizedCountValue(Strings.STS.L_SPDiscNumberOfReplies,Strings.STS.L_SPDiscNumberOfRepliesIntervals,Number.parseLocale(d)),h=c,i=d,j=String.format(f,h),k=String.format(g,i),a="";a+="<div>"+j+"</div>";a+="<div>"+k+"</div>";if(!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(e)){a+="<div>&nbsp;<div>";a+="<div>"+e+"<div>"}return a},onBackgroundPreRender:function(a){a.addAttribute("id",SP.UI.TileView.TileRenderer.tileElementId(this.context,this.id,3));a.addAttribute("href",this.$2_1);a.renderBeginTag("a")},onBackgroundPostRender:function(a){a.renderEndTag()}};SP.UI.Communities.TileView.GlobalTemplateOverrides=function(){};SP.UI.Communities.TileView.GlobalTemplateOverrides.$$cctor=function(){var a=new SP.UI.Communities.TileView.CategoriesTileViewRenderer(SP.UI.Communities.TileView.GlobalTemplateOverrides.templateTypeID,SP.UI.Communities.TileView.GlobalTemplateOverrides.categoriesTileViewID);SPClientTemplates.TemplateManager.RegisterTemplateOverrides(a.createRenderingContextOverrides())};SP.UI.Communities.TileView.TemplateResources=function(){};SP.UI.Communities.TileView.TemplateResources.get_l_SPCategorySortRecent=function(){return Strings.STS.L_SPCategorySortRecent};SP.UI.Communities.TileView.TemplateResources.get_l_SPCategorySortPopular=function(){return Strings.STS.L_SPCategorySortPopular};SP.UI.Communities.TileView.TemplateResources.get_l_SPCategorySortAlpha=function(){return Strings.STS.L_SPCategorySortAlpha};SP.UI.Communities.TileView.TemplateResources.get_l_SPCategorySortAlphaRev=function(){return Strings.STS.L_SPCategorySortAlphaRev};SP.UI.Communities.TileView.TemplateResources.get_l_SPDiscCategoryPage=function(){return Strings.STS.L_SPDiscCategoryPage};SP.UI.Communities.TileView.CategoriesTileViewRenderer.registerClass("SP.UI.Communities.TileView.CategoriesTileViewRenderer",SP.UI.TileView.TileViewRenderer);SP.UI.Communities.TileView.CategoriesTileRenderer.registerClass("SP.UI.Communities.TileView.CategoriesTileRenderer",SP.UI.TileView.TileRenderer);SP.UI.Communities.TileView.GlobalTemplateOverrides.registerClass("SP.UI.Communities.TileView.GlobalTemplateOverrides");SP.UI.Communities.TileView.TemplateResources.registerClass("SP.UI.Communities.TileView.TemplateResources");function sp_ui_communities_tileview_initialize(){SP.UI.Communities.TileView.GlobalTemplateOverrides.templateTypeID=500;SP.UI.Communities.TileView.GlobalTemplateOverrides.categoriesTileViewID=4;SP.UI.Communities.TileView.GlobalTemplateOverrides.$$cctor()}sp_ui_communities_tileview_initialize();RegisterModuleInit("sp.ui.communities.tileview.js",sp_ui_communities_tileview_initialize);typeof Sys!="undefined"&&Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded();NotifyScriptLoadedAndExecuteWaitingJobs("SP.UI.Communities.TileView.js");