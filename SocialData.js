function $_global_socialdata(){socialTermDetailTypeTerm.prototype={Name:undefined,Id:undefined};socialTermDetailType.prototype={Count:undefined,Term:undefined};PageUrlNormalizer=function(){this._url="";if(typeof _normalizedPageUrlForSocialItem!="undefined")this._url=_normalizedPageUrlForSocialItem};PageUrlNormalizer._instance=null;PageUrlNormalizer.GetInstance=function(){if(PageUrlNormalizer._instance==null)PageUrlNormalizer._instance=new PageUrlNormalizer;return PageUrlNormalizer._instance};PageUrlNormalizer.EnsureUpdatedFormDigest=function(){typeof _spPageContextInfo!="undefined"&&typeof _spFormDigestRefreshInterval!="undefined"&&typeof UpdateFormDigest!="undefined"&&UpdateFormDigest(_spPageContextInfo.webServerRelativeUrl,_spFormDigestRefreshInterval)};PageUrlNormalizer.prototype={_url:"",_rawUrl:"",_scriptService:"_vti_bin/socialdatainternalservice.json",_serviceMethod:"GetNormalizedPageUrl",GetUrl:function(d,a){if(this._url!=""){Boolean(a)&&a(this._url);return}this._rawUrl=d;var b=window._spPageContextInfo.webServerRelativeUrl,f=b.endsWith("/")?"":"/",e=b+f+this._scriptService;Sys.Net.WebRequestManager.add_invokingRequest(function(c,b){PageUrlNormalizer.EnsureUpdatedFormDigest();var a=$get("__REQUESTDIGEST");if(Boolean(a))b.get_webRequest().get_headers()["X-RequestDigest"]=a.value});var c={};c.pageUrl=d;Sys.Net.WebServiceProxy.invoke(encodeURI(e),this._serviceMethod,false,c,Function.createDelegate(this,this._onSuccess),Function.createDelegate(this,this._onFailure),a,Sys.Net.WebRequestManager.get_defaultTimeout())},_onSuccess:function(b,a){this._url=b;typeof a=="function"&&a(this._url)},_onFailure:function(c,a){typeof a=="function"&&a(this._rawUrl)}};TagDialogOpener=function(){};TagDialogOpener.Open=function(d,b,c){var a=PageUrlNormalizer.GetInstance();a.GetUrl(d,function(a){OpenTRC(a,b,c)})};SocialNotification=function(){};SocialNotification._tid=null;SocialNotification._nid=null;SocialNotification._notificationText=null;SocialNotification._mouseoverTimer=500;SocialNotification._hoverTimer=5e3;SocialNotification._alertTimer=7e3;SocialNotification._clearNotification=function(){if(SocialNotification._nid!=null){removeNotification(SocialNotification._nid);SocialNotification._nid=null}};SocialNotification._clearTimer=function(){if(SocialNotification._tid!=null){window.clearTimeout(SocialNotification._tid);SocialNotification._tid=null}};SocialNotification._clear=function(){SocialNotification._clearNotification();SocialNotification._clearTimer()};SocialNotification.alert=function(a){SocialNotification._clear();SocialNotification._nid=addNotification(a,true);SocialNotification._tid=window.setTimeout(SocialNotification._clearNotification,SocialNotification._alertTimer)};SocialNotification._fireNotification=function(){SocialNotification._clear();SocialNotification._nid=addNotification(SocialNotification._notificationText,true);SocialNotification._tid=window.setTimeout(SocialNotification._clearNotification,SocialNotification._hoverTimer)};SocialNotification.onmouseover=function(a){SocialNotification._notificationText=a;SocialNotification._clearTimer();SocialNotification._tid=window.setTimeout(SocialNotification._fireNotification,SocialNotification._mouseoverTimer)};SocialNotification.onmouseout=function(){SocialNotification._clear()};SocialTagsAndNotes=function(a){this.ClientID=a;this._anchor=document.getElementById("TagsAndNotes_"+a)};SocialTagsAndNotes._scriptService="_vti_bin/socialdatainternalservice.json";SocialTagsAndNotes._serviceMethod="GetSocialNotification";SocialTagsAndNotes._hasIcon24="/_layouts/images/SocialTagsAndNotesHas_24.png";SocialTagsAndNotes._hasIcon32="/_layouts/images/SocialTagsAndNotesHas_32.png";SocialTagsAndNotes._replaceIcon=function(a){if(a!=null&&a.src!=null)if(a.src.lastIndexOf("_24")!=-1)a.src=SocialTagsAndNotes._hasIcon24;else{a.src=SocialTagsAndNotes._hasIcon32;a.style.top="";a.style.left="";a.style.position=""}};SocialTagsAndNotes.prototype={ClientID:null,url:null,tooltip:"",notify_text:"{0}",replaceImg_style:null,_anchor:null,GetSocialNotification:function(){if(this.url==null||this._anchor==null)return;this._anchor.onmouseover="";var a=PageUrlNormalizer.GetInstance();a.GetUrl(this.url,Function.createDelegate(this,this._onUrlNormalized))},_onSuccess:function(b){this._wsSucceeded$2=true;var c=!isNaN(b)&&b>0?b:0;c>0&&SocialTagsAndNotes._replaceIcon(document.getElementById("TagsAndNotesImg_"+this.ClientID),this.replaceImg_style);var a=String.format(this.notify_text,c>1e3?"1000+":c.toString())+"\n"+this.tooltip;if(this._anchor.title!="")this._anchor.title=a;else{SocialNotification.onmouseover(a);this._anchor.attachEvent("onmouseover",function(){SocialNotification.onmouseover(a)})}},_onFailure:function(){var a=this.tooltip;this._anchor.attachEvent("onmouseover",function(){SocialNotification.onmouseover(a)})},_onUrlNormalized:function(c){var a=window._spPageContextInfo.webServerRelativeUrl,e=a.endsWith("/")?"":"/",d=a+e+SocialTagsAndNotes._scriptService;Sys.Net.WebRequestManager.add_invokingRequest(function(c,b){PageUrlNormalizer.EnsureUpdatedFormDigest();var a=$get("__REQUESTDIGEST");if(Boolean(a))b.get_webRequest().get_headers()["X-RequestDigest"]=a.value});var b={};b.targetPage=c;Sys.Net.WebServiceProxy.invoke(encodeURI(d),SocialTagsAndNotes._serviceMethod,false,b,Function.createDelegate(this,this._onSuccess),Function.createDelegate(this,this._onFailure),null,Sys.Net.WebRequestManager.get_defaultTimeout())}};SocialQuickTag=function(a){this.ClientID=a};SocialQuickTag._scriptService="_vti_bin/socialdatainternalservice.json";SocialQuickTag._serviceMethod="AddQuickTag";SocialQuickTag.prototype={ClientID:null,url:null,title:null,tagged_text:"",failure_text:"",replaceImg_style:null,_quickTagId:null,_onSuccess:function(){this._wsSucceeded$2=true;SocialNotification.alert(this.tagged_text);SocialTagsAndNotes._replaceIcon(document.getElementById("TagsAndNotesImg_"+this.ClientID),this.replaceImg_style)},_onFailure:function(){SocialNotification.alert(this.failure_text)},_onUrlNormalized:function(c){var b=window._spPageContextInfo.webServerRelativeUrl,e=b.endsWith("/")?"":"/",d=b+e+SocialQuickTag._scriptService;Sys.Net.WebRequestManager.add_invokingRequest(function(c,b){PageUrlNormalizer.EnsureUpdatedFormDigest();var a=$get("__REQUESTDIGEST");if(Boolean(a))b.get_webRequest().get_headers()["X-RequestDigest"]=a.value});var a={};a.targetPage=c;a.title=this.title;a.quickTagId=this._quickTagId;Sys.Net.WebServiceProxy.invoke(encodeURI(d),SocialQuickTag._serviceMethod,false,a,Function.createDelegate(this,this._onSuccess),Function.createDelegate(this,this._onFailure),null,Sys.Net.WebRequestManager.get_defaultTimeout())},AddQuickTag:function(b){this._quickTagId=b;if(this.url==null||this.title==null||isNaN(this._quickTagId))return;var a=PageUrlNormalizer.GetInstance();a.GetUrl(this.url,Function.createDelegate(this,this._onUrlNormalized))}};SocialTabSwitcher=function(){};SocialTabSwitcher._EventHandlers=null;SocialTabSwitcher.RegisterEventHandler=function(e,d,c,b){if(!Boolean(SocialTabSwitcher._EventHandlers))SocialTabSwitcher._EventHandlers=[];var a={};a.TabId=e;a.ContentId=d;a.ActivateFunction=c;a.DeactivateFunction=b;SocialTabSwitcher._EventHandlers.push(a)};SocialTabSwitcher._GetEventHandler=function(e){if(!Boolean(SocialTabSwitcher._EventHandlers))return null;for(var b=null,a=0;a<SocialTabSwitcher._EventHandlers.length;a++){var c=SocialTabSwitcher._EventHandlers[a],d=c.TabId;if(d.toLowerCase()!=e.toLowerCase())continue;b=c}return b};SocialTabSwitcher.EnableTab=function(e){if(!Boolean(e))return;var g=e.parentNode;if(!Boolean(g))return;for(var f=[],j="ms-cui-tt ms-cui-tt-s",i="ms-cui-tt",a,c=0;c<g.childNodes.length;c++){var b=g.childNodes[c];if(!Boolean(b)||!Boolean(b.tagName)||b.tagName.toLowerCase()!="li")continue;var d=null;a=SocialTabSwitcher._GetEventHandler(b.id);if(a)d=document.getElementById(a.ContentId);if(b.id.toLowerCase()==e.id.toLowerCase()){b.className=j;if(Boolean(d))d.style.display="block"}else{b.className=i;if(Boolean(d)){d.style.display!="none"&&f.push(a);d.style.display="none"}}}for(c=0;c<f.length;c++){a=f[c];a&&a.DeactivateFunction&&a.DeactivateFunction()}var h=SocialTabSwitcher._GetEventHandler(e.id);h&&h.ActivateFunction()};SocialProcessNotifier=function(){};SocialProcessNotifier._NotificationAreaId="notificationArea";SocialProcessNotifier._StatusAreaId="pageStatusBar";SocialProcessNotifier.prototype={_NotificationId:null,AlternateNotificationAreaId:null,AlternateStatusAreaId:null,UseAlternate:false,_NotificationAreaEnabled:function(){var a=document.getElementById(SocialProcessNotifier._NotificationAreaId);return Boolean(a)?true:false},AddNotification:function(b){if(this.UseAlternate||!this._NotificationAreaEnabled()){var a=document.getElementById(this.AlternateNotificationAreaId);if(!Boolean(a))return;a.innerHTML=b}else if(this._NotificationAreaEnabled())this._NotificationId=addNotification(b,true)},RemoveNotification:function(){if(this.UseAlternate||!this._NotificationAreaEnabled()){var a=document.getElementById(this.AlternateNotificationAreaId);if(!Boolean(a))return;a.innerHTML=""}else if(this._NotificationAreaEnabled()){if(this._NotificationId==undefined||this._NotificationId==null)return;removeNotification(this._NotificationId)}},_StatusAreaEnabled:function(){var a=document.getElementById(SocialProcessNotifier._StatusAreaId);return Boolean(a)?true:false},ShowStatus:function(b){if(this.UseAlternate||!this._StatusAreaEnabled()){var a=document.getElementById(this.AlternateStatusAreaId);if(!Boolean(a))return;a.style.display="block"}else this._StatusAreaEnabled()&&addStatus("",b,true)},ClearStatus:function(){if(this.UseAlternate||!this._StatusAreaEnabled()){var a=document.getElementById(this.AlternateStatusAreaId);if(!Boolean(a))return;a.style.display="none"}else this._StatusAreaEnabled()&&removeAllStatus(true)}};NotifyScriptLoadedAndExecuteWaitingJobs("SocialData.js")}function socialTermDetailTypeTerm(){}function socialTermDetailType(){}var PageUrlNormalizer,TagDialogOpener;function OpenTRC(c,b,a){if(a==undefined||a==null)a=1;var d=function(){var e=SP.Utilities.HttpUtility.urlPathEncode(window._spPageContextInfo.webServerRelativeUrl);e=SP.Utilities.UrlBuilder.urlCombine(e,"_layouts/socialdataframe.aspx");var d=new SP.Utilities.UrlBuilder(e);d.addKeyValueQueryString("Url",c);d.addKeyValueQueryString("Title",b);d.addKeyValueQueryString("mode",a.toString());var f={url:d.get_url(),args:null,title:b,width:600,height:470};SP.UI.ModalDialog.showModalDialog(f)};SP.SOD.executeFunc("SP.UI.Dialog.js","SP.UI.ModalDialog.showModalDialog",d)}var SocialNotification,SocialTagsAndNotes,SocialQuickTag,SocialTabSwitcher,SocialProcessNotifier;function TagCloudItemRank(c,e,d,f){var a=0,b=9;if(c==e)a=1+b/2;else{a=1+Math.floor((b-1)*(d.Count-c)/(e-c));if(IsQuickTag(d,f)&&a>1+b/2)a=1+b/2}return a}function IsQuickTag(c,b){for(var a=0;a<b.length;a++){var d=b[a];if(c.Term.Name.toLowerCase()==d.toLowerCase())return true}return false}function TagCloudItemRender(i,h,c,g,b,f,e){var d=TagCloudItemRank(i,h,b,f),a="";if(Boolean(c))a+='<a id="'+e+'" class="rank'+d.toString()+'" href="'+c+b.Term.Id+'">';else a+='<span id="'+e+'" class="rank'+d.toString()+'">';a+=STSHtmlEncode(b.Term.Name);if(g)a+="("+b.Count.toString()+")";if(Boolean(c))a+="</a>";else a+="</span>";return a}function TagCloudItemsRender(b,i,m,h,g,k,j){var f=document.getElementById(h),a;if(!Boolean(f))return;if(!Boolean(b)||b.length==0){f.innerHTML=i;return}b.sort(function(c,d){var a=c.Term.Name,b=d.Term.Name;return a.localeCompare(b)});var e=b[0].Count,d=b[0].Count;for(a=1;a<b.length;a++){if(e>b[a].Count)e=b[a].Count;if(d<b[a].Count)d=b[a].Count}var c='<div id="tagCloudData'+g+'" class="ms-TagCloud ms-TagCloudLink">',l="tagCloudLink_"+g+"_";for(a=0;a<b.length;a++){if(a>0)c+='<span class="spacer"> </span>';c+=TagCloudItemRender(e,d,m,k,b[a],j,l+a.toString())}c+="</div>";f.innerHTML=c}function TagCloudErrorRender(b,c){var a=document.getElementById(b);if(!Boolean(a))return;var d="<span style='color: red;'>"+c+"</span>";a.innerHTML=d}$_global_socialdata();