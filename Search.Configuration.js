Type.registerNamespace("Search.Configuration");Search.Configuration.QueryBuilderMode=function(){};Search.Configuration.QueryBuilderMode.prototype={full:0,predefinedCBS:1,resultSource:2,subStrateQueryRule:3,resultBlockQueryRule:4,resultScriptWebPart:5};Search.Configuration.QueryBuilderMode.registerEnum("Search.Configuration.QueryBuilderMode",false);Search.Configuration.CatalogItemPicker=function(){};Search.Configuration.CatalogItemPicker.get_$o=function(){if(!Search.Configuration.CatalogItemPicker.$1x){var a=previewCBS;if(!Srch.U.n(a))Search.Configuration.CatalogItemPicker.$1x=a.control}return Search.Configuration.CatalogItemPicker.$1x};Search.Configuration.CatalogItemPicker.get_$H=function(){if(!Search.Configuration.CatalogItemPicker.$5){var b=qbConfigData,a=b.value;if(!Srch.U.e(a))Search.Configuration.CatalogItemPicker.$5=Sys.Serialization.JavaScriptSerializer.deserialize(a)}return Search.Configuration.CatalogItemPicker.$5};Search.Configuration.CatalogItemPicker.launchCatalogPicker=function(e,h,g,i){var a=new SP.UI.DialogOptions;a.width=900;a.height=600;a.autoSize=true;a.dialogReturnValueCallback=h;var b={},c={};c[Search.Configuration.CatalogItemPicker.ConfigKeys.$1B]=g;c[Search.Configuration.CatalogItemPicker.ConfigKeys.$1A]=i;var d=new Search.Configuration.CatalogItemPicker.ItemPickerState;d.QueryType="CatalogItemQuery";d.PDQueryData=c;b["CatalogPickerStateKey"]=d;b["QueryBuilderCustomLoad"]="Search.Configuration.CatalogItemPicker.catalogPickerLoader();";a.title=Srch.Res.qb_CatalogPicker_Title;a.url=SP.Utilities.VersionUtility.getLayoutsPageUrl("CatalogItemPicker.aspx");a.url+=SP.ScriptUtility.isNullOrEmptyString(e)?"":"?tplt="+e;var f=window.location.search.substring(1,window.location.search.length);if(!SP.ScriptUtility.isNullOrEmptyString(f))a.url+="&"+f;a.args=b;var j=SP.UI.ModalDialog.showModalDialog(a)};Search.Configuration.CatalogItemPicker.onPickerOKButtonClicked=function(){var a=new Search.Configuration.CatalogItemPicker.ItemPickerReturnType;a.queryTemplate=Search.Configuration.CatalogItemPicker.getCatalogItemQuery();Search.Configuration.CatalogItemPicker.$I.QueryType="CatalogItemQuery";Search.Configuration.CatalogItemPicker.$I.ClientType="CatalogItemReuseQuery";a.pickerState=Search.Configuration.CatalogItemPicker.$I;SP.UI.ModalDialog.get_childDialog().set_returnValue(a);SP.UI.ModalDialog.get_childDialog().close(1)};Search.Configuration.CatalogItemPicker.catalogPickerLoader=function(){var a=SP.UI.ModalDialog.get_childDialog().get_args();if(!Srch.U.n(a["CatalogPickerStateKey"]))Search.Configuration.CatalogItemPicker.$I=a["CatalogPickerStateKey"];else{Search.Configuration.CatalogItemPicker.$I=new Search.Configuration.CatalogItemPicker.ItemPickerState;Search.Configuration.CatalogItemPicker.$I.QueryType="Latest";Search.Configuration.CatalogItemPicker.$I.Sorts=[new Srch.ResultSort("LastModifiedTime",1)];Search.Configuration.CatalogItemPicker.$I.PDQueryData["PathType"]="PathSite"}Search.Configuration.CatalogItemPicker.createCatalogItemControl();Search.Configuration.CatalogItemPicker.previewPickerResults()};Search.Configuration.CatalogItemPicker.previewPickerResults=function(){Search.Configuration.CatalogItemPicker.get_$o().set_showAdvancedLink(false);Search.Configuration.CatalogItemPicker.get_$o().set_showLanguageOptions(false);Search.Configuration.CatalogItemPicker.get_$o().set_showPreferencesLink(false);Search.Configuration.CatalogItemPicker.get_$o().set_showPaging(true);Search.Configuration.CatalogItemPicker.get_$o().clearLastQueryState();var a=Search.Configuration.CatalogItemPicker.getCatalogItemQuery();Search.Configuration.CatalogItemPicker.$4k(a)};Search.Configuration.CatalogItemPicker.cancelDialog=function(){var a=SP.UI.ModalDialog.get_childDialog();a&&a.close(0)};Search.Configuration.CatalogItemPicker.$4k=function(a){if(Srch.U.w(a)){Srch.U.trace(null,"RefreshCatalogPickerResults","queryText is null");return}if(a.length>=2048)a=a.substring(0,2048);var b=Search.Configuration.CatalogItemPicker.get_$o().getDataProvider(),d=new Srch.QueryState;d.k=a;var c=Search.Configuration.CatalogItemPicker.$I.PDQueryData[Search.Configuration.CatalogItemPicker.ConfigKeys.$2M];if(!Srch.U.w(c)&&SP.Guid.isValid(c))b.set_sourceID(c);else b.set_sourceID("8413cd39-2156-4e00-b54d-11efd9abdb89");b.set_selectedRefiners(["ManagedProperties(filter=100/0/*)"]);b.get_properties()[Search.Configuration.CatalogItemPicker.ConfigKeys.$W]="True";Search.Configuration.CatalogItemPicker.get_$o().refresh(d)};Search.Configuration.CatalogItemPicker.createCatalogItemControl=function(){Search.Configuration.CatalogItemPicker.$4Z();Search.Configuration.CatalogItemPicker.$U=$get("PathItem");Search.Configuration.CatalogItemPicker.$y=$get("CatalogItemFilter");var a=Search.Configuration.CatalogItemPicker.$I.PDQueryData;if(!Srch.U.e(a[Search.Configuration.CatalogItemPicker.ConfigKeys.$1A]))Search.Configuration.CatalogItemPicker.$U.value=a[Search.Configuration.CatalogItemPicker.ConfigKeys.$1A];if(!Srch.U.e(a[Search.Configuration.CatalogItemPicker.ConfigKeys.$1B]))Search.Configuration.CatalogItemPicker.$9.value=a[Search.Configuration.CatalogItemPicker.ConfigKeys.$1B];else Search.Configuration.CatalogItemPicker.$9.selectedIndex=Search.Configuration.CatalogItemPicker.$45(Search.Configuration.CatalogItemPicker.$U.value)};Search.Configuration.CatalogItemPicker.$4Z=function(){Search.Configuration.CatalogItemPicker.$9=$get("CatalogListSelection");if(Srch.U.n(Search.Configuration.CatalogItemPicker.$9))return;var a=Search.Configuration.CatalogItemPicker.get_$H();if(a&&a.CatalogConfigInfo){var c=a.CatalogConfigInfo.length;if(c>0)for(var b=0;b<c;b++){var d=a.CatalogConfigInfo[b];Search.Configuration.CatalogItemPicker.$9.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(d.CatalogUrl,d.CatalogName))}}};Search.Configuration.CatalogItemPicker.$45=function(b){if(Srch.U.n(Search.Configuration.CatalogItemPicker.$9))return -1;var c=0;if(!Srch.U.e(b))for(var a=0;a<Search.Configuration.CatalogItemPicker.$9.options.length;a++){var d=Search.Configuration.CatalogItemPicker.$9.options[a],e=d.value+"/";if(!b.indexOf(e))return a}return c};Search.Configuration.CatalogItemPicker.getCatalogItemQuery=function(){var a={},b="";if(!SP.ScriptUtility.isNullOrUndefined(Search.Configuration.CatalogItemPicker.$9)){var c=Search.Configuration.CatalogItemPicker.$9.selectedIndex,d="";if(c>=0)a[Search.Configuration.CatalogItemPicker.ConfigKeys.$2M]=Search.Configuration.CatalogItemPicker.get_$H().CatalogConfigInfo[c].CatalogResultSource;if(Srch.U.n(a[Search.Configuration.CatalogItemPicker.ConfigKeys.$2M]))d=" path:"+Search.Configuration.CatalogItemPicker.$9.value;b="contentclass:sts_ListItem"+d;a[Search.Configuration.CatalogItemPicker.ConfigKeys.$1B]=Search.Configuration.CatalogItemPicker.$9.value}if(!Srch.U.n(Search.Configuration.CatalogItemPicker.$y)&&!Srch.U.e(Search.Configuration.CatalogItemPicker.$y.value))b+=" "+Search.Configuration.CatalogItemPicker.$y.value;if(!Srch.U.n(Search.Configuration.CatalogItemPicker.$U)&&!Srch.U.e(Search.Configuration.CatalogItemPicker.$U.value))a[Search.Configuration.CatalogItemPicker.ConfigKeys.$1A]=Search.Configuration.CatalogItemPicker.$U.value;Search.Configuration.CatalogItemPicker.$I.PDQueryData=a;return b};Search.Configuration.CatalogItemPicker.setCatalogItemPath=function(a){if(!Srch.U.n(Search.Configuration.CatalogItemPicker.$U)&&a)Search.Configuration.CatalogItemPicker.$U.value=a};Search.Configuration.CatalogItemPicker.ItemPickerReturnType=function(){};Search.Configuration.CatalogItemPicker.ItemPickerReturnType.prototype={queryTemplate:null,pickerState:null};Search.Configuration.CatalogItemPicker.ItemPickerState=function(){};Search.Configuration.CatalogItemPicker.ItemPickerState.prototype={QueryType:null,PDQueryData:null,Sorts:null,ClientType:null};Search.Configuration.CatalogItemPicker.CatalogItemPickerConfigData=function(){};Search.Configuration.CatalogItemPicker.CatalogItemPickerConfigData.prototype={CatalogConfigInfo:null};Search.Configuration.CatalogItemPicker.CatalogItemPickerCatalogData=function(){};Search.Configuration.CatalogItemPicker.CatalogItemPickerCatalogData.prototype={CatalogName:null,CatalogFilters:null,CatalogUrl:null,CatalogResultSource:null,CatalogSelectedProperties:null};Search.Configuration.CatalogItemPicker.ConfigKeys=function(){};Search.Configuration.ContentBySearch=function(){};Search.Configuration.ContentBySearch.changeDisplayTemplate=function(d,j,k){if(!Srch.U.e(d)){var f=$get(d+"_csr"),b=$get(k),g=$get(j),h=templatePropMappings;if(!Srch.U.n(f)&&!Srch.U.n(b)&&!Srch.U.n(g)&&!Srch.U.n(h)){var a=f.control;if(!Srch.U.n(a)){a.set_renderTemplateId(g.value);var i=b.value;a.getDataProvider().set_bypassResultTypes(!!i);a.set_itemTemplateId(i);for(var r=b.options[b.selectedIndex],m=h[a.get_itemTemplateId()],n=Srch.Result.parsePropertyMappingsString(m),o=Srch.Result.getSelectedPropertiesFromMappingDictionary(n),p=a.getDataProvider(),e=o,l=e.length,c=0;c<l;++c){var q=e[c];Srch.U.appendArray(p.get_selectedProperties(),q)}a.refresh(new Srch.QueryState)}}}};Search.Configuration.QueryBuilderUtility=function(){};Search.Configuration.QueryBuilderUtility.removeAllChildren=function(a){if(!SP.ScriptUtility.isNullOrUndefined(a))if(a.hasChildNodes())while(a.childNodes.length>0)a.removeChild(a.firstChild)};Search.Configuration.QueryBuilderUtility.hide=function(a){a&&a.style&&Sys.UI.DomElement.addCssClass(a,"display-none")};Search.Configuration.QueryBuilderUtility.show=function(a){a&&a.style&&Sys.UI.DomElement.removeCssClass(a,"display-none")};Search.Configuration.QueryBuilderUtility.isHidden=function(a){if(a&&a.style)if(Sys.UI.DomElement.containsCssClass(a,"display-none")||a.style.display==="none")return true;return false};Search.Configuration.QueryBuilderUtility.showHide=function(a){if(Search.Configuration.QueryBuilderUtility.isHidden(a))Search.Configuration.QueryBuilderUtility.show(a);else Search.Configuration.QueryBuilderUtility.hide(a)};Search.Configuration.QueryBuilderUtility.enable=function(b){if(!Srch.U.n(b)){b.removeAttribute("disabled");var a=b.firstChild;while(a){a.nodeType===1&&Search.Configuration.QueryBuilderUtility.enable(a);a=a.nextSibling}}};Search.Configuration.QueryBuilderUtility.disable=function(b){if(!Srch.U.n(b)){b.setAttribute("disabled","disabled");var a=b.firstChild;while(a){a.nodeType===1&&Search.Configuration.QueryBuilderUtility.disable(a);a=a.nextSibling}}};Search.Configuration.QueryBuilderUtility.$31=function(a){if(!a||typeof a!=="object")return a;if(Srch.U.isArray(a)){for(var e=a,f=[],b=0;b<e.length;b++)Srch.U.appendArray(f,Search.Configuration.QueryBuilderUtility.$31(e[b]));return f}else{var g={},c=a;for(var d in c){var h={key:d,value:c[d]};g[h.key]=Search.Configuration.QueryBuilderUtility.$31(h.value)}return g}};Search.Configuration.QueryBuilderUtility.$6=function(a,b){Srch.U.n(a)&&Srch.U.trace(null,"SetInnerText","elem is null");if(Srch.U.n(document.body.innerText))a.textContent=b;else a.innerText=b};Search.Configuration.QueryBuilderUtility.$47=function(a){Srch.U.n(a)&&Srch.U.trace(null,"GetInnerText","elem is null");if(Srch.U.n(document.body.innerText))return a.textContent;return a.innerText};Search.Configuration.QueryBuilderUtility.getNextElement=function(b){if(Srch.U.n(b))return null;else{var a=b.nextSibling;while(!Srch.U.n(a)&&a.nodeType!==1)a=a.nextSibling;return a}};Search.Configuration.QueryBuilderUtility.getFirstChild=function(b){if(Srch.U.n(b))return null;else{var a=b.firstChild;while(a&&a.nodeType!==1)a=a.nextSibling;return a}};Search.Configuration.QueryBuilderUtility.stringify=function(a){return JSON.stringify(a)};Search.Configuration.QueryBuilderUtility.parse=function(a){return JSON.parse(a)};Search.Configuration.QueryBuilderUtility.getClientElementById=function(a){return $get(Search.Configuration.QueryBuilder.get_$F()+a)};Search.Configuration.QueryBuilderUtility.addDynamicValue=function(b,c){var a=document.createElement("OPTION");if(a){a.innerHTML=c;a.value=b}return a};Search.Configuration.CustomTab=function(b,c,a){this.$$d_$4X_2=Function.createDelegate(this,this.$4X_2);this.$$d_onTabClick=Function.createDelegate(this,this.onTabClick);Search.Configuration.CustomTab.initializeBase(this,[c]);this.$1D_2=document.createElement("li");this.$2N_2=document.createElement("h2");this.$8_2=document.createElement("a");this.$8_2.tabIndex=0;this.$8_2.href="javascript:void(0);";Search.Configuration.QueryBuilderUtility.$6(this.$8_2,b);this.$1D_2.setAttribute(Search.Configuration.CustomTab.$1K,Search.Configuration.CustomTab.$3I+" qb-marginbottom3");this.$1D_2.setAttribute("id",a);this.$2N_2.setAttribute(Search.Configuration.CustomTab.$1K,Search.Configuration.CustomTab.$38);this.$8_2.setAttribute(Search.Configuration.CustomTab.$1K,Search.Configuration.CustomTab.$3H);Srch.U.addHandler(this.$8_2,"click",this.$$d_onTabClick);Srch.U.addHandler(this.$8_2,"keypress",this.$$d_$4X_2);this.$1D_2.appendChild(this.$2N_2);this.$2N_2.appendChild(this.$8_2);Search.Configuration.QueryBuilder.$3p(this.$1D_2)};Search.Configuration.CustomTab.prototype={get_tabName:function(){if(this.$8_2)return Search.Configuration.QueryBuilderUtility.$47(this.$8_2);else return ""},get_tabLink:function(){return this.$8_2},$1D_2:null,$2N_2:null,$8_2:null,onTabClick:function(){if(Search.Configuration.CustomTab.$13){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.CustomTab.$13.get_element());Sys.UI.DomElement.removeCssClass(Search.Configuration.CustomTab.$13.$8_2,Search.Configuration.CustomTab.$2q)}this.onTabLoad();Search.Configuration.QueryBuilderUtility.show(this.get_element());Search.Configuration.CustomTab.$13=this;Sys.UI.DomElement.addCssClass(this.$8_2,Search.Configuration.CustomTab.$2q)},$4X_2:function(a){a.charCode===13&&this.onTabClick(a)},onTabLoad:function(){}};Search.Configuration.RefinerTab=function(f,g,e){Search.Configuration.RefinerTab.initializeBase(this,[f,g,e]);Search.Configuration.RefinerTab.get_$18().add_resultRendered(Search.Configuration.RefinerTab.ensureRefiners);var c=Search.Configuration.QueryBuilder.$0.Filters;if(!Srch.U.n(c))for(var d=0;d<c.length;d++)for(var a=c[d],b=0;b<a.t.length;b++)Search.Configuration.RefinerTab.$2w(a.n,a.t[b].toString(),a.t[b].toString(),false)};Search.Configuration.RefinerTab.get_$18=function(){if(!Search.Configuration.RefinerTab.$29){var a=filter;if(!Srch.U.n(a))Search.Configuration.RefinerTab.$29=a.control}return Search.Configuration.RefinerTab.$29};Search.Configuration.RefinerTab.get_$1Q=function(){if(!Search.Configuration.RefinerTab.$1P)Search.Configuration.RefinerTab.$1P=$get("qb-collapselist2");return Search.Configuration.RefinerTab.$1P};Search.Configuration.RefinerTab.get_$V=function(){if(!Search.Configuration.RefinerTab.$1M)Search.Configuration.RefinerTab.$1M=Search.Configuration.QueryBuilderUtility.getClientElementById("collapsableProperties1");return Search.Configuration.RefinerTab.$1M};Search.Configuration.RefinerTab.get_$E=function(){if(!Search.Configuration.RefinerTab.$2A)Search.Configuration.RefinerTab.$2A=$get("refinementSpecificDropDown1");return Search.Configuration.RefinerTab.$2A};Search.Configuration.RefinerTab.get_$j=function(){if(!Search.Configuration.RefinerTab.$1N)Search.Configuration.RefinerTab.$1N=Search.Configuration.QueryBuilderUtility.getClientElementById("collapsableProperties2");return Search.Configuration.RefinerTab.$1N};Search.Configuration.RefinerTab.get_$L=function(){if(!Search.Configuration.RefinerTab.$2B)Search.Configuration.RefinerTab.$2B=$get("refinementSpecificDropDown2");return Search.Configuration.RefinerTab.$2B};Search.Configuration.RefinerTab.get_$3K=function(){if(!Search.Configuration.RefinerTab.$1r)Search.Configuration.RefinerTab.$1r=Search.Configuration.QueryBuilderUtility.getClientElementById("numCollapsableResultsDropDown1");return Search.Configuration.RefinerTab.$1r};Search.Configuration.RefinerTab.get_$3L=function(){if(!Search.Configuration.RefinerTab.$1s)Search.Configuration.RefinerTab.$1s=Search.Configuration.QueryBuilderUtility.getClientElementById("numCollapsableResultsDropDown2");return Search.Configuration.RefinerTab.$1s};Search.Configuration.RefinerTab.get_$1C=function(){if(!Search.Configuration.RefinerTab.$2E)Search.Configuration.RefinerTab.$2E=$get("selectedRefiners");return Search.Configuration.RefinerTab.$2E};Search.Configuration.RefinerTab.get_$2e=function(){if(!Search.Configuration.RefinerTab.$1J)Search.Configuration.RefinerTab.$1J=$get("availableRefiners");return Search.Configuration.RefinerTab.$1J};Search.Configuration.RefinerTab.get_$3S=function(){if(!Search.Configuration.RefinerTab.$2C)Search.Configuration.RefinerTab.$2C=$get("RefineTabShowMore");return Search.Configuration.RefinerTab.$2C};Search.Configuration.RefinerTab.get_$1S=function(){if(!Search.Configuration.RefinerTab.$1R)Search.Configuration.RefinerTab.$1R=$get("collapseDiv");return Search.Configuration.RefinerTab.$1R};Search.Configuration.RefinerTab.$2u=function(a){if(!a)Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.RefinerTab.get_$1Q());else{Search.Configuration.QueryBuilderUtility.show(Search.Configuration.RefinerTab.get_$1Q());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.RefinerTab.get_$L());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.RefinerTab.get_$j())}Search.Configuration.RefinerTab.updateCollapseSpecification()};Search.Configuration.RefinerTab.$3h=function(a,b,c){if(a.value===Search.Configuration.RefinerTab.$v){Search.Configuration.RefinerTab.$3k(b,c);Search.Configuration.QueryBuilderUtility.show(b);Search.Configuration.QueryBuilderUtility.hide(a);return true}return false};Search.Configuration.RefinerTab.$3X=function(b,a,d,c){if(Search.Configuration.RefinerTab.$4h(b,a)){Search.Configuration.RefinerTab.$3W(a,d,b);Search.Configuration.QueryBuilderUtility.show(a);Search.Configuration.QueryBuilderUtility.hide(c)}else{Search.Configuration.RefinerTab.$3W(c,d,b);Search.Configuration.QueryBuilderUtility.show(c);Search.Configuration.QueryBuilderUtility.hide(a)}};Search.Configuration.RefinerTab.$4h=function(e,f){for(var b=f.getElementsByTagName("option"),c=b.length,a=0;a<c;a++){var d=b[a];if(d.value===e)return true}return false};Search.Configuration.RefinerTab.$3W=function(b,c,d){var a=d.split(":");b.value=a[0];c.value=a[1]};Search.Configuration.RefinerTab.$3M=function(a,g){var b=a.value;a.innerHTML="";a.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(Search.Configuration.RefinerTab.$h,Search.Configuration.RefinerTab.$h));var c=g;for(var d in c){var e={key:d,value:c[d]},f=Search.Configuration.QueryBuilderUtility.addDynamicValue(e.key,e.value);a.appendChild(f)}a.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(Search.Configuration.RefinerTab.$v,Search.Configuration.RefinerTab.$v));if(!SP.ScriptUtility.isUndefined(b)&&!SP.ScriptUtility.isNullOrEmptyString(b))a.value=b};Search.Configuration.RefinerTab.$4E=function(d){for(var b={},a=0;a<d.length;a++){var c=d[a]["RefinerName"];b[c]=c}return b};Search.Configuration.RefinerTab.$16=function(a){a.innerHTML="";a.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(Search.Configuration.RefinerTab.$h,Search.Configuration.RefinerTab.$h));a.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(Search.Configuration.RefinerTab.$v,Search.Configuration.RefinerTab.$v))};Search.Configuration.RefinerTab.$35=function(a,b,c){if(a.value===Search.Configuration.RefinerTab.$3c){Search.Configuration.RefinerTab.$3k(b,c);Search.Configuration.QueryBuilderUtility.show(b);Search.Configuration.QueryBuilderUtility.hide(a);return true}return false};Search.Configuration.RefinerTab.$3k=function(b,d){for(var c=b.getElementsByTagName("option"),a=0;a<c.length;a++){var e=c[a];if(e.value===d){b.value=d;return}}b.value=Search.Configuration.RefinerTab.$h};Search.Configuration.RefinerTab.$1m=function(c){if(!Srch.U.e(Search.Configuration.QueryBuilder.$0.CollapseSpecification)){var a=Search.Configuration.QueryBuilder.$0.CollapseSpecification;if(SP.ScriptUtility.isNullOrEmptyString(a))return Search.Configuration.RefinerTab.$h;var b=a.trim().split(" ");if(b.length>=c){var d=b[c-1],e=d.split(":");return e[0]}}return Search.Configuration.RefinerTab.$h};Search.Configuration.RefinerTab.onSelectCollapsing=function(){var b=Search.Configuration.RefinerTab.$1m(1),a=Search.Configuration.RefinerTab.$35(Search.Configuration.RefinerTab.get_$V(),Search.Configuration.RefinerTab.get_$E(),b);a&&!Search.Configuration.RefinerTab.get_$E().selectedIndex&&Search.Configuration.RefinerTab.$2u(Search.Configuration.RefinerTab.get_$E().selectedIndex);!a&&Search.Configuration.RefinerTab.$2u(Search.Configuration.RefinerTab.get_$V().selectedIndex)};Search.Configuration.RefinerTab.addRefiner=function(){if(Search.Configuration.RefinerTab.get_$2e().options.length>0){var a=Search.Configuration.RefinerTab.get_$2e().options[Search.Configuration.RefinerTab.get_$2e().selectedIndex];if(!Srch.U.n(a)){var b=a.parentNode;if(!Srch.U.n(b)){var c=STSHtmlDecode(b.getAttribute("label"));!Srch.U.n(c)&&Search.Configuration.RefinerTab.$2w(c,STSHtmlDecode(a.value),a.text,true)}}}};Search.Configuration.RefinerTab.$2w=function(b,c,d,e){var a=document.createElement("OPTION");a.value=c;a.text=d;a.setAttribute("data-refinername",b);!Search.Configuration.RefinerTab.get_$18().hasRefinementFilter(b,c)&&e&&Search.Configuration.RefinerTab.get_$18().addRefinementFilter(b,c)};Search.Configuration.RefinerTab.removeRefiner=function(){var a=Search.Configuration.RefinerTab.get_$1C().options[Search.Configuration.RefinerTab.get_$1C().selectedIndex];if(!Srch.U.n(a)){Search.Configuration.RefinerTab.get_$1C().removeChild(a);Search.Configuration.RefinerTab.get_$18().removeRefinementFilter(a.getAttribute("data-refinername"),STSHtmlDecode(a.value))}};Search.Configuration.RefinerTab.onSelectCollapsing2=function(){var a=Search.Configuration.RefinerTab.$1m(2),b=Search.Configuration.RefinerTab.$35(Search.Configuration.RefinerTab.get_$j(),Search.Configuration.RefinerTab.get_$L(),a);(!b||!Search.Configuration.RefinerTab.get_$L().selectedIndex)&&Search.Configuration.RefinerTab.updateCollapseSpecification()};Search.Configuration.RefinerTab.updateCollapseSpecification=function(){var b=Search.Configuration.RefinerTab.$3F(Search.Configuration.RefinerTab.get_$E(),Search.Configuration.RefinerTab.get_$V()),a=Search.Configuration.RefinerTab.$3F(Search.Configuration.RefinerTab.get_$L(),Search.Configuration.RefinerTab.get_$j());if(Search.Configuration.RefinerTab.$2k(b)){Search.Configuration.QueryBuilder.$0.CollapseSpecification="";Search.Configuration.RefinerTab.$16(Search.Configuration.RefinerTab.get_$E());Search.Configuration.RefinerTab.$16(Search.Configuration.RefinerTab.get_$L())}else{var d=b.value,e=Search.Configuration.RefinerTab.get_$3K(),c=d+":"+e.value;if(!Search.Configuration.RefinerTab.$2k(a)){var f=a.value,g=Search.Configuration.RefinerTab.get_$3L();c+=" "+f+":"+g.value}Search.Configuration.QueryBuilder.$0.CollapseSpecification=c}Search.Configuration.RefinerTab.$2k(a)&&Search.Configuration.RefinerTab.$16(Search.Configuration.RefinerTab.get_$L());Search.Configuration.QueryBuilder.updateResult()};Search.Configuration.RefinerTab.updateRefinementSpecificCollapse1=function(){var a=Search.Configuration.RefinerTab.$1m(1),b=Search.Configuration.RefinerTab.$3h(Search.Configuration.RefinerTab.get_$E(),Search.Configuration.RefinerTab.get_$V(),a);!b&&Search.Configuration.RefinerTab.$2u(Search.Configuration.RefinerTab.get_$E().selectedIndex)};Search.Configuration.RefinerTab.updateRefinementSpecificCollapse2=function(){var a=Search.Configuration.RefinerTab.$1m(2),b=Search.Configuration.RefinerTab.$3h(Search.Configuration.RefinerTab.get_$L(),Search.Configuration.RefinerTab.get_$j(),a);!b&&Search.Configuration.RefinerTab.updateCollapseSpecification()};Search.Configuration.RefinerTab.ensureRefiners=function(){var b=Search.Configuration.QueryBuilder.get_$C().get_dataProvider().get_currentQueryState().r,h=Search.Configuration.RefinerTab.get_$1C().options;if(!Srch.U.n(b)&&b.length>0)for(var e=0;e<b.length;e++){var i=b[e],c=i.t;if(!Srch.U.n(c)&&c.length>0)for(var f=0;f<c.length;f++){for(var d=c[f],j=false,g=0;g<h.length;g++){var k=h[g];if(STSHtmlDecode(k.value)===d){j=true;break}}if(!j){var a=document.createElement("OPTION");a.value=SP.Utilities.HttpUtility.htmlEncode(d);a.innerHTML=SP.Utilities.HttpUtility.htmlEncode(d);a.title=d;a.setAttribute("data-refinername",i.n);Search.Configuration.RefinerTab.get_$1C().appendChild(a)}}}};Search.Configuration.RefinerTab.updateCollapseSpecificationOnResultReady=function(j,i){var g=i,d=g.result,a=null;if(!Srch.U.n(d))a=d.ResultTables;if(!Srch.U.n(a)&&a.length>0){for(var b=null,c=0;c<a.length;c++){var e=a[c];if(Srch.U.isTableTypeof(e,Microsoft.SharePoint.Client.Search.Query.KnownTableTypes.refinementResults))b=e}if(!Srch.U.n(b)){var h=b["ResultRows"],f=Search.Configuration.RefinerTab.$4E(h);Search.Configuration.RefinerTab.$3M(Search.Configuration.RefinerTab.get_$E(),f);Search.Configuration.RefinerTab.$3M(Search.Configuration.RefinerTab.get_$L(),f);return}}Search.Configuration.RefinerTab.$16(Search.Configuration.RefinerTab.get_$E());Search.Configuration.RefinerTab.$16(Search.Configuration.RefinerTab.get_$L())};Search.Configuration.RefinerTab.$2k=function(a){return !a.selectedIndex||a.selectedIndex===a.options.length-1};Search.Configuration.RefinerTab.$3F=function(a,b){if(!Search.Configuration.QueryBuilderUtility.isHidden(a))return a;if(!Search.Configuration.QueryBuilderUtility.isHidden(b))return b;return null};Search.Configuration.RefinerTab.switchAdvanced=function(){if(Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.RefinerTab.get_$1S())){Search.Configuration.QueryBuilderUtility.show(Search.Configuration.RefinerTab.get_$1S());Search.Configuration.QueryBuilderUtility.$6(Search.Configuration.RefinerTab.get_$3S(),Srch.Res.qb_TestQueryTab_HideAdvanced)}else{Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.RefinerTab.get_$1S());Search.Configuration.QueryBuilderUtility.$6(Search.Configuration.RefinerTab.get_$3S(),Srch.Res.qb_TestQueryTab_ShowAdvanced)}};Search.Configuration.RefinerTab.prototype={onTabLoad:function(){Search.Configuration.CustomTab.prototype.onTabLoad.call(this);Search.Configuration.QueryBuilder.updateResult();var a=Search.Configuration.QueryBuilder.$0.CollapseSpecification;if(!Srch.U.e(a)&&!SP.ScriptUtility.isNullOrEmptyString(a)){var b=a.trim().split(" ");Search.Configuration.RefinerTab.$3X(b[0],Search.Configuration.RefinerTab.get_$E(),Search.Configuration.RefinerTab.get_$3K(),Search.Configuration.RefinerTab.get_$V());if(b.length===2)Search.Configuration.RefinerTab.$3X(b[1],Search.Configuration.RefinerTab.get_$L(),Search.Configuration.RefinerTab.get_$3L(),Search.Configuration.RefinerTab.get_$j());else{Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.RefinerTab.get_$j());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.RefinerTab.get_$L())}Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.RefinerTab.get_$1S())&&Search.Configuration.RefinerTab.get_$V().selectedIndex&&Search.Configuration.RefinerTab.switchAdvanced()}else if(Search.Configuration.RefinerTab.get_$V().selectedIndex){Search.Configuration.QueryBuilderUtility.show(Search.Configuration.RefinerTab.get_$V());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.RefinerTab.get_$E());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.RefinerTab.get_$1Q());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.RefinerTab.get_$L());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.RefinerTab.get_$j())}else{Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.RefinerTab.get_$V());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.RefinerTab.get_$E());!Search.Configuration.RefinerTab.get_$E().selectedIndex&&Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.RefinerTab.get_$1Q())}}};Search.Configuration.QueryBuilder=function(){};Search.Configuration.QueryBuilder.get_$C=function(){if(!Search.Configuration.QueryBuilder.$1y){var a=previewResult;if(!Srch.U.n(a))Search.Configuration.QueryBuilder.$1y=a.control}return Search.Configuration.QueryBuilder.$1y};Search.Configuration.QueryBuilder.get_$H=function(){if(!Search.Configuration.QueryBuilder.$5){var b=qbConfigData,a=b.value;if(!Srch.U.e(a))Search.Configuration.QueryBuilder.$5=Sys.Serialization.JavaScriptSerializer.deserialize(a)}return Search.Configuration.QueryBuilder.$5};Search.Configuration.QueryBuilder.get_$R=function(){if(!Search.Configuration.QueryBuilder.$19){var d=Search.Configuration.QueryBuilder.get_$H(),a=d.ResultSourceData;if(!Srch.U.n(a)){Search.Configuration.QueryBuilder.$19={};for(var b=0;b<a.length;b++){var c=a[b];Search.Configuration.QueryBuilder.$19[c.Id.toLowerCase()]=c}}}return Search.Configuration.QueryBuilder.$19};Search.Configuration.QueryBuilder.get_$F=function(){if(!Search.Configuration.QueryBuilder.$1L)Search.Configuration.QueryBuilder.$1L=GetClientIdPrefix();return Search.Configuration.QueryBuilder.$1L};Search.Configuration.QueryBuilder.get_$T=function(){if(!Search.Configuration.QueryBuilder.$2a)Search.Configuration.QueryBuilder.$2a=$get("createownquerycontrolblock");return Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryBuilder.$2a)};Search.Configuration.QueryBuilder.get_$1V=function(){if(!Search.Configuration.QueryBuilder.$23)Search.Configuration.QueryBuilder.$23=$get("QueryBox");return Search.Configuration.QueryBuilder.$23.value};Search.Configuration.QueryBuilder.get_$34=function(){var a=Search.Configuration.QueryBuilder.get_$R();return a[Search.Configuration.QueryHelperTab.getCurrentResultSourceId()]};Search.Configuration.QueryBuilder.get_$4c=function(){if(Search.Configuration.QueryBuilder.get_$T()&&!Search.Configuration.QueryBuilderUtility.isHidden($get("filtercontrolblock")))return $get("filterId").value;return ""};Search.Configuration.QueryBuilder.get_$2m=function(){if(!Search.Configuration.QueryBuilder.$1w)Search.Configuration.QueryBuilder.$1w=$get("preview");return Search.Configuration.QueryBuilder.$1w};Search.Configuration.QueryBuilder.get_$2n=function(){if(!Search.Configuration.QueryBuilder.$1z)Search.Configuration.QueryBuilder.$1z=$get("preview-waiting");return Search.Configuration.QueryBuilder.$1z};Search.Configuration.QueryBuilder.get_$2g=function(){if(!Search.Configuration.QueryBuilder.$1j)Search.Configuration.QueryBuilder.$1j=$get("filter-div");return Search.Configuration.QueryBuilder.$1j};Search.Configuration.QueryBuilder.get_$2h=function(){if(!Search.Configuration.QueryBuilder.$1k)Search.Configuration.QueryBuilder.$1k=$get("filter-waiting");return Search.Configuration.QueryBuilder.$1k};Search.Configuration.QueryBuilder.get_$n=function(){if(!Search.Configuration.QueryBuilder.$1p)Search.Configuration.QueryBuilder.$1p=$get("invalidSourceMessage");return Search.Configuration.QueryBuilder.$1p};Search.Configuration.QueryBuilder.launchQueryBuilder=function(j,i,h,n,f,e,d,m,c){var a=Search.Configuration.QueryBuilder.$3D();a.url=SP.Utilities.HttpUtility.urlPathEncode(SP.Utilities.VersionUtility.getLayoutsPageUrl("QueryBuilder.aspx"));a.dialogReturnValueCallback=function(a,b){Search.Configuration.QueryBuilder.onQueryBuilderReturn(a,b,c)};var b={},k=$get(c),l=Search.Configuration.QueryBuilderUtility.parse(k.value);b["QueryBuilderState"]=l;b["QueryBuilderMode"]=m;a.url+="?ListId="+i+"&ID="+h+"&RawUrl="+j;if(!Srch.U.e(f)&&!Srch.U.e(e)&&!Srch.U.e(d))a.url+="&termId="+f+"&termSetId="+e+"&termStoreId="+d;var g=window.location.search.substring(1,window.location.search.length);if(!SP.ScriptUtility.isNullOrEmptyString(g))a.url+="&"+g;a.args=b;var o=SP.UI.ModalDialog.showModalDialog(a)};Search.Configuration.QueryBuilder.launchResultSourceQueryBuilder=function(b,a){Search.Configuration.QueryBuilder.launchCustomQueryBuilder(b,null,Search.Configuration.QueryBuilderMode.toString(2),a)};Search.Configuration.QueryBuilder.launchQueryRuleSubstrateQueryBuilder=function(a,b,c){if(Srch.U.e(a.QueryTemplate))a.QueryTemplate="{searchTerms}";Search.Configuration.QueryBuilder.launchCustomQueryBuilder(a,b,Search.Configuration.QueryBuilderMode.toString(3),c)};Search.Configuration.QueryBuilder.launchQueryRuleResultBlockQueryBuilder=function(c,a,b){Search.Configuration.QueryBuilder.launchCustomQueryBuilder(c,a,Search.Configuration.QueryBuilderMode.toString(4),b)};Search.Configuration.QueryBuilder.launchCustomQueryBuilder=function(d,e,f,c){if(Srch.U.n(d))d=new Search.Configuration.QueryBuilderState;var b={};b["QueryBuilderState"]=d;b["QueryBuilderMode"]=f;if(!Srch.U.n(e))b["QueryBuilderAdditionalFilters"]=e;var a=Search.Configuration.QueryBuilder.$3D();a.url=SP.Utilities.VersionUtility.getLayoutsPageUrl("QueryBuilder.aspx");if(!Srch.U.n(c)&&c.length>0)a.url+="?level="+c;a.dialogReturnValueCallback=Search.Configuration.QueryBuilder.onCreateMyOwnQueryBuilderReturn;a.args=b;var g=SP.UI.ModalDialog.showModalDialog(a)};Search.Configuration.QueryBuilder.cancelDialog=function(){var a=SP.UI.ModalDialog.get_childDialog();a&&a.close(0)};Search.Configuration.QueryBuilder.onQueryBuilderReturn=function(b,c,a){if(b===1){var d=c,e=$get(a);e.value=Search.Configuration.QueryBuilderUtility.stringify(d)}};Search.Configuration.QueryBuilder.onCreateMyOwnQueryBuilderReturn=function(a,b){if(a===1){var c=b;ParseQueryBuilderResult(c)}};Search.Configuration.QueryBuilder.onOKButtonClicked=function(){Search.Configuration.QueryBuilder.$0.QueryTemplate=Search.Configuration.QueryHelperTab.getQueryTemplate();Search.Configuration.QueryBuilder.$0.Filters=Search.Configuration.QueryBuilder.get_$C().get_dataProvider().get_currentQueryState().r;Search.Configuration.QueryBuilder.$4q();if(Search.Configuration.QueryHelperTab.getCurrentResultSourceId().toLowerCase()!=="0".toLowerCase()){var a=Search.Configuration.QueryHelperTab.getCurrentResultSourceData();Search.Configuration.QueryBuilder.$0.SourceId=a.Id;Search.Configuration.QueryBuilder.$0.SourceName=a.Name;Search.Configuration.QueryBuilder.$0.SourceLevel=a.Level}if(Search.Configuration.QueryBuilder.get_$T()){Search.Configuration.QueryBuilder.$0.Sorts=null;Search.Configuration.QueryBuilder.$0.RankModelId=null}SP.UI.ModalDialog.get_childDialog().set_returnValue(Search.Configuration.QueryBuilder.$0);SP.UI.ModalDialog.get_childDialog().close(1)};Search.Configuration.QueryBuilder.$4q=function(){var b=Search.Configuration.QueryHelperTab.getBoundVariableValues();for(var d in b){var a={key:d,value:b[d]},c=Search.Configuration.QueryBuilder.$0.Properties;for(var e in c){var f={key:e,value:c[e]};if(f.key.toLowerCase()===a.key.toLowerCase())delete Search.Configuration.QueryBuilder.$0.Properties[f.key]}if(a.value)Search.Configuration.QueryBuilder.$0.Properties[a.key]=a.value}};Search.Configuration.QueryBuilder.onLoad=function(){EnsureScript("SP.UI.Dialog.js",TypeofFullName("SP.UI.ModalDialog"),Search.Configuration.QueryBuilder.onLoadInternal)};Search.Configuration.QueryBuilder.onLoadInternal=function(){if(SP.ScriptUtility.isNullOrUndefined(SP.UI.ModalDialog.get_childDialog()))return;var $v_0=SP.UI.ModalDialog.get_childDialog().get_args();if($v_0){if(!Srch.U.n($v_0["QueryBuilderCustomLoad"])){eval($v_0["QueryBuilderCustomLoad"]);return}var $v_2=$get("OkButton"),$v_3=$get("CancelButton"),$v_4=$get("cancelcontainer"),$v_5=$get("okcontainer");if(Search.Configuration.QueryBuilder.get_$H().Error){Search.Configuration.QueryBuilderUtility.show($v_4);$v_3.value=$v_2.value;return}Search.Configuration.QueryBuilderUtility.show($v_4);Search.Configuration.QueryBuilderUtility.show($v_5);if(!Srch.U.n($v_0["QueryBuilderMode"]))Search.Configuration.QueryBuilder.$1=$v_0["QueryBuilderMode"];else Search.Configuration.QueryBuilder.$1=Search.Configuration.QueryBuilderMode.toString(0);Search.Configuration.QueryBuilder.$1=Search.Configuration.QueryBuilder.$1.toLowerCase();Search.Configuration.QueryBuilder.$1.toLowerCase()!==Search.Configuration.QueryBuilderMode.toString(0).toLowerCase()&&Search.Configuration.QueryBuilderUtility.hide($get("contextualHelpLink"));if(Search.Configuration.QueryBuilder.$1.toLowerCase()!==Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()&&Search.Configuration.QueryBuilder.$1.toLowerCase()!==Search.Configuration.QueryBuilderMode.toString(4).toLowerCase()){var $v_8=Search.Configuration.QueryBuilderUtility.getClientElementById("searchSourceDropDown");$v_8.remove(0)}if(!Srch.U.n($v_0["QueryBuilderAdditionalFilters"]))Search.Configuration.QueryBuilder.$q=$v_0["QueryBuilderAdditionalFilters"];if(Srch.U.n($v_0["QueryBuilderState"])){SP.UI.ModalDialog.get_childDialog().close(-1);return}Search.Configuration.QueryBuilder.$0=$v_0["QueryBuilderState"];if(Srch.U.n(Search.Configuration.QueryBuilder.$0.Properties))Search.Configuration.QueryBuilder.$0.Properties={};Search.Configuration.QueryBuilder.$4I();Search.Configuration.QueryBuilder.$4u();var $v_6=$get("QueryHelperTab");if(!Srch.U.n($v_6)){Search.Configuration.QueryBuilder.$3O=new Search.Configuration.QueryHelperTab(Srch.Res.qb_Tab_QueryHelper,Search.Configuration.QueryBuilder.$0,$v_6,"BASICS");if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(0).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(1).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(5).toLowerCase())var $v_A=$get("RefinerByTab"),$v_B=new Search.Configuration.RefinerTab(Srch.Res.qb_Tab_FilterBy,$v_A,"REFINERS");if(Search.Configuration.QueryBuilder.$1.toLowerCase()!==Search.Configuration.QueryBuilderMode.toString(1).toLowerCase()){var $v_C=$get("SortByTab");Search.Configuration.QueryBuilder.$3g=new Search.Configuration.SortTab(Srch.Res.qb_Tab_SortBy,$v_C,"SORTING");Search.Configuration.QueryBuilder.$b=$get("SORTING");Search.Configuration.QueryHelperTab.isPredefinedControlsVisible()&&Search.Configuration.QueryBuilder.$2j(Search.Configuration.QueryBuilder.$b)}Search.Configuration.QueryBuilderUtility.show($get("querytypeselection"));var $v_9=Search.Configuration.QueryBuilderUtility.getClientElementById("resultSourceWithQTDropDown");if(!Srch.U.e(Search.Configuration.QueryBuilder.$0.SourceId))if(!Srch.U.n(Search.Configuration.QueryBuilder.$0.Properties["FillIn"])&&Search.Configuration.QueryBuilder.$0.Properties["FillIn"].toString().toLowerCase()==="true")if(Search.Configuration.QueryBuilder.$0.Properties["RecsSourceId"])$v_9.value=Search.Configuration.QueryBuilder.$0.Properties["RecsSourceId"];else $v_9.value="ec675252-14fa-4fbe-84dd-8d098ed74181";else $v_9.value=Search.Configuration.QueryBuilder.$0.SourceId;if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(1).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(2).toLowerCase()){var $v_D=$get("querytypeselection");Srch.U.ensureCSSClassNameNotExist($v_D,"form");Search.Configuration.QueryBuilderUtility.hide($v_D)}if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(4).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(2).toLowerCase()){var $v_E=$get("pdQueryListDiv");Srch.U.ensureCSSClassNameNotExist($v_E,"form");Search.Configuration.QueryBuilderUtility.hide($v_E)}if(Search.Configuration.QueryBuilder.$1.toLowerCase()!==Search.Configuration.QueryBuilderMode.toString(2).toLowerCase()&&Search.Configuration.QueryBuilder.$1.toLowerCase()!==Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()&&Search.Configuration.QueryBuilder.$1.toLowerCase()!==Search.Configuration.QueryBuilderMode.toString(4).toLowerCase()){var $v_F=$get("SettingsTab");Search.Configuration.QueryBuilder.$3Z=new Search.Configuration.SettingsTab(Srch.Res.qb_Tab_Settings,$v_F,"SETTINGS")}}var $v_7=$get("TestQueryTab");Search.Configuration.QueryBuilder.$3j=new Search.Configuration.TestQueryTab(Srch.Res.qb_Tab_TestQuery,$v_7,"TEST")}Search.Configuration.QueryBuilder.get_$C().get_dataProvider().add_queryIssuing(Search.Configuration.QueryBuilder.$4f);Search.Configuration.QueryBuilder.get_$C().get_dataProvider().add_queryIssuing(Search.Configuration.TestQueryTab.queryIssuing);Search.Configuration.QueryBuilder.get_$C().get_dataProvider().add_resultReady(Search.Configuration.RefinerTab.updateCollapseSpecificationOnResultReady);Search.Configuration.QueryBuilder.get_$C().get_dataProvider().add_resultReady(Search.Configuration.TestQueryTab.resultReady);Search.Configuration.QueryBuilder.get_$C().add_resultRendered(Search.Configuration.QueryBuilder.$4d);Search.Configuration.RefinerTab.get_$18().add_resultRendered(Search.Configuration.QueryBuilder.$4i);Search.Configuration.QueryBuilder.get_$T()&&Search.Configuration.QueryBuilder.$3u();var $v_1=Search.Configuration.QueryBuilder.$33();Search.Configuration.QueryBuilder.get_$C().get_dataProvider().set_initialQueryState($v_1);Search.Configuration.TestQueryTab.refreshTemplateVariables(null)};Search.Configuration.QueryBuilder.$4u=function(){if(!Srch.U.n(Search.Configuration.QueryBuilder.$0.SourceId))Search.Configuration.QueryBuilder.$0.SourceId=Search.Configuration.QueryBuilder.$0.SourceId.toLowerCase();if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(0).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(5).toLowerCase()){Search.Configuration.QueryBuilder.$3B();if(Srch.U.n(Search.Configuration.QueryBuilder.$0.SourceId))Search.Configuration.QueryBuilder.$0.SourceId=Search.Configuration.QueryBuilder.get_$H().DefaultResultSourceId;if(!Search.Configuration.QueryBuilder.get_$R()[Search.Configuration.QueryBuilder.$0.SourceId]){Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryBuilder.get_$n());Search.Configuration.QueryBuilder.$0.SourceId="8413cd39-2156-4e00-b54d-11efd9abdb89"}}else if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(1).toLowerCase()){if(Srch.U.n(Search.Configuration.QueryBuilder.$0.SourceId)||!Search.Configuration.QueryBuilder.get_$R()[Search.Configuration.QueryBuilder.$0.SourceId]){Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryBuilder.get_$n());Search.Configuration.QueryBuilder.$0.SourceId="8413cd39-2156-4e00-b54d-11efd9abdb89"}}else if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(4).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()){Search.Configuration.QueryBuilder.$3B();if(Srch.U.e(Search.Configuration.QueryBuilder.$0.SourceId))Search.Configuration.QueryBuilder.$0.SourceId="0";if(Search.Configuration.QueryBuilder.$0.SourceId.toLowerCase()!=="0".toLowerCase()&&!Search.Configuration.QueryBuilder.get_$R()[Search.Configuration.QueryBuilder.$0.SourceId]){Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryBuilder.get_$n());Search.Configuration.QueryBuilder.$0.SourceId="0"}}else if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(2).toLowerCase())if(Srch.U.n(Search.Configuration.QueryBuilder.$0.SourceId)||!Search.Configuration.QueryBuilder.get_$R()[Search.Configuration.QueryBuilder.$0.SourceId])Search.Configuration.QueryBuilder.$0.SourceId="8413cd39-2156-4e00-b54d-11efd9abdb89"};Search.Configuration.QueryBuilder.$4I=function(){var d=[],b=Search.Configuration.QueryBuilder.$0.Properties;for(var c in b){var a={key:c,value:b[c]};if(Srch.U.isInArray(d,a.key.toLowerCase()))delete Search.Configuration.QueryBuilder.$0.Properties[a.key];else Srch.U.appendArray(d,a.key.toLowerCase())}};Search.Configuration.QueryBuilder.$4G=function(a){if(a.toLowerCase()==="tag"||a.toLowerCase()==="recsurl"||a.toLowerCase()==="contenttypeid"||a.toLowerCase()==="scope")return true;return false};Search.Configuration.QueryBuilder.$3u=function(){var f=Search.Configuration.QueryHelperTab.getBoundVariableValues(),e=[],c=f;for(var d in c){var a={key:d,value:c[d]};if(!Srch.U.n(a.value)){var b=new Search.Configuration.QueryTemplateProperty;b.Name=a.key;b.Value=a.value.toString();Srch.U.appendArray(e,b)}}Search.Configuration.TestQueryTab.updateTemplateVariables(e,null)};Search.Configuration.QueryBuilder.$3B=function(){var a=Search.Configuration.QueryBuilder.$0,b=Search.Configuration.QueryBuilder.get_$R();if(!(a.SourceId in b)){if(Srch.U.n(a.SourceName)||Srch.U.n(a.SourceLevel))return;var d=b;for(var e in d){var f={key:e,value:d[e]},c=b[f.key];if(c.Name.toLowerCase()===a.SourceName.toLowerCase()&&c.Level.toLowerCase()===a.SourceLevel.toLowerCase()){a.SourceId=c.Id;break}}}};Search.Configuration.QueryBuilder.$3D=function(){var a=new SP.UI.DialogOptions;a.width=1024;a.height=700;a.autoSize=false;a.showClose=false;return a};Search.Configuration.QueryBuilder.$3p=function(a){Search.Configuration.QueryBuilder.get_$3i()&&a&&Search.Configuration.QueryBuilder.get_$3i().appendChild(a)};Search.Configuration.QueryBuilder.$2j=function(a){if(a&&a.style){Search.Configuration.QueryBuilderUtility.hide(a);Sys.UI.DomElement.removeCssClass(a,"ms-srchnav-item")}};Search.Configuration.QueryBuilder.$4m=function(a){if(a&&a.style){Search.Configuration.QueryBuilderUtility.show(a);Sys.UI.DomElement.addCssClass(a,"ms-srchnav-item")}};Search.Configuration.QueryBuilder.get_$3i=function(){if(!Search.Configuration.QueryBuilder.$2O)Search.Configuration.QueryBuilder.$2O=$get("Tabs");return Search.Configuration.QueryBuilder.$2O};Search.Configuration.QueryBuilder.$4f=function(){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryBuilder.get_$2m());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryBuilder.get_$2n());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryBuilder.get_$2g());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryBuilder.get_$2h())};Search.Configuration.QueryBuilder.$4d=function(){Srch.U.hideElement(previewResult);Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryBuilder.get_$2n());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryBuilder.get_$2m());Srch.U.animateResults(Search.Configuration.QueryBuilder.get_$C(),Search.Configuration.QueryBuilder.get_$C().get_dataProvider().get_userAction())};Search.Configuration.QueryBuilder.$4i=function(){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryBuilder.get_$2h());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryBuilder.get_$2g())};Search.Configuration.QueryBuilder.updateResult=function(){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryBuilder.get_$2m());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryBuilder.get_$2n());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryBuilder.get_$2g());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryBuilder.get_$2h());Search.Configuration.TestQueryTab.clear();Search.Configuration.TestQueryTab.refreshTemplateVariables(Search.Configuration.QueryBuilder.refreshPreview)};Search.Configuration.QueryBuilder.updateResultEvent=function(){Search.Configuration.QueryBuilder.updateResult()};Search.Configuration.QueryBuilder.refreshPreview=function(){var a=Search.Configuration.QueryBuilder.$33();Search.Configuration.QueryBuilder.get_$C().refresh(a)};Search.Configuration.QueryBuilder.$33=function(){var a=Search.Configuration.QueryBuilder.get_$C().get_dataProvider();a.set_queryTemplate(Search.Configuration.QueryHelperTab.getQueryTemplate());a.set_properties({});var f=Search.Configuration.TestQueryTab.getTemplateVariables(),b="",i=f;for(var l in i){var d={key:l,value:i[l]};if(d.key.toLowerCase()==="SearchTerms".toLowerCase()||d.key.toLowerCase()==="SearchBoxQuery".toLowerCase()){if(b!=="")b+=" ";b+=d.value;delete f[d.key]}}if(b&&b.length>=2048)b=b.substring(0,2048);if(b.trim()==="")b=null;var j=f;for(var m in j){var e={key:m,value:j[m]},o=false,k=a.get_properties();for(var n in k){var p={key:n,value:k[n]};if(p.key.toLowerCase()===e.key.toLowerCase()){a.get_properties()[p.key]=e.value;o=true}}if(!o)a.get_properties()[e.key]=e.value}var g=Search.Configuration.TestQueryTab.$4F();if(g&&g.length>0)a.get_properties()["UserSegmentTerms"]=g;a.get_properties()["FillIn"]=Search.Configuration.QueryHelperTab.get_useFillIn()?"true":"false";if(Search.Configuration.QueryBuilder.$1.toUpperCase()!==Search.Configuration.QueryBuilderMode.toString(5).toUpperCase()){a.get_properties()["EnableStacking"]=true;a.set_enableInterleaving(false)}if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(4).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(2).toLowerCase())a.set_enableQueryRules(false);else a.set_enableQueryRules(Search.Configuration.QueryBuilder.$0.EnableQueryRules);a.get_properties()["TryCache"]=true;if(!Srch.U.n(Search.Configuration.QueryBuilder.$5.TokenExpansionData.ListId))a.get_properties()["ListId"]=Search.Configuration.QueryBuilder.$5.TokenExpansionData.ListId;if(!Srch.U.n(Search.Configuration.QueryBuilder.$5.TokenExpansionData.ListItemId))a.get_properties()["ListItemId"]=Search.Configuration.QueryBuilder.$5.TokenExpansionData.ListItemId;if(!Srch.U.n(Search.Configuration.QueryBuilder.$5.TokenExpansionData.TermId))a.get_properties()["TermId"]=Search.Configuration.QueryBuilder.$5.TokenExpansionData.TermId;if(!Srch.U.n(Search.Configuration.QueryBuilder.$5.TokenExpansionData.TermSetId))a.get_properties()["TermSetId"]=Search.Configuration.QueryBuilder.$5.TokenExpansionData.TermSetId;if(!Srch.U.n(Search.Configuration.QueryBuilder.$5.TokenExpansionData.TermStoreId))a.get_properties()["TermStoreId"]=Search.Configuration.QueryBuilder.$5.TokenExpansionData.TermStoreId;a.get_properties()["OverrideExpandedTokens"]=true;a.set_resultsUrl(Search.Configuration.QueryBuilder.get_$H().TokenExpansionData.Url);if(Search.Configuration.QueryBuilder.$0.Properties[Search.Configuration.SettingsTab.$W])a.get_properties()[Search.Configuration.SettingsTab.$W]=true;if(!Srch.U.n(Search.Configuration.QueryBuilder.$0.TrimDuplicates))a.set_trimDuplicates(Search.Configuration.QueryBuilder.$0.TrimDuplicates);else a.set_trimDuplicates(false);if(Search.Configuration.QueryBuilder.get_$T())Search.Configuration.QueryBuilder.$0.Sorts=null;a.set_fallbackSort(Search.Configuration.QueryBuilder.$0.Sorts);a.set_rankRules(Search.Configuration.QueryBuilder.$0.RankRules);var h=Search.Configuration.QueryHelperTab.getCurrentResultSourceId();if(!Srch.U.e(h)&&SP.Guid.isValid(h.toLowerCase()))a.set_sourceID(h);else a.set_sourceID("8413cd39-2156-4e00-b54d-11efd9abdb89");!Srch.U.n(Search.Configuration.QueryBuilder.$0.CollapseSpecification)&&a.set_collapseSpecification(Search.Configuration.QueryBuilder.$0.CollapseSpecification);if(Search.Configuration.QueryBuilder.get_$T())Search.Configuration.QueryBuilder.$0.RankModelId=null;!SP.ScriptUtility.isNullOrUndefined(Search.Configuration.QueryBuilder.$0.RankModelId)&&a.set_fallbackRankingModelID(Search.Configuration.QueryBuilder.$0.RankModelId);var c=new Srch.QueryState;c.k=b;c.o=Search.Configuration.QueryBuilder.$0.Sorts;if(Search.Configuration.QueryBuilder.$0.Filters){c.r=Search.Configuration.QueryBuilderUtility.parse(Search.Configuration.QueryBuilderUtility.stringify(Search.Configuration.QueryBuilder.$0.Filters));Search.Configuration.QueryBuilder.$0.Filters=null}return c};Search.Configuration.TokenExpansionData=function(){};Search.Configuration.TokenExpansionData.prototype={ListId:null,ListItemId:0,TermId:null,TermSetId:null,TermStoreId:null,Url:null};Search.Configuration.QueryTemplateProperty=function(){};Search.Configuration.QueryTemplateProperty.prototype={Name:null,Value:null,NotApplicable:false,IsComplex:false};Search.Configuration.QueryBuilderResultSourceData=function(){};Search.Configuration.QueryBuilderResultSourceData.prototype={Id:null,Name:null,Level:null,QueryTemplate:null,QueryTemplateProperties:null};Search.Configuration.QueryBuilderConfigData=function(){};Search.Configuration.QueryBuilderConfigData.prototype={ResultSourceData:null,DefaultResultSourceId:null,QueryRules:null,Error:false,IsSPFSKU:false,UserHasAdminRights:false,TokenExpansionData:null};Search.Configuration.QueryBuilderState=function(){};Search.Configuration.QueryBuilderState.prototype={Filters:null,SourceId:null,SourceName:null,SourceLevel:null,Async:false,RankModelId:null,ClientType:null,Sorts:null,Properties:null,CollapseSpecification:null,RankRules:null,QueryTemplate:null,EnableQueryRules:false,TrimDuplicates:false};Search.Configuration.QueryHelperTab=function(b,d,c,a){Search.Configuration.QueryHelperTab.initializeBase(this,[b,c,a]);Search.Configuration.QueryHelperTab.$X=true;this.onTabClick(null);Search.Configuration.QueryHelperTab.$3v();Search.Configuration.QueryHelperTab.$X=false;this.$8_2.focus()};Search.Configuration.QueryHelperTab.get_$3J=function(){if(!Search.Configuration.QueryHelperTab.$1q)Search.Configuration.QueryHelperTab.$1q=$get("noFillin");return Search.Configuration.QueryHelperTab.$1q};Search.Configuration.QueryHelperTab.get_$10=function(){if(!Search.Configuration.QueryHelperTab.$1h)Search.Configuration.QueryHelperTab.$1h=$get("fillInId");return Search.Configuration.QueryHelperTab.$1h};Search.Configuration.QueryHelperTab.get_$l=function(){if(!Search.Configuration.QueryHelperTab.$1i)Search.Configuration.QueryHelperTab.$1i=Search.Configuration.QueryBuilderUtility.getClientElementById("fillInSourceDropDown");return Search.Configuration.QueryHelperTab.$1i};Search.Configuration.QueryHelperTab.get_$K=function(){if(!Search.Configuration.QueryHelperTab.$1u)Search.Configuration.QueryHelperTab.$1u=$get("PathSelectionList");return Search.Configuration.QueryHelperTab.$1u};Search.Configuration.QueryHelperTab.get_$3m=function(){if(!Search.Configuration.QueryHelperTab.$2Y)Search.Configuration.QueryHelperTab.$2Y=$get("useTag");return Search.Configuration.QueryHelperTab.$2Y};Search.Configuration.QueryHelperTab.get_$3n=function(){if(!Search.Configuration.QueryHelperTab.$2Z)Search.Configuration.QueryHelperTab.$2Z=$get("useTopic");return Search.Configuration.QueryHelperTab.$2Z};Search.Configuration.QueryHelperTab.get_$3l=function(){if(!Search.Configuration.QueryHelperTab.$2X)Search.Configuration.QueryHelperTab.$2X=$get("useSubTopic");return Search.Configuration.QueryHelperTab.$2X};Search.Configuration.QueryHelperTab.get_$4e=function(){if(!Search.Configuration.QueryHelperTab.$22)Search.Configuration.QueryHelperTab.$22=propertyValueId;return Search.Configuration.QueryHelperTab.$22};Search.Configuration.QueryHelperTab.get_$7=function(){if(!Search.Configuration.QueryHelperTab.$20)Search.Configuration.QueryHelperTab.$20=propertyAllContentTypeList;return Search.Configuration.QueryHelperTab.$20};Search.Configuration.QueryHelperTab.get_$4=function(){if(!Search.Configuration.QueryHelperTab.$21)Search.Configuration.QueryHelperTab.$21=propertyCommonContentTypeList;return Search.Configuration.QueryHelperTab.$21};Search.Configuration.QueryHelperTab.get_$2f=function(){if(!Search.Configuration.QueryHelperTab.$1W)Search.Configuration.QueryHelperTab.$1W=$get("customQueryLink");return Search.Configuration.QueryHelperTab.$1W};Search.Configuration.QueryHelperTab.get_$2l=function(){if(!Search.Configuration.QueryHelperTab.$1v)Search.Configuration.QueryHelperTab.$1v=$get("predefinedLink");return Search.Configuration.QueryHelperTab.$1v};Search.Configuration.QueryHelperTab.changePredefinedQueryResultSource=function(){!Search.Configuration.QueryHelperTab.$X&&Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryBuilder.get_$n());Search.Configuration.QueryHelperTab.$2v(Search.Configuration.QueryBuilder.$0);Search.Configuration.QueryHelperTab.$1o();Search.Configuration.QueryHelperTab.$3a();Search.Configuration.QueryHelperTab.$1F()};Search.Configuration.QueryHelperTab.changeCYOQueryResultSource=function(){!Search.Configuration.QueryHelperTab.$X&&Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryBuilder.get_$n())};Search.Configuration.QueryHelperTab.onSelectPredefinedQuery=function(){!Search.Configuration.QueryHelperTab.$X&&Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryBuilder.get_$n());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$2l());Search.Configuration.QueryBuilderUtility.hide($get("SORTING"));Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.get_$2f());!Srch.U.n(Search.Configuration.QueryBuilder.$b)&&Search.Configuration.QueryBuilder.$2j(Search.Configuration.QueryBuilder.$b);Search.Configuration.QueryHelperTab.$1o();Search.Configuration.QueryHelperTab.$3G();Search.Configuration.QueryHelperTab.$3a();Search.Configuration.QueryBuilder.$0.RankRules=null;Search.Configuration.QueryHelperTab.$2v(Search.Configuration.QueryBuilder.$0);Search.Configuration.QueryHelperTab.$1F()};Search.Configuration.QueryHelperTab.onSelectCustomQuery=function(){!Search.Configuration.QueryHelperTab.$X&&Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryBuilder.get_$n());!Srch.U.n(Search.Configuration.QueryBuilder.$b)&&Search.Configuration.QueryBuilder.$4m(Search.Configuration.QueryBuilder.$b);Search.Configuration.QueryHelperTab.$1o();Search.Configuration.QueryBuilderUtility.hide($get("fullquery"));Search.Configuration.QueryBuilderUtility.hide($get("searchSourceQTDiv"));Search.Configuration.QueryBuilderUtility.show($get("createownquerycontrolblock"));if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(4).toLowerCase()){Search.Configuration.QueryBuilderUtility.hide($get("searchSourceDiv"));Search.Configuration.QueryBuilderUtility.show($get("queryRulesSearchSourceDiv"))}else{Search.Configuration.QueryBuilderUtility.hide($get("queryRulesSearchSourceDiv"));Search.Configuration.QueryBuilderUtility.show($get("searchSourceDiv"))}Search.Configuration.QueryHelperTab.$2v(Search.Configuration.QueryBuilder.$0);Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.get_$2l());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$2f());Search.Configuration.SortTab.setSortByAvailable();if(!Search.Configuration.QueryHelperTab.$X){Search.Configuration.SortTab.setSortsOnQBState();Search.Configuration.SortTab.refreshXRank();$get("QueryBox").value=Search.Configuration.TestQueryTab.get_$2p().value}Search.Configuration.QueryHelperTab.$1F()};Search.Configuration.QueryHelperTab.$1F=function(){!Search.Configuration.QueryHelperTab.$X&&Search.Configuration.QueryBuilder.updateResult()};Search.Configuration.QueryHelperTab.$4a=function(){Search.Configuration.QueryHelperTab.$N=$get("QueryBox");if(!Srch.U.n(Search.Configuration.QueryBuilder.$0.QueryTemplate))Search.Configuration.QueryHelperTab.$N.value=Search.Configuration.QueryBuilder.$0.QueryTemplate;Search.Configuration.QueryHelperTab.$J=$get("manualtextinput");Search.Configuration.QueryHelperTab.$M=Search.Configuration.QueryHelperTab.get_$4e();Search.Configuration.QueryHelperTab.$M.selectedIndex=0;Search.Configuration.QueryHelperTab.$M.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(Search.Configuration.QueryHelperTab.$2G,Search.Configuration.QueryHelperTab.$2G));Srch.U.addHandler(Search.Configuration.QueryHelperTab.$M,"change",Search.Configuration.QueryHelperTab.$4W);Search.Configuration.QueryHelperTab.$d=Search.Configuration.QueryBuilderUtility.getClientElementById("allqueryable");Srch.U.addHandler(Search.Configuration.QueryHelperTab.$d,"change",Search.Configuration.QueryHelperTab.$4K);Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.$d);var c=":";Search.Configuration.QueryHelperTab.$B=$get("operatorValueId");Search.Configuration.QueryHelperTab.$B.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("=",Srch.Res.qb_token_Equals));Search.Configuration.QueryHelperTab.$B.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("=...*",Srch.Res.qb_token_StartsWith));Search.Configuration.QueryHelperTab.$B.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(c,Srch.Res.qb_token_Contains));Search.Configuration.QueryHelperTab.$B.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(":...*",Srch.Res.qb_token_ContainsStartsWith));Search.Configuration.QueryHelperTab.$B.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("<",Srch.Res.qb_token_LessThan));Search.Configuration.QueryHelperTab.$B.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(">",Srch.Res.qb_token_GreaterThan));Search.Configuration.QueryHelperTab.$B.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("<>",Srch.Res.qb_token_NotEquals));Search.Configuration.QueryHelperTab.$B.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("-VALUE"+c,Srch.Res.qb_token_NotContains));Search.Configuration.QueryHelperTab.$B.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("-VALUE=...*",Srch.Res.qb_token_NotStartsWith));Search.Configuration.QueryHelperTab.$B.value=c;Search.Configuration.QueryHelperTab.$3=$get("dynamicValueId");Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(Search.Configuration.QueryHelperTab.$2F,Search.Configuration.QueryHelperTab.$2F));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(Search.Configuration.QueryHelperTab.$s,Search.Configuration.QueryHelperTab.$s));if(!Srch.U.n(Search.Configuration.QueryBuilder.$q)){var d=Search.Configuration.QueryBuilder.$q;for(var f in d){var a={key:f,value:d[f]};!Srch.U.n(a.key)&&!Srch.U.n(a.value)&&Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{"+a.key.toString()+"}",a.value.toString()))}}Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{SiteCollection.URL}",Srch.Res.qb_token_SiteColletion));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{Site.URL}",Srch.Res.qb_token_Site));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{Page.URL}",Srch.Res.qb_token_Page));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{Term.Id}",Srch.Res.qb_token_Topic));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{Term.IdWithChildren}",Srch.Res.qb_token_TopicIdWithChildren));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{User.Name}",Srch.Res.qb_token_UserName));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{User.PreferredContentLanguage}",Srch.Res.qb_token_PreferredContentLanguage));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{Today-5}",Srch.Res.qb_token_Date));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{QueryString.MyParameter1}",Srch.Res.qb_token_QueryString));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{URLToken.1}",Srch.Res.qb_token_URLToken));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{Page.MyField1}",Srch.Res.qb_token_PageField));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{Site.Locale}",Srch.Res.qb_token_SiteLocale));Search.Configuration.QueryHelperTab.$3.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{CurrentDisplayLanguage}",Srch.Res.qb_token_DisplayLanguage));Srch.U.addHandler(Search.Configuration.QueryHelperTab.$3,"change",Search.Configuration.QueryHelperTab.$15);Search.Configuration.QueryHelperTab.$15(null);Srch.U.addHandler(Search.Configuration.QueryHelperTab.get_$4(),"change",Search.Configuration.QueryHelperTab.$1t);Srch.U.addHandler(Search.Configuration.QueryHelperTab.get_$7(),"change",Search.Configuration.QueryHelperTab.$1t);Search.Configuration.QueryHelperTab.$A=$get("dynamicKeywordValueId");if(!Srch.U.n(Search.Configuration.QueryBuilder.$q)){var e=Search.Configuration.QueryBuilder.$q;for(var g in e){var b={key:g,value:e[g]};!Srch.U.n(b.key)&&!Srch.U.n(b.value)&&Search.Configuration.QueryHelperTab.$A.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{"+b.key.toString()+"}",b.value.toString()))}}(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(4).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(2).toLowerCase())&&Search.Configuration.QueryHelperTab.$A.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{searchTerms}",Srch.Res.qb_token_SearchTerms));Search.Configuration.QueryHelperTab.$A.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{SearchBoxQuery}",Srch.Res.qb_token_SearchBoxQuery));Search.Configuration.QueryHelperTab.$A.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{User.Name}",Srch.Res.qb_token_UserName));Search.Configuration.QueryHelperTab.$A.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{QueryString.MyParameter1}",Srch.Res.qb_token_QueryString));Search.Configuration.QueryHelperTab.$A.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{URLToken.1}",Srch.Res.qb_token_URLToken));Search.Configuration.QueryHelperTab.$A.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("{Page.MyField1}",Srch.Res.qb_token_PageField));Search.Configuration.QueryHelperTab.$A.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("contentclass:STS_Web",Srch.Res.qb_token_OnlySites));Search.Configuration.QueryHelperTab.$A.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("(contentclass:STS_List OR contentclass:STS_List_DocumentLibrary)",Srch.Res.qb_token_OnlyLists));Search.Configuration.QueryHelperTab.$A.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("(contentclass:STS_ListItem OR IsDocument:True)",Srch.Res.qb_token_OnlyListItems))};Search.Configuration.QueryHelperTab.$3v=function(){Search.Configuration.QueryHelperTab.createPathControl();Search.Configuration.QueryHelperTab.createRecommendationPathControl();Search.Configuration.QueryHelperTab.createContentTypeControl();Search.Configuration.QueryHelperTab.$3w();Search.Configuration.QueryHelperTab.$4a();Search.Configuration.QueryHelperTab.$1o();Search.Configuration.QueryHelperTab.$3G();var a=Search.Configuration.QueryBuilder.$0.SourceId;if(!Srch.U.n(Search.Configuration.QueryBuilder.$0.Properties["FillIn"])&&Search.Configuration.QueryBuilder.$0.Properties["FillIn"].toString().toLowerCase()==="true")if(!Srch.U.n(Search.Configuration.QueryBuilder.$0.Properties["RecsSourceId"]))a=Search.Configuration.QueryBuilder.$0.Properties["RecsSourceId"];else a="ec675252-14fa-4fbe-84dd-8d098ed74181";Search.Configuration.QueryHelperTab.$3b(Search.Configuration.QueryBuilder.get_$R()[a]);if(Search.Configuration.QueryHelperTab.isPredefinedControlsVisible()){var c=Search.Configuration.QueryBuilderUtility.getClientElementById("resultSourceWithQTDropDown");c.value=a;Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.get_$2f());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$2l());!Srch.U.n(Search.Configuration.QueryBuilder.$b)&&Search.Configuration.QueryBuilder.$2j(Search.Configuration.QueryBuilder.$b);Search.Configuration.QueryHelperTab.$1F()}else{var b;if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(4).toLowerCase())b=Search.Configuration.QueryBuilderUtility.getClientElementById("queryRulesSearchSourceDropDown");else b=Search.Configuration.QueryBuilderUtility.getClientElementById("searchSourceDropDown");b.value=a;Search.Configuration.QueryHelperTab.onSelectCustomQuery()}};Search.Configuration.QueryHelperTab.$3a=function(){var a=Search.Configuration.QueryHelperTab.getCurrentResultSourceData();Search.Configuration.QueryHelperTab.$3b(a)};Search.Configuration.QueryHelperTab.$1o=function(){Search.Configuration.QueryBuilderUtility.hide($get("recscontrolblock"));Search.Configuration.QueryBuilderUtility.hide($get("fillincontrolblock"));Search.Configuration.QueryBuilderUtility.hide($get("tagcontrolblock"));Search.Configuration.QueryBuilderUtility.hide($get("pathcontrolblock"));Search.Configuration.QueryBuilderUtility.hide($get("contentcontrolblock"));Search.Configuration.QueryBuilderUtility.hide($get("filtercontrolblock"))};Search.Configuration.QueryHelperTab.$3G=function(){Search.Configuration.QueryBuilderUtility.hide($get("createownquerycontrolblock"));Search.Configuration.QueryBuilderUtility.hide($get("searchSourceDiv"));Search.Configuration.QueryBuilderUtility.hide($get("queryRulesSearchSourceDiv"));Search.Configuration.QueryBuilderUtility.show($get("fullquery"));Search.Configuration.QueryBuilderUtility.show($get("searchSourceQTDiv"))};Search.Configuration.QueryHelperTab.$3b=function(c){if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(4).toLowerCase())return;if(c&&!Srch.U.n(c.QueryTemplateProperties))for(var d=c.QueryTemplateProperties,b=0;b<d.length;b++){var e=d[b],a=e.Name;if(a.toLowerCase()==="RecsURL".toLowerCase()){Search.Configuration.QueryBuilderUtility.show($get("recscontrolblock"));Search.Configuration.QueryBuilder.$1.toLowerCase()!==Search.Configuration.QueryBuilderMode.toString(2).toLowerCase()&&Search.Configuration.QueryBuilder.$1.toLowerCase()!==Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()&&Search.Configuration.QueryBuilder.$1.toLowerCase()!==Search.Configuration.QueryBuilderMode.toString(4).toLowerCase()&&Search.Configuration.QueryBuilderUtility.show($get("fillincontrolblock"))}else if(a.toLowerCase()==="Tag".toLowerCase())!Search.Configuration.QueryBuilder.get_$H().IsSPFSKU&&Search.Configuration.QueryBuilderUtility.show($get("tagcontrolblock"));else if(a.toLowerCase()==="Scope".toLowerCase())Search.Configuration.QueryBuilderUtility.show($get("pathcontrolblock"));else if(a.toLowerCase()==="ContentTypeId".toLowerCase())Search.Configuration.QueryBuilderUtility.show($get("contentcontrolblock"));else a.toLowerCase()==="searchTerms".toLowerCase()&&Search.Configuration.QueryBuilderUtility.show($get("filtercontrolblock"))}};Search.Configuration.QueryHelperTab.isPredefinedControlsVisible=function(){if(!Search.Configuration.QueryBuilderUtility.isHidden($get("recscontrolblock"))||!Search.Configuration.QueryBuilderUtility.isHidden($get("tagcontrolblock"))||!Search.Configuration.QueryBuilderUtility.isHidden($get("pathcontrolblock"))||!Search.Configuration.QueryBuilderUtility.isHidden($get("contentcontrolblock")))return true;return false};Search.Configuration.QueryHelperTab.getCurrentResultSourceId=function(){if(Search.Configuration.QueryHelperTab.get_$10().checked&&!Search.Configuration.QueryBuilderUtility.isHidden($get("recscontrolblock")))return Search.Configuration.QueryHelperTab.get_$l().value;else{var a;if(Search.Configuration.QueryBuilder.get_$T())a=Search.Configuration.QueryBuilderUtility.getClientElementById("resultSourceWithQTDropDown");else if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(4).toLowerCase())a=Search.Configuration.QueryBuilderUtility.getClientElementById("queryRulesSearchSourceDropDown");else a=Search.Configuration.QueryBuilderUtility.getClientElementById("searchSourceDropDown");if(a.selectedIndex===-1)a.selectedIndex=0;return a.value}};Search.Configuration.QueryHelperTab.getCurrentResultSourceData=function(){var b=Search.Configuration.QueryBuilder.get_$R(),a=Search.Configuration.QueryHelperTab.getCurrentResultSourceId();if(a.toLowerCase()==="0".toLowerCase())a="8413cd39-2156-4e00-b54d-11efd9abdb89";return b[a]};Search.Configuration.QueryHelperTab.$2v=function(b){var a=Search.Configuration.QueryHelperTab.getCurrentResultSourceData();b.SourceId=a.Id;b.SourceName=a.Name;b.SourceLevel=a.Level};Search.Configuration.QueryHelperTab.createRecommendationPathControl=function(){var a=Search.Configuration.QueryBuilder.$0.Properties;Search.Configuration.QueryHelperTab.$4b();Search.Configuration.QueryHelperTab.$D=$get("RecsSelectionList");Search.Configuration.QueryHelperTab.$D.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("RecsPage",Srch.Res.qb_path_Page));Search.Configuration.QueryHelperTab.$D.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("RecsURLToken",Srch.Res.qb_path_URL_token));Search.Configuration.QueryHelperTab.$D.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("RecsURL",Srch.Res.qb_path_URL));Srch.U.addHandler(Search.Configuration.QueryHelperTab.$D,"change",Search.Configuration.QueryHelperTab.$3V);if(Srch.U.n(a)||Srch.U.n(a["RecsURL"]))Search.Configuration.QueryHelperTab.$D.value="RecsURL";if(!Srch.U.n(a)){if(!Srch.U.n(a["RecsURL"])){var b=a["RecsURL"];if(b.toLowerCase()==="{page}")Search.Configuration.QueryHelperTab.$D.value="RecsPage";else if(b.toLowerCase().startsWith("{urltoken.")){Search.Configuration.QueryHelperTab.$D.value="RecsURLToken";Search.Configuration.QueryHelperTab.$u.value=b}else{Search.Configuration.QueryHelperTab.$D.value="RecsURL";var d=$get(Search.Configuration.QueryHelperTab.$D.value),c=Search.Configuration.QueryBuilderUtility.getFirstChild(d);if(!SP.ScriptUtility.isNullOrUndefined(c.value))c.value=b}}Srch.U.addHandler(Search.Configuration.QueryHelperTab.get_$3J(),"click",Search.Configuration.QueryHelperTab.onFillInOptionChanged);Srch.U.addHandler(Search.Configuration.QueryHelperTab.get_$10(),"click",Search.Configuration.QueryHelperTab.onFillInOptionChanged);if(!Srch.U.n(Search.Configuration.QueryBuilder.$0.Properties["FillIn"])&&Search.Configuration.QueryBuilder.$0.Properties["FillIn"].toString().toLowerCase()==="true"){Search.Configuration.QueryHelperTab.get_$10().checked=true;Search.Configuration.QueryHelperTab.get_$l().value=Search.Configuration.QueryBuilder.$0.SourceId;Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.get_$l())}else{Search.Configuration.QueryHelperTab.get_$3J().checked=true;Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$l());Search.Configuration.QueryHelperTab.get_$l().value="97c71db1-58ce-4891-8b64-585bc2326c12"}}Search.Configuration.QueryHelperTab.$3V(null)};Search.Configuration.QueryHelperTab.onFillInOptionChanged=function(){if(Search.Configuration.QueryHelperTab.get_$10().checked)Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.get_$l());else Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$l())};Search.Configuration.QueryHelperTab.$3V=function(){Search.Configuration.QueryHelperTab.$12&&Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.$12);var a=$get(Search.Configuration.QueryHelperTab.$D.value);if(a){Search.Configuration.QueryBuilderUtility.show(a);Search.Configuration.QueryHelperTab.$12=a}};Search.Configuration.QueryHelperTab.$4b=function(){var d="{URLToken.",j="} (";Search.Configuration.QueryHelperTab.$u=$get("RecsURLTokenSelection");for(var e="",f=window.location.search.substring(1,window.location.search.length).split("&"),b=0;b<f.length;b++){var i=f[b].split("=");if(i[0].toLowerCase()==="rawurl")e=i[1]}for(var k=decodeURIComponent(e),g=k.split("/"),h=1,c=g.length-1;c>=0;c--){var a=g[c];if(a.indexOf("?")>-1)a=a.substring(0,a.indexOf("?"));if(!SP.ScriptUtility.isNullOrEmptyString(a)){var l=d+h+"}";Search.Configuration.QueryHelperTab.$u.appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue(l,d+h+++j+a+")"))}}};Search.Configuration.QueryHelperTab.getValueFromRecommendationControl=function(){var d={},a="",b=Search.Configuration.QueryHelperTab.$D.value;if(b==="RecsPage")a="{Page}";else if(b==="RecsURL"&&!Srch.U.n(Search.Configuration.QueryHelperTab.$12)){var c=$get("RecsURLInput");if(!SP.ScriptUtility.isNullOrUndefined(c.value)){a=c.value;if(!Srch.U.n(a)){a=a.trim();if(!Srch.U.e(a)){if(!a.startsWith('"'))a='"'+a;if(!a.endsWith('"'))a=a+'"'}}}}else if(b==="RecsURLToken")if(!SP.ScriptUtility.isNullOrUndefined(Search.Configuration.QueryHelperTab.$u.value))a=Search.Configuration.QueryHelperTab.$u.value;return a};Search.Configuration.QueryHelperTab.getBoundVariableValues=function(){var a={};if(Search.Configuration.QueryBuilder.get_$T()){a["RecsURL"]=null;a["RecsSourceId"]=null;a["FillIn"]="false";a["Tag"]=null;a["Scope"]=null;a["ContentTypeId"]=null;if(!Search.Configuration.QueryBuilderUtility.isHidden($get("recscontrolblock"))){var c=Search.Configuration.QueryHelperTab.getValueFromRecommendationControl();if(!Srch.U.n(c))a["RecsURL"]=c}if(!Search.Configuration.QueryBuilderUtility.isHidden($get("fillincontrolblock")))if(Search.Configuration.QueryHelperTab.get_useFillIn()){a["FillIn"]="true";var f=Search.Configuration.QueryBuilderUtility.getClientElementById("resultSourceWithQTDropDown");a["RecsSourceId"]=f.value}if(!Search.Configuration.QueryBuilderUtility.isHidden($get("tagcontrolblock"))){var d=Search.Configuration.QueryHelperTab.getValueFromTagControl();if(!Srch.U.n(d))a["Tag"]=d}if(!Search.Configuration.QueryBuilderUtility.isHidden($get("pathcontrolblock"))){var e=Search.Configuration.QueryHelperTab.getValueFromPathControl();if(!Srch.U.n(e))a["Scope"]=e}if(!Search.Configuration.QueryBuilderUtility.isHidden($get("contentcontrolblock"))){var b="";if(Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.get_$G()))b=Search.Configuration.QueryHelperTab.get_$x().value;else b=Search.Configuration.QueryHelperTab.get_$G().value;if(!Srch.U.w(b))a["ContentTypeId"]=b}}return a};Search.Configuration.QueryHelperTab.getQueryTemplate=function(){if(Search.Configuration.QueryBuilder.get_$T()){if(!Search.Configuration.QueryBuilderUtility.isHidden($get("filtercontrolblock")))return Search.Configuration.QueryBuilder.get_$4c()}else return Search.Configuration.QueryBuilder.get_$1V();return null};Search.Configuration.QueryHelperTab.get_useFillIn=function(){if(Search.Configuration.QueryHelperTab.get_$10().checked&&!Search.Configuration.QueryBuilderUtility.isHidden($get("fillincontrolblock")))return true;return false};Search.Configuration.QueryHelperTab.$3w=function(){var a=$get("filterId");a.value=Search.Configuration.QueryBuilder.$0.QueryTemplate};Search.Configuration.QueryHelperTab.createPathControl=function(){Search.Configuration.QueryHelperTab.get_$K().appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("PathSiteCollection",Srch.Res.qb_path_SiteCollection));Search.Configuration.QueryHelperTab.get_$K().appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("PathSite",Srch.Res.qb_path_Site));Search.Configuration.QueryHelperTab.get_$K().appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("PathURL",Srch.Res.qb_path_URL));Search.Configuration.QueryHelperTab.get_$K().appendChild(Search.Configuration.QueryBuilderUtility.addDynamicValue("PathNone",Srch.Res.qb_path_None));Srch.U.addHandler(Search.Configuration.QueryHelperTab.get_$K(),"change",Search.Configuration.QueryHelperTab.$3T);Search.Configuration.QueryHelperTab.get_$K().value="PathNone";var e=Search.Configuration.QueryBuilder.$0.Properties;if(!Srch.U.n(e)){var c=e["Scope"];if(!Srch.U.n(c))if(c.toLowerCase()==="{sitecollection.url}")Search.Configuration.QueryHelperTab.get_$K().value="PathSiteCollection";else if(c.toLowerCase()==="{site.url}")Search.Configuration.QueryHelperTab.get_$K().value="PathSite";else{Search.Configuration.QueryHelperTab.get_$K().value="PathURL";var g=$get(Search.Configuration.QueryHelperTab.get_$K().value),f=Search.Configuration.QueryBuilderUtility.getFirstChild(g);if(!SP.ScriptUtility.isNullOrUndefined(f.value))f.value=c}if(!Search.Configuration.QueryBuilder.get_$H().IsSPFSKU){var b=e["Tag"];if(!Srch.U.n(b))if(b.toLowerCase()==="{term}")Search.Configuration.QueryHelperTab.get_$3n().checked=true;else if(b.toLowerCase()==="{term.idwithchildren}")Search.Configuration.QueryHelperTab.get_$3l().checked=true;else Search.Configuration.QueryHelperTab.get_$3m().checked=true;var a=$get("keywordControl");if(a){a.Lcid=SP.PageContextInfo.get_currentLanguage();a.InputFieldId="keywordControlHiddenInput";a.TermSetId="00000000-0000-0000-0000-000000000000";a.AnchorId="00000000-0000-0000-0000-000000000000";a.FieldName="Tags";a.SspId="00000000-0000-0000-0000-000000000000";a.IsMulti=false;a.IsSpanTermSets=true;a.IsSpanTermStores=true;a.IsAddTerms=false;a.IsIgnoreFormatting=false;a.IsIncludeDeprecated=true;a.IsIncludePathData=false;a.IsIncludeUnavailable=true;a.IsUseCommaAsDelimiter=false;a.IsIncludeTermSetName=false;a.ExcludeKeyword=false;var h=Srch.ScriptApplicationManager.get_clientRuntimeContext(),d=h.get_url();if(!d.endsWith("/"))d+="/";d+="_vti_bin/TaxonomyInternalService.json";a.WebServiceUrl=d;RegisterSodDep("ScriptForWebTaggingUI.js","sp.js");RegisterSodDep("ScriptForWebTaggingUI.js","sp.ui.rte.js");EnsureScript("ScriptForWebTaggingUI.js",TypeofFullName("Microsoft.SharePoint.Taxonomy.ScriptForWebTaggingUI"),function(){Microsoft.SharePoint.Taxonomy.ScriptForWebTaggingUI.onLoad("keywordControl");Search.Configuration.QueryHelperTab.$w=new Microsoft.SharePoint.Taxonomy.ControlObject(a);!Srch.U.n(b)&&b.toLowerCase()!=="{term}"&&b.toLowerCase()!=="{term.idwithchildren}"&&Search.Configuration.QueryHelperTab.$3o(b)})}}}Search.Configuration.QueryHelperTab.$3T(null)};Search.Configuration.QueryHelperTab.$3T=function(){Search.Configuration.QueryHelperTab.$14&&Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.$14);var a=$get(Search.Configuration.QueryHelperTab.get_$K().value);if(a){Search.Configuration.QueryBuilderUtility.show(a);Search.Configuration.QueryHelperTab.$14=a}else Search.Configuration.QueryHelperTab.$1F()};Search.Configuration.QueryHelperTab.getValueFromPathControl=function(){var a=null,b=Search.Configuration.QueryHelperTab.get_$K().value;if(b==="PathSiteCollection")a="{SiteCollection.URL}";else if(b==="PathSite")a="{Site.URL}";else if(b==="PathURL"&&!Srch.U.n(Search.Configuration.QueryHelperTab.$14)){var c=$get("PathURLInput");if(!SP.ScriptUtility.isNullOrUndefined(c.value)){a=c.value;if(!a.startsWith('"'))a='"'+a;if(!a.endsWith('"'))a=a+'"'}}return a};Search.Configuration.QueryHelperTab.getValueFromTagControl=function(){if(Search.Configuration.QueryHelperTab.get_$3m().checked){var a=null;if(Srch.U.n(Search.Configuration.QueryHelperTab.$w))return Search.Configuration.QueryBuilder.$0.Properties["Tag"];a=Search.Configuration.QueryHelperTab.$w.getRawText();if(!a)return null;var b=a.substring(a.lastIndexOf("|")+1,a.length);if(b===SP.Guid.get_empty().toString())return null;a="#0"+a.substring(a.lastIndexOf("|")+1,a.length+1)+"*";return a}else if(Search.Configuration.QueryHelperTab.get_$3n().checked)return "{Term}";else if(Search.Configuration.QueryHelperTab.get_$3l().checked)return "{Term.IDWithChildren}";else return null};Search.Configuration.QueryHelperTab.$3o=function(a){if(a.startsWith("#0"))a=a.substr(2);if(a.endsWith("*"))a=a.substr(0,a.length-1);Search.Configuration.QueryHelperTab.$w.addTerm(a,a);Search.Configuration.QueryHelperTab.$w.startupValidation()};Search.Configuration.QueryHelperTab.get_$G=function(){if(!Search.Configuration.QueryHelperTab.$1T)Search.Configuration.QueryHelperTab.$1T=commonContentTypesSelect;return Search.Configuration.QueryHelperTab.$1T};Search.Configuration.QueryHelperTab.get_$x=function(){if(!Search.Configuration.QueryHelperTab.$1I)Search.Configuration.QueryHelperTab.$1I=allContentTypesSelect;return Search.Configuration.QueryHelperTab.$1I};Search.Configuration.QueryHelperTab.createContentTypeControl=function(){Srch.U.addHandler(Search.Configuration.QueryHelperTab.get_$G(),"change",Search.Configuration.QueryBuilder.updateResultEvent);Srch.U.addHandler(Search.Configuration.QueryHelperTab.get_$x(),"change",Search.Configuration.QueryBuilder.updateResultEvent);Srch.U.addHandler(Search.Configuration.QueryHelperTab.get_$G(),"change",Search.Configuration.QueryHelperTab.contentTypeShowHide);var c=Search.Configuration.QueryBuilder.$0.Properties;if(!Srch.U.n(c)){var a=c["ContentTypeId"];if(!Srch.U.n(a)){for(var d=false,b=0;b<Search.Configuration.QueryHelperTab.get_$G().children.length;b++)if(a.toLowerCase()===Search.Configuration.QueryHelperTab.get_$G().children[b].value.toLowerCase())d=true;if(d)Search.Configuration.QueryHelperTab.get_$G().value=a;else{Search.Configuration.QueryHelperTab.get_$G().selectedIndex=Search.Configuration.QueryHelperTab.get_$G().children.length-1;Search.Configuration.QueryHelperTab.contentTypeShowHide(null);Search.Configuration.QueryHelperTab.get_$x().value=a}}}};Search.Configuration.QueryHelperTab.$4W=function(){if(Search.Configuration.QueryHelperTab.$M.value===Search.Configuration.QueryHelperTab.$2G){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.$M);Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.$d);Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$4());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$7());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.$3);Search.Configuration.QueryHelperTab.$15(null)}else if(Search.Configuration.QueryHelperTab.$M.value===Search.Configuration.QueryHelperTab.$2r){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.$3);Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$7());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.get_$4());Search.Configuration.QueryHelperTab.$1t(null)}else if(!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.get_$4())||!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.get_$7())){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$4());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$7());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.$M);Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.$3);Search.Configuration.QueryHelperTab.$15(null)}};Search.Configuration.QueryHelperTab.$4K=function(){if(Search.Configuration.QueryHelperTab.$d.value===Search.Configuration.QueryHelperTab.$2r){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.$3);Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$7());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.get_$4());Search.Configuration.QueryHelperTab.$1t(null)}else{Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$4());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$7());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.$3);Search.Configuration.QueryHelperTab.$15(null)}};Search.Configuration.QueryHelperTab.$15=function(){if(Search.Configuration.QueryHelperTab.$3.value===Search.Configuration.QueryHelperTab.$s)Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.$J);else Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.$J)};Search.Configuration.QueryHelperTab.$1t=function(){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.$J);if(!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.get_$4())&&Search.Configuration.QueryHelperTab.get_$4().selectedIndex===1||!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.get_$7())&&Search.Configuration.QueryHelperTab.get_$7().selectedIndex===1)Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.$J);else if(Search.Configuration.QueryHelperTab.get_$4().selectedIndex===Search.Configuration.QueryHelperTab.get_$4().children.length-1){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$4());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.get_$7())}};Search.Configuration.QueryHelperTab.$3Y=function(a){if(!Srch.U.n(a.createTextRange)){var b=a.createTextRange();b.moveStart("character",a.value.length);b.collapse(true);b.select()}else a.focus()};Search.Configuration.QueryHelperTab.addValueToQuery=function(){if(Search.Configuration.QueryHelperTab.$M.value===Search.Configuration.QueryHelperTab.$3U||!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.$3)&&Search.Configuration.QueryHelperTab.$3.value===Search.Configuration.QueryHelperTab.$2F||!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.$3)&&Search.Configuration.QueryHelperTab.$3.value===Search.Configuration.QueryHelperTab.$s&&Search.Configuration.QueryHelperTab.$J.value.trim()===""||!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.get_$4())&&!Search.Configuration.QueryHelperTab.get_$4().selectedIndex||!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.get_$4())&&Search.Configuration.QueryHelperTab.get_$4().selectedIndex===1&&Search.Configuration.QueryHelperTab.$J.value.trim()===""||!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.get_$7())&&!Search.Configuration.QueryHelperTab.get_$7().selectedIndex||!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.get_$7())&&Search.Configuration.QueryHelperTab.get_$7().selectedIndex===1&&Search.Configuration.QueryHelperTab.$J.value.trim()==="")return;var f=Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.$d)?Search.Configuration.QueryHelperTab.$M.value:Search.Configuration.QueryHelperTab.$d.value,b=Search.Configuration.QueryHelperTab.$B.value,a=Search.Configuration.QueryHelperTab.$49(),d="",e="";if(a.toLowerCase()==="{actionterms.termid}"||a.toLowerCase()==="{subjectterms.termid}"){d="{?{|";e="}}"}else if(a.toLowerCase()==="{actionterms}"||a.toLowerCase()==="{subjectterms}"||a.toLowerCase()==="{searchterms}"||a.toLowerCase()==="{searchboxquery}"){d="{?";e="}"}var c="";if(b.indexOf("VALUE")>-1)b=b.replace("VALUE",f);else c+=f;if(b.indexOf("...")>-1)c+=b.replace("...",a);else c+=b+a;if(Search.Configuration.QueryHelperTab.$N.value!=="")Search.Configuration.QueryHelperTab.$N.value+=" ";Search.Configuration.QueryHelperTab.$N.value+=d+c+e;Search.Configuration.QueryHelperTab.$3Y(Search.Configuration.QueryHelperTab.$N)};Search.Configuration.QueryHelperTab.$49=function(){if(!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.$3))return Search.Configuration.QueryHelperTab.$3.value===Search.Configuration.QueryHelperTab.$s?Search.Configuration.QueryHelperTab.$J.value:Search.Configuration.QueryHelperTab.$3.value;else if(!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.QueryHelperTab.get_$4()))return Search.Configuration.QueryHelperTab.get_$4().selectedIndex===1?Search.Configuration.QueryHelperTab.$J.value:Search.Configuration.QueryHelperTab.get_$4().value;return Search.Configuration.QueryHelperTab.get_$7().selectedIndex===1?Search.Configuration.QueryHelperTab.$J.value:Search.Configuration.QueryHelperTab.get_$7().value};Search.Configuration.QueryHelperTab.addKeywordValueToQuery=function(){var a=Search.Configuration.QueryHelperTab.$A.value;if(a.toLowerCase()==="{actionterms.termid}"||a.toLowerCase()==="{subjectterms.termid}")a="{?{|"+a+"}}";if(Search.Configuration.QueryHelperTab.$N.value!=="")Search.Configuration.QueryHelperTab.$N.value+=" ";Search.Configuration.QueryHelperTab.$N.value+=a;Search.Configuration.QueryHelperTab.$3Y(Search.Configuration.QueryHelperTab.$N)};Search.Configuration.QueryHelperTab.contentTypeShowHide=function(){if(Search.Configuration.QueryHelperTab.get_$G().selectedIndex===Search.Configuration.QueryHelperTab.get_$G().options.length-1){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.QueryHelperTab.get_$G());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.QueryHelperTab.get_$x());Search.Configuration.QueryHelperTab.get_$x().selectedIndex=0}};Search.Configuration.QueryHelperTab.prototype={onTabLoad:function(){Search.Configuration.CustomTab.prototype.onTabLoad.call(this)}};Search.Configuration.Refinement=function(){};Search.Configuration.Refinement.launchConfigDialog=function(q,r,p,i){var b=new SP.UI.DialogOptions;b.autoSize=true;b.dialogReturnValueCallback=Search.Configuration.Refinement.onConfigDialogReturn;var j=$get(p);if(j){Search.Configuration.Refinement.$k=j;var a=null,k=null;if(!Srch.U.e(Search.Configuration.Refinement.$k.value)){var d=false;try{a=Sys.Serialization.JavaScriptSerializer.deserialize(Search.Configuration.Refinement.$k.value)}catch(s){d=true}d=!!(d|(!a||!a.refinerConfigurations));if(d){var c=null;try{c=Sys.Serialization.JavaScriptSerializer.deserialize(Search.Configuration.Refinement.$k.value)}catch(t){k=Srch.U.loadResource("refconf_Error_FailedToRestoreConfiguration")}if(c&&c.length>0){for(var l=new Array(c.length),e=0;e<c.length;e++){var f=c[e],g=new Microsoft.SharePoint.Search.FacetedNavigation.RefinerConfiguration(f.propertyName);g.refinerSpecStringOverride=f.spec;g.displayTemplate=f.renderTemplateId;g.useDefaultDateIntervals=f.useDefaultDateIntervals;l[e]=g}a=new Microsoft.SharePoint.Search.FacetedNavigation.RefinementConfiguration(l)}}}if(!a)a=new Microsoft.SharePoint.Search.FacetedNavigation.RefinementConfiguration(new Array(0));var h=new Microsoft.SharePoint.Search.FacetedNavigation.RefinementConfigurationDialogArgs(a,null,k);if(!Srch.U.e(i)){h.contextDataProviderState=Sys.Serialization.JavaScriptSerializer.deserialize(i);var m=Srch.ScriptApplicationManager.get_current();if(m){var n=m.queryGroups[q];if(n){var o=new Srch.QueryState;o.copyFrom(n.dataProvider.get_currentQueryState(),0);h.contextDataProviderState.InitialQueryState=o}}}b.args=Microsoft.SharePoint.Search.FacetedNavigation.RefinementConfigurationDialogArgs.toJSON(h)}b.title=String.format(Srch.U.loadResource("refconf_FNT_DCR_RefinementConfigurationDialogTitle"),r);b.url=SP.Utilities.VersionUtility.getLayoutsPageUrl("RefinementConfigurationDialog.aspx");var u=SP.UI.ModalDialog.showModalDialog(b);return false};Search.Configuration.Refinement.onConfigDialogReturn=function(e,a){if(Srch.U.n(a))return;var b=a;if(b&&null!==Search.Configuration.Refinement.$k){var c=Microsoft.SharePoint.Search.FacetedNavigation.RefinementConfiguration.fromJSON(b),d=Sys.Serialization.JavaScriptSerializer.serialize(c);Search.Configuration.Refinement.$k.value=d}};Search.Configuration.SettingsTab=function(b,c,a){this.$$d_$4M_3=Function.createDelegate(this,this.$4M_3);this.$$d_$4R_3=Function.createDelegate(this,this.$4R_3);this.$$d_$4N_3=Function.createDelegate(this,this.$4N_3);this.$$d_$4S_3=Function.createDelegate(this,this.$4S_3);this.$$d_$4L_3=Function.createDelegate(this,this.$4L_3);this.$$d_$4Q_3=Function.createDelegate(this,this.$4Q_3);this.$$d_$4O_3=Function.createDelegate(this,this.$4O_3);this.$$d_$4P_3=Function.createDelegate(this,this.$4P_3);this.$$d_$4U_3=Function.createDelegate(this,this.$4U_3);this.$$d_$4V_3=Function.createDelegate(this,this.$4V_3);this.$$d_$4T_3=Function.createDelegate(this,this.$4T_3);Search.Configuration.SettingsTab.initializeBase(this,[b,c,a])};Search.Configuration.SettingsTab.get_$2S=function(){if(!Search.Configuration.SettingsTab.$2R)Search.Configuration.SettingsTab.$2R=$get(Search.Configuration.QueryBuilder.get_$F()+"throttlehigh");return Search.Configuration.SettingsTab.$2R};Search.Configuration.SettingsTab.get_$2W=function(){if(!Search.Configuration.SettingsTab.$2V)Search.Configuration.SettingsTab.$2V=$get(Search.Configuration.QueryBuilder.get_$F()+"throttleregular");return Search.Configuration.SettingsTab.$2V};Search.Configuration.SettingsTab.get_$2U=function(){if(!Search.Configuration.SettingsTab.$2T)Search.Configuration.SettingsTab.$2T=$get(Search.Configuration.QueryBuilder.get_$F()+"throttlelow");return Search.Configuration.SettingsTab.$2T};Search.Configuration.SettingsTab.get_$3Q=function(){if(!Search.Configuration.SettingsTab.$25)Search.Configuration.SettingsTab.$25=$get(Search.Configuration.QueryBuilder.get_$F()+"queryRuleUse");return Search.Configuration.SettingsTab.$25};Search.Configuration.SettingsTab.get_$3P=function(){if(!Search.Configuration.SettingsTab.$24)Search.Configuration.SettingsTab.$24=$get(Search.Configuration.QueryBuilder.get_$F()+"queryRuleNotUse");return Search.Configuration.SettingsTab.$24};Search.Configuration.SettingsTab.get_$39=function(){if(!Search.Configuration.SettingsTab.$1b)Search.Configuration.SettingsTab.$1b=$get(Search.Configuration.QueryBuilder.get_$F()+"displaySync");return Search.Configuration.SettingsTab.$1b};Search.Configuration.SettingsTab.get_$37=function(){if(!Search.Configuration.SettingsTab.$1a)Search.Configuration.SettingsTab.$1a=$get(Search.Configuration.QueryBuilder.get_$F()+"displayAsync");return Search.Configuration.SettingsTab.$1a};Search.Configuration.SettingsTab.get_$3A=function(){if(!Search.Configuration.SettingsTab.$1e)Search.Configuration.SettingsTab.$1e=$get(Search.Configuration.QueryBuilder.get_$F()+"enableUrlRewrite");return Search.Configuration.SettingsTab.$1e};Search.Configuration.SettingsTab.get_$36=function(){if(!Search.Configuration.SettingsTab.$1Z)Search.Configuration.SettingsTab.$1Z=$get(Search.Configuration.QueryBuilder.get_$F()+"disableUrlRewrite");return Search.Configuration.SettingsTab.$1Z};Search.Configuration.SettingsTab.get_$1d=function(){if(!Search.Configuration.SettingsTab.$1c)Search.Configuration.SettingsTab.$1c=$get(Search.Configuration.QueryBuilder.get_$F()+"enableTrimDuplicates");return Search.Configuration.SettingsTab.$1c};Search.Configuration.SettingsTab.get_$1Y=function(){if(!Search.Configuration.SettingsTab.$1X)Search.Configuration.SettingsTab.$1X=$get(Search.Configuration.QueryBuilder.get_$F()+"disableTrimDuplicates");return Search.Configuration.SettingsTab.$1X};Search.Configuration.SettingsTab.prototype={onTabLoad:function(){Search.Configuration.CustomTab.prototype.onTabLoad.call(this);if(!Srch.U.n(Search.Configuration.SettingsTab.get_$2S())&&!Srch.U.n(Search.Configuration.SettingsTab.get_$2W())&&!Srch.U.n(Search.Configuration.SettingsTab.get_$2U()))if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(5).toLowerCase()){var e=$get("priorityDiv");Search.Configuration.QueryBuilderUtility.hide(e)}else{var b=Search.Configuration.QueryBuilder.$0.ClientType;if(!Srch.U.e(b))if(b==="ContentSearchHigh")Search.Configuration.SettingsTab.get_$2S().checked=true;else if(b==="ContentSearchRegular")Search.Configuration.SettingsTab.get_$2W().checked=true;else Search.Configuration.SettingsTab.get_$2U().checked=true}var a=$get("trimDuplicatesDiv");if(!Srch.U.n(a))if(Search.Configuration.QueryBuilder.$1.toLowerCase()!==Search.Configuration.QueryBuilderMode.toString(5).toLowerCase())Search.Configuration.QueryBuilderUtility.hide(a);else Search.Configuration.QueryBuilderUtility.show(a);Srch.U.addHandler(Search.Configuration.SettingsTab.get_$2S(),"click",this.$$d_$4T_3);Srch.U.addHandler(Search.Configuration.SettingsTab.get_$2W(),"click",this.$$d_$4V_3);Srch.U.addHandler(Search.Configuration.SettingsTab.get_$2U(),"click",this.$$d_$4U_3);Srch.U.addHandler(Search.Configuration.SettingsTab.get_$39(),"click",this.$$d_$4P_3);Srch.U.addHandler(Search.Configuration.SettingsTab.get_$37(),"click",this.$$d_$4O_3);Srch.U.addHandler(Search.Configuration.SettingsTab.get_$3Q(),"click",this.$$d_$4Q_3);Srch.U.addHandler(Search.Configuration.SettingsTab.get_$3P(),"click",this.$$d_$4L_3);Srch.U.addHandler(Search.Configuration.SettingsTab.get_$3A(),"click",this.$$d_$4S_3);Srch.U.addHandler(Search.Configuration.SettingsTab.get_$36(),"click",this.$$d_$4N_3);!Srch.U.n(Search.Configuration.SettingsTab.get_$1d())&&Srch.U.addHandler(Search.Configuration.SettingsTab.get_$1d(),"click",this.$$d_$4R_3);!Srch.U.n(Search.Configuration.SettingsTab.get_$1Y())&&Srch.U.addHandler(Search.Configuration.SettingsTab.get_$1Y(),"click",this.$$d_$4M_3);if(Search.Configuration.QueryBuilder.$0.Async)Search.Configuration.SettingsTab.get_$37().checked=true;else Search.Configuration.SettingsTab.get_$39().checked=true;if(Search.Configuration.QueryBuilder.$0.EnableQueryRules)Search.Configuration.SettingsTab.get_$3Q().checked=true;else Search.Configuration.SettingsTab.get_$3P().checked=true;var d=Search.Configuration.QueryBuilder.$0.Properties[Search.Configuration.SettingsTab.$W];if(d)Search.Configuration.SettingsTab.get_$36().checked=true;else Search.Configuration.SettingsTab.get_$3A().checked=true;var c=Search.Configuration.QueryBuilder.$0.ClientType;if(c==="ContentSearchHigh")Search.Configuration.SettingsTab.get_$2S().checked=true;else if(c==="ContentSearchLow")Search.Configuration.SettingsTab.get_$2U().checked=true;else Search.Configuration.SettingsTab.get_$2W().checked=true;if(!Srch.U.n(Search.Configuration.QueryBuilder.$0.TrimDuplicates))if(Search.Configuration.QueryBuilder.$0.TrimDuplicates){if(!Srch.U.n(Search.Configuration.SettingsTab.get_$1d()))Search.Configuration.SettingsTab.get_$1d().checked=true}else if(!Srch.U.n(Search.Configuration.SettingsTab.get_$1Y()))Search.Configuration.SettingsTab.get_$1Y().checked=true},$4T_3:function(){Search.Configuration.QueryBuilder.$0.ClientType="ContentSearchHigh"},$4V_3:function(){Search.Configuration.QueryBuilder.$0.ClientType="ContentSearchRegular"},$4U_3:function(){Search.Configuration.QueryBuilder.$0.ClientType="ContentSearchLow"},$4O_3:function(){Search.Configuration.QueryBuilder.$0.Async=true},$4P_3:function(){Search.Configuration.QueryBuilder.$0.Async=false},$4Q_3:function(){Search.Configuration.QueryBuilder.$0.EnableQueryRules=true},$4L_3:function(){Search.Configuration.QueryBuilder.$0.EnableQueryRules=false},$4S_3:function(){if(Search.Configuration.QueryBuilder.$0.Properties[Search.Configuration.SettingsTab.$W])delete Search.Configuration.QueryBuilder.$0.Properties[Search.Configuration.SettingsTab.$W]},$4N_3:function(){Search.Configuration.QueryBuilder.$0.Properties[Search.Configuration.SettingsTab.$W]=true},$4R_3:function(){Search.Configuration.QueryBuilder.$0.TrimDuplicates=true},$4M_3:function(){Search.Configuration.QueryBuilder.$0.TrimDuplicates=false}};Search.Configuration.SortTab=function(b,c,a){Search.Configuration.SortTab.initializeBase(this,[b,c,a]);if(Search.Configuration.QueryBuilder.get_$H().IsSPFSKU){Search.Configuration.QueryBuilderUtility.hide($get("xrankSection"));Search.Configuration.QueryBuilderUtility.hide($get("rankmodelSection"))}};Search.Configuration.SortTab.get_$3e=function(){if(!Search.Configuration.SortTab.$2I)Search.Configuration.SortTab.$2I=$get("SortByAvailable");return Search.Configuration.SortTab.$2I};Search.Configuration.SortTab.get_$3f=function(){if(!Search.Configuration.SortTab.$2J)Search.Configuration.SortTab.$2J=$get("SortByUnavailable");return Search.Configuration.SortTab.$2J};Search.Configuration.SortTab.get_$O=function(){if(!Search.Configuration.SortTab.$2L)Search.Configuration.SortTab.$2L=$get("SortList");return Search.Configuration.SortTab.$2L};Search.Configuration.SortTab.get_$4o=function(){if(!Search.Configuration.SortTab.$2K)Search.Configuration.SortTab.$2K=Search.Configuration.SortTab.$3x($get("SortItem"));return Search.Configuration.SortTab.$2K};Search.Configuration.SortTab.get_$p=function(){if(!Search.Configuration.SortTab.$2c)Search.Configuration.SortTab.$2c=$get("XRankList");return Search.Configuration.SortTab.$2c};Search.Configuration.SortTab.get_$4v=function(){if(!Search.Configuration.SortTab.$2b)Search.Configuration.SortTab.$2b=Search.Configuration.SortTab.$3z($get("XRankItem"));return Search.Configuration.SortTab.$2b};Search.Configuration.SortTab.get_$2y=function(){if(!Search.Configuration.SortTab.$1H)Search.Configuration.SortTab.$1H=Search.Configuration.QueryBuilderUtility.getFirstChild($get("addRankRuleDiv"));return Search.Configuration.SortTab.$1H};Search.Configuration.SortTab.get_$17=function(){if(!Search.Configuration.SortTab.$27)Search.Configuration.SortTab.$27=Search.Configuration.QueryBuilderUtility.getClientElementById("rankModelDropDown");return Search.Configuration.SortTab.$27};Search.Configuration.SortTab.get_$2z=function(){return 10};Search.Configuration.SortTab.setSortByUnavailable=function(){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.get_$3e());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.SortTab.get_$3f())};Search.Configuration.SortTab.setSortByAvailable=function(){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.get_$3f());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.SortTab.get_$3e())};Search.Configuration.SortTab.addSort=function(){Search.Configuration.SortTab.$2x();Search.Configuration.SortTab.setSortsOnQBState()};Search.Configuration.SortTab.$2x=function(){if(Search.Configuration.SortTab.$t<5){Search.Configuration.SortTab.$t++;var b=Search.Configuration.SortTab.get_$4o().cloneNode(true);Search.Configuration.QueryBuilderUtility.show(Search.Configuration.SortTab.$3E(b));Search.Configuration.SortTab.get_$O().appendChild(b);Search.Configuration.SortTab.$z();var d=Search.Configuration.SortTab.$Z(b),c=d.getElementsByTagName("option"),e=Search.Configuration.SortTab.get_$O().getElementsByTagName("select");d.selectedIndex=0;for(var a=0;a<c.length-1;a++)if(c[a].value.toUpperCase()==="Rank".toUpperCase()){c[a].parentNode.removeChild(c[a]);break}Search.Configuration.SortTab.$t===5&&Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$c);Search.Configuration.SortTab.$z();Search.Configuration.SortTab.$r();Search.Configuration.SortTab.$2H(b)}};Search.Configuration.SortTab.deleteSort=function(b){var a=null;a=Search.Configuration.SortTab.$2i(b);a.parentNode.removeChild(a);Search.Configuration.SortTab.$t--;Search.Configuration.QueryBuilderUtility.show(Search.Configuration.SortTab.$c);Search.Configuration.SortTab.$z();Search.Configuration.SortTab.setSortsOnQBState()};Search.Configuration.SortTab.selectSortPropety=function(b){var a=Search.Configuration.SortTab.$2i(b);Search.Configuration.SortTab.$2H(a);Search.Configuration.SortTab.$z();Search.Configuration.SortTab.$r();Search.Configuration.SortTab.setSortsOnQBState()};Search.Configuration.SortTab.refreshXRank=function(){Search.Configuration.QueryBuilder.$0.RankRules=Search.Configuration.SortTab.$46()};Search.Configuration.SortTab.$3s=function(){var a=Search.Configuration.QueryBuilderUtility.getNextElement(Search.Configuration.QueryBuilderUtility.getFirstChild(Search.Configuration.SortTab.get_$O())),b=null;while(!Srch.U.n(a)&&a!==Search.Configuration.SortTab.$c){b=a;a=a.nextSibling;Search.Configuration.SortTab.get_$O().removeChild(b)}Search.Configuration.SortTab.$t=1};Search.Configuration.SortTab.$3t=function(){var a=Search.Configuration.SortTab.$P(Search.Configuration.SortTab.$Y(Search.Configuration.SortTab.get_$p())),b=null;while(!Srch.U.n(a)){b=a;a=Search.Configuration.SortTab.$P(a);Search.Configuration.SortTab.get_$p().removeChild(b)}Search.Configuration.SortTab.$i=0};Search.Configuration.SortTab.$4n=function(b){var a=$get("XRankFixSortSec");if(b)Search.Configuration.QueryBuilderUtility.show(a);else Search.Configuration.QueryBuilderUtility.hide(a)};Search.Configuration.SortTab.$r=function(){var a=false,c=Search.Configuration.SortTab.$Y(Search.Configuration.SortTab.get_$O()),d=Search.Configuration.SortTab.$Z(c);if(d.value.toUpperCase()==="Rank".toUpperCase())a=true;var e=Search.Configuration.SortTab.$Y(Search.Configuration.SortTab.get_$p()),b=Search.Configuration.SortTab.$P(e);if(Search.Configuration.SortTab.$Q&&a){Search.Configuration.QueryBuilder.$0.RankRules=Search.Configuration.SortTab.$Q;Search.Configuration.SortTab.$Q=null}else if(!Search.Configuration.SortTab.$Q&&!a){Search.Configuration.SortTab.$Q=Search.Configuration.QueryBuilder.$0.RankRules;Search.Configuration.QueryBuilder.$0.RankRules=null}while(!Srch.U.n(b)){var f=Search.Configuration.SortTab.$1E[Search.Configuration.SortTab.$a(b).id];f.enableControl(a);if(a)Search.Configuration.QueryBuilderUtility.enable(b);else Search.Configuration.QueryBuilderUtility.disable(b);b=Search.Configuration.SortTab.$P(b)}if(a){Search.Configuration.QueryBuilderUtility.enable($get("rankModelDiv"));Search.Configuration.QueryBuilderUtility.enable($get("addRankRuleDiv"))}else{Search.Configuration.QueryBuilderUtility.disable($get("rankModelDiv"));Search.Configuration.QueryBuilderUtility.disable($get("addRankRuleDiv"))}Search.Configuration.SortTab.$4n(!a)};Search.Configuration.SortTab.updateRankModel=function(){Search.Configuration.QueryBuilder.$0.RankModelId=Search.Configuration.SortTab.$4A()};Search.Configuration.SortTab.$4A=function(){if(!Search.Configuration.SortTab.get_$17().selectedIndex)return null;return Search.Configuration.SortTab.get_$17().value};Search.Configuration.SortTab.setFirstSortToRelevance=function(){var a=Search.Configuration.SortTab.$Y(Search.Configuration.SortTab.get_$O()),b=Search.Configuration.SortTab.$Z(a);b.selectedIndex=1;Search.Configuration.SortTab.$z();var c=Search.Configuration.SortTab.$e(a);c.selectedIndex=1;Search.Configuration.SortTab.$2H(a);Search.Configuration.SortTab.setSortsOnQBState();Search.Configuration.SortTab.$r()};Search.Configuration.SortTab.$4l=function(){var a=Search.Configuration.SortTab.$Y(Search.Configuration.SortTab.get_$O());while(a){Search.Configuration.SortTab.$2H(a);a=Search.Configuration.SortTab.$P(a)}};Search.Configuration.SortTab.$2H=function(a){if(Search.Configuration.SortTab.$Z(a).value==="Rank"){var b=Search.Configuration.SortTab.$e(a);b.selectedIndex=1;Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$e(a))}else if(!Search.Configuration.SortTab.$Z(a).selectedIndex)Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$e(a));else Search.Configuration.QueryBuilderUtility.show(Search.Configuration.SortTab.$e(a))};Search.Configuration.SortTab.$z=function(){var a=Search.Configuration.SortTab.$Y(Search.Configuration.SortTab.get_$O());while(a){Search.Configuration.SortTab.$41(Search.Configuration.SortTab.$Z(a));a=Search.Configuration.SortTab.$P(a)}};Search.Configuration.SortTab.$41=function(e){for(var d=Search.Configuration.SortTab.get_$O().getElementsByTagName("select"),c=e.getElementsByTagName("option"),a=1;a<c.length;a++){var b=c[a];if(Search.Configuration.SortTab.$4H(b,d))Search.Configuration.QueryBuilderUtility.hide(b);else Search.Configuration.QueryBuilderUtility.show(b)}};Search.Configuration.SortTab.$4H=function(d,e){for(var a=0;a<e.length;a++){var b=e[a];if(b.className.indexOf("qb-sortProperty")!==-1){var f=b.selectedIndex,g=b.getElementsByTagName("option"),c=g[f];if(c.value===d.value&&c!==d)return true}}return false};Search.Configuration.SortTab.$4r=function(){var a=Search.Configuration.QueryBuilder.$0.Sorts;if(!Srch.U.n(a)){for(var c=Search.Configuration.QueryBuilderUtility.getFirstChild(Search.Configuration.SortTab.get_$O()),b=0;b<a.length;b++){if(b){Search.Configuration.SortTab.$2x();c=Search.Configuration.QueryBuilderUtility.getNextElement(c)}var d=Search.Configuration.SortTab.$Z(c);d.value=a[b].p;var e=Search.Configuration.SortTab.$e(c);e.selectedIndex=a[b].d}if(a.length<5)Search.Configuration.QueryBuilderUtility.show(Search.Configuration.SortTab.$c);else Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$c)}};Search.Configuration.SortTab.setSortsOnQBState=function(){var c=[],d={},a=Search.Configuration.SortTab.$Y(Search.Configuration.SortTab.get_$O());while(!Srch.U.n(a)){var b=Search.Configuration.SortTab.$Z(a),f=Search.Configuration.SortTab.$e(a),e=b.value;if(Srch.U.n(d[e])&&b.selectedIndex){var g=new Srch.ResultSort(b.value,parseInt(f.value));Srch.U.appendArray(c,g);d[e]=true}a=Search.Configuration.SortTab.$P(a)}Search.Configuration.QueryBuilder.$0.Sorts=c};Search.Configuration.SortTab.addXRank=function(){if(Search.Configuration.SortTab.$i<5){Search.Configuration.SortTab.$i++;var a=Search.Configuration.SortTab.get_$4v().cloneNode(true),b=Search.Configuration.SortTab.$1l(a);if(Search.Configuration.SortTab.$i===1)Search.Configuration.QueryBuilderUtility.$6(b,Srch.Res.qb_SortTab_ChangeRankingWhen);else Search.Configuration.QueryBuilderUtility.$6(b,Srch.Res.qb_SortTab_OrWhen);Srch.U.addHandler(Search.Configuration.SortTab.$g(a),"change",Search.Configuration.SortTab.showAllContentTypesDropDown);Srch.U.addHandler(Search.Configuration.SortTab.$1n(a),"change",Search.Configuration.SortTab.showHideContentTypeDropDowns);var c=Search.Configuration.SortTab.$11(a),d=Search.Configuration.SortTab.$a(a);c.setAttribute("id","tagginginput_"+Search.Configuration.SortTab.$1U);d.setAttribute("id","taggingdiv_"+Search.Configuration.SortTab.$1U);Search.Configuration.SortTab.$1U++;Search.Configuration.SortTab.$i===5&&Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.get_$2y());Search.Configuration.SortTab.get_$p().appendChild(a);Search.Configuration.SortTab.loadXRankTagControl(a);Search.Configuration.SortTab.$r()}};Search.Configuration.SortTab.loadXRankTagControl=function(c){var a=Search.Configuration.SortTab.$a(c),d=Search.Configuration.SortTab.$11(c);if(a){a.Lcid=SP.PageContextInfo.get_currentLanguage();a.InputFieldId=d.id;a.TermSetId="00000000-0000-0000-0000-000000000000";a.AnchorId="00000000-0000-0000-0000-000000000000";a.FieldName="Tags";a.SspId="00000000-0000-0000-0000-000000000000";a.IsMulti=false;a.IsSpanTermSets=true;a.IsSpanTermStores=true;a.IsAddTerms=false;a.IsIgnoreFormatting=false;a.IsIncludeDeprecated=true;a.IsIncludePathData=false;a.IsIncludeUnavailable=true;a.IsUseCommaAsDelimiter=false;a.IsIncludeTermSetName=false;a.ExcludeKeyword=false;var e=Srch.ScriptApplicationManager.get_clientRuntimeContext(),b=e.get_url();if(!b.endsWith("/"))b+="/";b+="_vti_bin/TaxonomyInternalService.json";a.WebServiceUrl=b;RegisterSodDep("ScriptForWebTaggingUI.js","sp.js");RegisterSodDep("ScriptForWebTaggingUI.js","sp.ui.rte.js");EnsureScript("ScriptForWebTaggingUI.js",TypeofFullName("Microsoft.SharePoint.Taxonomy.ScriptForWebTaggingUI"),function(){Microsoft.SharePoint.Taxonomy.ScriptForWebTaggingUI.onLoad(a.id);var b=new Microsoft.SharePoint.Taxonomy.ControlObject(a);Search.Configuration.SortTab.$1E[a.id]=b})}};Search.Configuration.SortTab.showHideContentTypeDropDowns=function(c){if(c.target){var a=c.target;if(a.value==="5"){var b=Search.Configuration.SortTab.$g(a.parentNode);b.selectedIndex=0;Search.Configuration.QueryBuilderUtility.show(b);Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$f(a.parentNode));Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$a(a.parentNode));Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$11(a.parentNode))}else if(a.value==="7"){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$g(a.parentNode));Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$m(a.parentNode));Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$f(a.parentNode));Search.Configuration.QueryBuilderUtility.show(Search.Configuration.SortTab.$a(a.parentNode))}else{Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$g(a.parentNode));Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$m(a.parentNode));Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$a(a.parentNode));Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$11(a.parentNode));Search.Configuration.QueryBuilderUtility.show(Search.Configuration.SortTab.$f(a.parentNode))}Search.Configuration.SortTab.refreshXRank()}};Search.Configuration.SortTab.showAllContentTypesDropDown=function(c){if(c.target){var a=c.target;if(a.selectedIndex===a.options.length-1){var b=Search.Configuration.SortTab.$m(a.parentNode);b.selectedIndex=0;Search.Configuration.QueryBuilderUtility.show(b);Search.Configuration.QueryBuilderUtility.hide(a)}}};Search.Configuration.SortTab.deleteXRank=function(c){var a=Search.Configuration.SortTab.$2i(c);Search.Configuration.SortTab.$i===5&&Search.Configuration.QueryBuilderUtility.show(Search.Configuration.SortTab.get_$2y());a.parentNode.removeChild(a);Search.Configuration.SortTab.$i--;var b=Search.Configuration.SortTab.$1l(Search.Configuration.QueryBuilderUtility.getNextElement(Search.Configuration.SortTab.$Y(Search.Configuration.SortTab.get_$p())));b&&Search.Configuration.QueryBuilderUtility.$6(b,Srch.Res.qb_SortTab_ChangeRankingWhen);Search.Configuration.SortTab.refreshXRank()};Search.Configuration.SortTab.$46=function(){var e=[];if(!Srch.U.n(Search.Configuration.SortTab.$Q))return e;var g={},a=Search.Configuration.SortTab.$P(Search.Configuration.SortTab.$Y(Search.Configuration.SortTab.get_$p()));while(!Srch.U.n(a)){var d=Search.Configuration.SortTab.$1n(a),c=Search.Configuration.SortTab.$f(a),b=c.value,j=Search.Configuration.SortTab.$3C(a),h=parseInt(j.value);if(d.value==="5"){if(!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.SortTab.$g(a))){c=Search.Configuration.SortTab.$g(a);b=c.value}else if(!Search.Configuration.QueryBuilderUtility.isHidden(Search.Configuration.SortTab.$m(a))){c=Search.Configuration.SortTab.$m(a);b=c.value}}else if(d.value==="7"){var k=Search.Configuration.SortTab.$1E[Search.Configuration.SortTab.$a(a).id],f=k.getRawText();b=f.substring(f.lastIndexOf("|")+1,f.length);if(b===SP.Guid.get_empty().toString()){a=Search.Configuration.SortTab.$P(a);continue}}var i=d.value+b+h.toString();if(Srch.U.n(g[i])){var l=new Srch.RankRule(parseInt(d.value),b,h);Srch.U.appendArray(e,l);g[i]=true}a=Search.Configuration.SortTab.$P(a)}return e};Search.Configuration.SortTab.$4s=function(){Search.Configuration.SortTab.$3t();var a=Search.Configuration.SortTab.$Q;if(!Srch.U.n(a)&&a.length>0){Search.Configuration.QueryBuilder.$0.RankRules=Search.Configuration.SortTab.$Q;Search.Configuration.SortTab.$Q=null}a=Search.Configuration.QueryBuilder.$0.RankRules;if(!Srch.U.n(a))for(var b=Search.Configuration.QueryBuilderUtility.getFirstChild(Search.Configuration.SortTab.get_$p()),c=0;c<a.length;c++){Search.Configuration.SortTab.addXRank(null);b=Search.Configuration.QueryBuilderUtility.getNextElement(b);var n=Search.Configuration.SortTab.$1l(b);c>1&&Search.Configuration.QueryBuilderUtility.show(n);var i=Search.Configuration.SortTab.$1n(b);i.selectedIndex=a[c].matchType;if(i.selectedIndex===5){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$f(b));for(var l=false,e=Search.Configuration.SortTab.$g(b),f=0;f<e.options.length;f++)if(e.options[f].value===a[c].matchValue){e.selectedIndex=f;Search.Configuration.QueryBuilderUtility.show(e);l=true;break}if(!l)for(var g=Search.Configuration.SortTab.$m(b),h=0;h<g.options.length;h++)if(g.options[h].value===a[c].matchValue){g.selectedIndex=h;Search.Configuration.QueryBuilderUtility.show(g);break}}else if(i.selectedIndex===7){var m=Search.Configuration.SortTab.$a(b),k=Search.Configuration.SortTab.$1E[m.id];if(k&&a[c].matchValue!==""){k.addTerm(a[c].matchValue,a[c].matchValue);k.startupValidation()}Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.SortTab.$f(b));Search.Configuration.QueryBuilderUtility.show(m)}else{var o=Search.Configuration.SortTab.$f(b);o.value=a[c].matchValue}var d=Search.Configuration.SortTab.$3C(b),j=a[c].boost;if(j>Search.Configuration.SortTab.get_$2z())d.selectedIndex=0;else if(j<-Search.Configuration.SortTab.get_$2z())d.selectedIndex=d.options.length-1;else d.value=j.toString()}Search.Configuration.SortTab.$r()};Search.Configuration.SortTab.$3x=function(d){var a=d.cloneNode(true),b=Search.Configuration.SortTab.$4B(a);Search.Configuration.QueryBuilderUtility.$6(b,Srch.Res.qb_SortTab_ThenBy);var c=Search.Configuration.SortTab.$3E(a);Search.Configuration.QueryBuilderUtility.show(c);return a};Search.Configuration.SortTab.$3z=function(b){var a=b.cloneNode(true);Search.Configuration.QueryBuilderUtility.show(a);return a};Search.Configuration.SortTab.$2i=function(a){if(!Srch.U.n(a.target))return a.target.parentNode;return a.srcElement.parentNode};Search.Configuration.SortTab.$Z=function(b){var a=Search.Configuration.QueryBuilderUtility.getFirstChild(b);return Search.Configuration.QueryBuilderUtility.getNextElement(a)};Search.Configuration.SortTab.$e=function(b){var a=Search.Configuration.SortTab.$Z(b);return Search.Configuration.QueryBuilderUtility.getNextElement(a)};Search.Configuration.SortTab.$3E=function(b){var a=Search.Configuration.SortTab.$e(b);return Search.Configuration.QueryBuilderUtility.getNextElement(a)};Search.Configuration.SortTab.$4B=function(a){return Search.Configuration.QueryBuilderUtility.getFirstChild(Search.Configuration.QueryBuilderUtility.getFirstChild(a))};Search.Configuration.SortTab.$1l=function(a){return Search.Configuration.QueryBuilderUtility.getFirstChild(a)};Search.Configuration.SortTab.$1n=function(a){return Search.Configuration.QueryBuilderUtility.getNextElement(Search.Configuration.SortTab.$1l(a))};Search.Configuration.SortTab.$f=function(a){return Search.Configuration.QueryBuilderUtility.getNextElement(Search.Configuration.SortTab.$1n(a))};Search.Configuration.SortTab.$g=function(a){return Search.Configuration.QueryBuilderUtility.getNextElement(Search.Configuration.SortTab.$f(a))};Search.Configuration.SortTab.$m=function(a){return Search.Configuration.QueryBuilderUtility.getNextElement(Search.Configuration.SortTab.$g(a))};Search.Configuration.SortTab.$11=function(a){return Search.Configuration.QueryBuilderUtility.getNextElement(Search.Configuration.SortTab.$m(a))};Search.Configuration.SortTab.$a=function(a){return Search.Configuration.QueryBuilderUtility.getNextElement(Search.Configuration.SortTab.$11(a))};Search.Configuration.SortTab.$48=function(a){return Search.Configuration.QueryBuilderUtility.getNextElement(Search.Configuration.SortTab.$a(a))};Search.Configuration.SortTab.$3C=function(a){return Search.Configuration.QueryBuilderUtility.getNextElement(Search.Configuration.SortTab.$48(a))};Search.Configuration.SortTab.$Y=function(a){return Search.Configuration.QueryBuilderUtility.getFirstChild(a)};Search.Configuration.SortTab.$P=function(a){return Search.Configuration.QueryBuilderUtility.getNextElement(a)};Search.Configuration.SortTab.prototype={onTabLoad:function(){Search.Configuration.CustomTab.prototype.onTabLoad.call(this);if(!Search.Configuration.SortTab.$c)Search.Configuration.SortTab.$c=$get("AddSortButton");var b=Search.Configuration.QueryBuilder.$0.Sorts;if(!Srch.U.n(b)){Search.Configuration.SortTab.$3s();Search.Configuration.SortTab.$4r();var c=b[0];if(c)c.p===""&&Search.Configuration.SortTab.setFirstSortToRelevance();else Search.Configuration.SortTab.setFirstSortToRelevance()}var d=Search.Configuration.QueryBuilder.$0.RankRules;!Srch.U.n(d)&&Search.Configuration.SortTab.$4s();Search.Configuration.SortTab.$4l();Search.Configuration.SortTab.$r();if(!Srch.U.e(Search.Configuration.QueryBuilder.$0.RankModelId))for(var a=0;a<Search.Configuration.SortTab.get_$17().options.length;a++)if(Search.Configuration.SortTab.get_$17().options[a].value.toLowerCase()===Search.Configuration.QueryBuilder.$0.RankModelId.toLowerCase()){Search.Configuration.SortTab.get_$17().selectedIndex=a;break}}};Search.Configuration.TestQueryTab=function(b,c,a){Search.Configuration.TestQueryTab.initializeBase(this,[b,c,a]);!Search.Configuration.QueryBuilder.get_$H().UserHasAdminRights&&Search.Configuration.QueryBuilderUtility.hide($get("UserSegmentVariablesDiv"));if(Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(2).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(3).toLowerCase()||Search.Configuration.QueryBuilder.$1.toLowerCase()===Search.Configuration.QueryBuilderMode.toString(4).toLowerCase()){Search.Configuration.QueryBuilderUtility.hide($get("RefinedBy"));Search.Configuration.QueryBuilderUtility.hide($get("CollapsedBy"));Search.Configuration.QueryBuilderUtility.hide($get("UserSegmentVariablesDiv"));Search.Configuration.QueryBuilderUtility.hide($get("QueryRulesApplied"))}Search.Configuration.QueryBuilder.get_$H().IsSPFSKU&&Search.Configuration.QueryBuilderUtility.hide($get("UserSegmentVariablesDiv"))};Search.Configuration.TestQueryTab.get_$3R=function(){if(!Search.Configuration.TestQueryTab.$26)Search.Configuration.TestQueryTab.$26=$get("QueryTemplateView");return Search.Configuration.TestQueryTab.$26};Search.Configuration.TestQueryTab.get_$2o=function(){if(!Search.Configuration.TestQueryTab.$28)Search.Configuration.TestQueryTab.$28=$get("QueryRefinedBy");return Search.Configuration.TestQueryTab.$28};Search.Configuration.TestQueryTab.get_$32=function(){if(!Search.Configuration.TestQueryTab.$1O)Search.Configuration.TestQueryTab.$1O=$get("QueryCollapsedBy");return Search.Configuration.TestQueryTab.$1O};Search.Configuration.TestQueryTab.get_$S=function(){if(!Search.Configuration.TestQueryTab.$2P)Search.Configuration.TestQueryTab.$2P=$get("TemplateVariablesView");return Search.Configuration.TestQueryTab.$2P};Search.Configuration.TestQueryTab.get_$2s=function(){if(!Search.Configuration.TestQueryTab.$2Q)Search.Configuration.TestQueryTab.$2Q=$get("TemplateVariablesViewLoading");return Search.Configuration.TestQueryTab.$2Q};Search.Configuration.TestQueryTab.get_$2p=function(){if(!Search.Configuration.TestQueryTab.$2D)Search.Configuration.TestQueryTab.$2D=$get("ResolvedQueryView");return Search.Configuration.TestQueryTab.$2D};Search.Configuration.TestQueryTab.get_$1g=function(){if(!Search.Configuration.TestQueryTab.$1f)Search.Configuration.TestQueryTab.$1f=$get("ExecutedQueryRules");return Search.Configuration.TestQueryTab.$1f};Search.Configuration.TestQueryTab.get_$4t=function(){if(!Search.Configuration.TestQueryTab.$1G)Search.Configuration.TestQueryTab.$1G=$get("UserSegmentTerms");return Search.Configuration.TestQueryTab.$1G};Search.Configuration.TestQueryTab.clear=function(){Search.Configuration.TestQueryTab.get_$2o().value="";Search.Configuration.TestQueryTab.get_$32().value="";Search.Configuration.TestQueryTab.get_$2p().value="";Search.Configuration.TestQueryTab.get_$1g().value=""};Search.Configuration.TestQueryTab.queryIssuing=function(d,c){Search.Configuration.TestQueryTab.clear();var a=c.queryState;if(a.r)Search.Configuration.TestQueryTab.get_$2o().value=a.r.toString();else Search.Configuration.TestQueryTab.get_$2o().value="";var b=Search.Configuration.QueryBuilder.get_$C().get_dataProvider();if(b)Search.Configuration.TestQueryTab.get_$32().value=b.get_collapseSpecification()};Search.Configuration.TestQueryTab.resultReady=function(l,k){var g=k,a=g.result;if(!Srch.U.n(a)){var h=a["QueryId"],b=a.ResultTables;if(b)for(var c=0;c<b.length;c++)if(b[c]["QueryId"]===h){var i=b[c]["Properties"];Search.Configuration.TestQueryTab.get_$2p().value=i["QueryModification"]}var d=a["TriggeredRules"];if(d)for(var e=0;e<d.length;e++){var f=d[e].toString(),j=Search.Configuration.QueryBuilder.get_$H().QueryRules[f];if(Search.Configuration.TestQueryTab.get_$1g().value!=="")Search.Configuration.TestQueryTab.get_$1g().value+=", ";Search.Configuration.TestQueryTab.get_$1g().value+=j||f}}};Search.Configuration.TestQueryTab.onAddUserSegment=function(){var a=new SP.UI.DialogOptions;a.width=700;a.height=350;a.url=SP.Utilities.HttpUtility.urlPathEncode(SP.Utilities.VersionUtility.getLayoutsPageUrl("QueryRuleTaxonomy.aspx?level=site"));a.dialogReturnValueCallback=Search.Configuration.TestQueryTab.$4Y;var b=SP.UI.ModalDialog.showModalDialog(a)};Search.Configuration.TestQueryTab.onRemoveUserSegment=function(b){var a=$get(b);a&&a.parentNode.removeChild(a)};Search.Configuration.TestQueryTab.$3y=function(e){var a=document.createElement("li"),d=document.createElement("span"),f=document.createTextNode(e.DisplayName);d.setAttribute("class","qb-variableLabel qb-marginright10");d.appendChild(f);var b=e.DictData;b=b.substr(b.lastIndexOf(";")+1);a.setAttribute(Search.Configuration.TestQueryTab.$2t,b);a.id=b;var c=document.createElement("a");c.href="javascript:void(0)";c.setAttribute("onclick","javascript:Search.Configuration.TestQueryTab.onRemoveUserSegment('"+a.id+"'); return false;");Search.Configuration.QueryBuilderUtility.$6(c,Srch.Res.qb_Remove);a.appendChild(d);a.appendChild(c);return a};Search.Configuration.TestQueryTab.$4F=function(){var b=[],a=Search.Configuration.QueryBuilderUtility.getFirstChild(Search.Configuration.TestQueryTab.$1G);while(a){var c=a.getAttributeNode(Search.Configuration.TestQueryTab.$2t);Srch.U.appendArray(b,c.value);a=Search.Configuration.QueryBuilderUtility.getNextElement(a)}return b};Search.Configuration.TestQueryTab.$4Y=function(b,c){if(b===1){var a=c;Search.Configuration.TestQueryTab.get_$4t().appendChild(Search.Configuration.TestQueryTab.$3y(a))}};Search.Configuration.TestQueryTab.getTemplateVariables=function(){var b={},e=Search.Configuration.QueryBuilderUtility.getFirstChild(Search.Configuration.TestQueryTab.get_$S()),a=Search.Configuration.QueryBuilderUtility.getFirstChild(e);while(!Srch.U.n(a)){var c=Search.Configuration.QueryBuilderUtility.getFirstChild(a),f=Search.Configuration.QueryBuilderUtility.getNextElement(c),d=Search.Configuration.QueryBuilderUtility.getNextElement(f),g=c.getAttribute("title");if(!d.getAttribute("data-notapplicable"))b[g]=d.value;a=Search.Configuration.QueryBuilderUtility.getNextElement(a)}return b};Search.Configuration.TestQueryTab.$3N=function(b,c,d,e){var a=new Sys.Net.WebRequest;a.set_url("QueryBuilder.aspx/"+b+window.location.search);a.set_httpVerb("POST");a.get_headers()["Content-Type"]="application/json";a.set_body(c);a.set_userContext(e);a.add_completed(d);a.invoke()};Search.Configuration.TestQueryTab.refreshTemplateVariables=function(a){Search.Configuration.QueryBuilderUtility.removeAllChildren(Search.Configuration.TestQueryTab.get_$S());Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.TestQueryTab.get_$S());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.TestQueryTab.get_$2s());if(Search.Configuration.QueryBuilder.get_$T()){var d=Search.Configuration.QueryHelperTab.get_useFillIn()?Search.Configuration.QueryBuilder.get_$R()["ec675252-14fa-4fbe-84dd-8d098ed74181"]:Search.Configuration.QueryBuilder.get_$34();Search.Configuration.QueryBuilderUtility.$6(Search.Configuration.TestQueryTab.get_$3R(),d.QueryTemplate);var e=Search.Configuration.QueryHelperTab.getBoundVariableValues(),b=new Search.Configuration.TestQueryTab.ExpandTokensBody;b.tokens=e;Search.Configuration.TestQueryTab.$3N("ExpandTokens",Sys.Serialization.JavaScriptSerializer.serialize(b),Search.Configuration.TestQueryTab.$43,a)}else{Search.Configuration.QueryBuilderUtility.$6(Search.Configuration.TestQueryTab.get_$3R(),Search.Configuration.QueryBuilder.get_$1V());if(Srch.U.e(Search.Configuration.QueryBuilder.get_$1V())){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.TestQueryTab.get_$2s());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.TestQueryTab.get_$S());a&&a()}else{var c=new Search.Configuration.TestQueryTab.GetTemplateParametersBody;c.template=Search.Configuration.QueryBuilder.get_$1V();Search.Configuration.TestQueryTab.$3N("GetTemplateParameters",Sys.Serialization.JavaScriptSerializer.serialize(c),Search.Configuration.TestQueryTab.$4D,a)}}};Search.Configuration.TestQueryTab.$4D=function(b){var c=b.get_responseData(),a=null;a=Sys.Serialization.JavaScriptSerializer.deserialize(c).d;Search.Configuration.TestQueryTab.updateTemplateVariables(a,b.get_webRequest().get_userContext())};Search.Configuration.TestQueryTab.$43=function(d){var h=d.get_responseData();if(d.get_statusCode()===200){var f=null;f=Sys.Serialization.JavaScriptSerializer.deserialize(h).d;var a=Search.Configuration.QueryHelperTab.get_useFillIn()?Search.Configuration.QueryBuilder.get_$R()["ec675252-14fa-4fbe-84dd-8d098ed74181"]:Search.Configuration.QueryBuilder.get_$34(),g=null;if(a.QueryTemplateProperties&&a.QueryTemplateProperties.length){g=new Array(a.QueryTemplateProperties.length);for(var e=0;e<a.QueryTemplateProperties.length;e++){var b=a.QueryTemplateProperties[e],c=new Search.Configuration.QueryTemplateProperty;c.Name=b.Name;if(Search.Configuration.QueryBuilder.$4G(b.Name))if(!Srch.U.n(f[b.Name]))c.Value=f[b.Name];else c.NotApplicable=true;else c.Value=b.Value;g[e]=c}}Search.Configuration.TestQueryTab.updateTemplateVariables(g,d.get_webRequest().get_userContext())}else{Srch.U.traceFormatted(null,"ExpandTokenCallback","request failed. status code:{0}, text:{1}",d.get_statusCode(),d.get_statusText());Search.Configuration.TestQueryTab.$3d();Search.Configuration.TestQueryTab.$30();Search.Configuration.QueryBuilderUtility.$6(Search.Configuration.TestQueryTab.get_$S(),Srch.Res.qb_PreviewResult_CouldNotResolveTemplateVariables)}};Search.Configuration.TestQueryTab.$3d=function(){Search.Configuration.QueryBuilderUtility.hide(Search.Configuration.TestQueryTab.get_$2s());Search.Configuration.QueryBuilderUtility.show(Search.Configuration.TestQueryTab.get_$S())};Search.Configuration.TestQueryTab.$30=function(){Search.Configuration.QueryBuilderUtility.removeAllChildren(Search.Configuration.TestQueryTab.get_$S());Search.Configuration.QueryBuilderUtility.$6(Search.Configuration.TestQueryTab.get_$S(),"")};Search.Configuration.TestQueryTab.updateTemplateVariables=function(a,e){Search.Configuration.TestQueryTab.$3d();Search.Configuration.TestQueryTab.$30();if(!a||!a.length)Search.Configuration.QueryBuilderUtility.$6(Search.Configuration.TestQueryTab.get_$S(),Srch.Res.qb_PreviewResult_NoTemplateVariables);else{var b=document.createElement("ul");b.setAttribute("class","ms-noList");for(var f=[],c=0;c<a.length;c++){var d=a[c];if(Srch.U.isInArray(f,d.Name.toLowerCase()))continue;Search.Configuration.TestQueryTab.$3q(d,b);Srch.U.appendArray(f,d.Name.toLowerCase())}Search.Configuration.TestQueryTab.get_$S().appendChild(b)}e&&e()};Search.Configuration.TestQueryTab.$3q=function(b,g){var c=document.createElement("span"),f=Srch.U.getTrimmedString(b.Name,20);Search.Configuration.QueryBuilderUtility.$6(c,"{"+f+"}");c.setAttribute("class","qb-variableLabel qb-marginright3");c.setAttribute("title",b.Name);var e=document.createElement("span");Search.Configuration.QueryBuilderUtility.$6(e,":");e.setAttribute("class","qb-marginright3 ms-floatLeft");var a=document.createElement("input");a.setAttribute("type","text");a.setAttribute("value",!b.Value?"":b.Value);a.setAttribute("class","qb-control");if(b.NotApplicable){a.setAttribute("value",Srch.Res.qb_NotApplicable);Search.Configuration.QueryBuilderUtility.disable(a);a.setAttribute("data-notapplicable",true)}else if(b.IsComplex){a.setAttribute("value",Srch.Res.qb_ComplexObject);Search.Configuration.QueryBuilderUtility.disable(a);a.setAttribute("data-notapplicable",true)}var d=document.createElement("LI");d.appendChild(c);d.appendChild(e);d.appendChild(a);g.appendChild(d)};Search.Configuration.TestQueryTab.switchAdvanced=function(){var a=$get("QueryTemplateDiv"),b=$get("QueryVariablesDiv"),c=$get("RefreshResultsDiv"),d=$get("showAdvancedLink");if(Search.Configuration.QueryBuilderUtility.isHidden(a)){Search.Configuration.QueryBuilderUtility.show(a);Search.Configuration.QueryBuilderUtility.show(b);Search.Configuration.QueryBuilderUtility.show(c);Search.Configuration.QueryBuilderUtility.$6(d,Srch.Res.qb_TestQueryTab_HideAdvanced)}else{Search.Configuration.QueryBuilderUtility.hide(a);Search.Configuration.QueryBuilderUtility.hide(b);Search.Configuration.QueryBuilderUtility.hide(c);Search.Configuration.QueryBuilderUtility.$6(d,Srch.Res.qb_TestQueryTab_ShowAdvanced)}};Search.Configuration.TestQueryTab.prototype={onTabLoad:function(){!Search.Configuration.QueryBuilder.get_$T()&&Search.Configuration.QueryBuilder.updateResult()}};Search.Configuration.TestQueryTab.ExpandTokensBody=function(){};Search.Configuration.TestQueryTab.ExpandTokensBody.prototype={tokens:null};Search.Configuration.TestQueryTab.GetTemplateParametersBody=function(){};Search.Configuration.TestQueryTab.GetTemplateParametersBody.prototype={template:null};Search.Configuration.TestQueryTab.TaxonomyItem=function(){};Search.Configuration.TestQueryTab.TaxonomyItem.prototype={DisplayName:null,DictData:null};Search.Configuration.CatalogItemPicker.registerClass("Search.Configuration.CatalogItemPicker");Search.Configuration.CatalogItemPicker.ItemPickerReturnType.registerClass("Search.Configuration.CatalogItemPicker.ItemPickerReturnType");Search.Configuration.CatalogItemPicker.ItemPickerState.registerClass("Search.Configuration.CatalogItemPicker.ItemPickerState");Search.Configuration.CatalogItemPicker.CatalogItemPickerConfigData.registerClass("Search.Configuration.CatalogItemPicker.CatalogItemPickerConfigData");Search.Configuration.CatalogItemPicker.CatalogItemPickerCatalogData.registerClass("Search.Configuration.CatalogItemPicker.CatalogItemPickerCatalogData");Search.Configuration.CatalogItemPicker.ConfigKeys.registerClass("Search.Configuration.CatalogItemPicker.ConfigKeys");Search.Configuration.ContentBySearch.registerClass("Search.Configuration.ContentBySearch");Search.Configuration.QueryBuilderUtility.registerClass("Search.Configuration.QueryBuilderUtility");Search.Configuration.CustomTab.registerClass("Search.Configuration.CustomTab",Sys.UI.Control);Search.Configuration.RefinerTab.registerClass("Search.Configuration.RefinerTab",Search.Configuration.CustomTab);Search.Configuration.QueryBuilder.registerClass("Search.Configuration.QueryBuilder");Search.Configuration.TokenExpansionData.registerClass("Search.Configuration.TokenExpansionData");Search.Configuration.QueryTemplateProperty.registerClass("Search.Configuration.QueryTemplateProperty");Search.Configuration.QueryBuilderResultSourceData.registerClass("Search.Configuration.QueryBuilderResultSourceData");Search.Configuration.QueryBuilderConfigData.registerClass("Search.Configuration.QueryBuilderConfigData");Search.Configuration.QueryBuilderState.registerClass("Search.Configuration.QueryBuilderState");Search.Configuration.QueryHelperTab.registerClass("Search.Configuration.QueryHelperTab",Search.Configuration.CustomTab);Search.Configuration.Refinement.registerClass("Search.Configuration.Refinement");Search.Configuration.SettingsTab.registerClass("Search.Configuration.SettingsTab",Search.Configuration.CustomTab);Search.Configuration.SortTab.registerClass("Search.Configuration.SortTab",Search.Configuration.CustomTab);Search.Configuration.TestQueryTab.registerClass("Search.Configuration.TestQueryTab",Search.Configuration.CustomTab);Search.Configuration.TestQueryTab.ExpandTokensBody.registerClass("Search.Configuration.TestQueryTab.ExpandTokensBody");Search.Configuration.TestQueryTab.GetTemplateParametersBody.registerClass("Search.Configuration.TestQueryTab.GetTemplateParametersBody");Search.Configuration.TestQueryTab.TaxonomyItem.registerClass("Search.Configuration.TestQueryTab.TaxonomyItem");Search.Configuration.CatalogItemPicker.$9=null;Search.Configuration.CatalogItemPicker.$U=null;Search.Configuration.CatalogItemPicker.$y=null;Search.Configuration.CatalogItemPicker.$3r=null;Search.Configuration.CatalogItemPicker.$1x=null;Search.Configuration.CatalogItemPicker.$I=null;Search.Configuration.CatalogItemPicker.$5=null;Search.Configuration.CatalogItemPicker.ConfigKeys.$1A="CatalogItemValue";Search.Configuration.CatalogItemPicker.ConfigKeys.$1B="CatalogValue";Search.Configuration.CatalogItemPicker.ConfigKeys.$4g="QueryText";Search.Configuration.CatalogItemPicker.ConfigKeys.$2M="QuerySourceId";Search.Configuration.CatalogItemPicker.ConfigKeys.$W="DoNotOverwriteCatalogPath";Search.Configuration.CustomTab.$1K="class";Search.Configuration.CustomTab.$38="ms-displayInline";Search.Configuration.CustomTab.$3I="ms-srchnav-item";Search.Configuration.CustomTab.$3H="ms-srchnav-link";Search.Configuration.CustomTab.$2q="ms-srchnav-link-selected";Search.Configuration.CustomTab.$13=null;Search.Configuration.RefinerTab.$h=Srch.Res.qb_NoCollapseString;Search.Configuration.RefinerTab.$v=Srch.Res.qb_ShowAllCollapseString;Search.Configuration.RefinerTab.$3c=Srch.Res.qb_ShowRefinersOnly;Search.Configuration.RefinerTab.$29=null;Search.Configuration.RefinerTab.$1P=null;Search.Configuration.RefinerTab.$1M=null;Search.Configuration.RefinerTab.$2A=null;Search.Configuration.RefinerTab.$1N=null;Search.Configuration.RefinerTab.$2B=null;Search.Configuration.RefinerTab.$1r=null;Search.Configuration.RefinerTab.$1s=null;Search.Configuration.RefinerTab.$2E=null;Search.Configuration.RefinerTab.$1J=null;Search.Configuration.RefinerTab.$2C=null;Search.Configuration.RefinerTab.$1R=null;Search.Configuration.QueryBuilder.$1y=null;Search.Configuration.QueryBuilder.$5=null;Search.Configuration.QueryBuilder.$19=null;Search.Configuration.QueryBuilder.$0=null;Search.Configuration.QueryBuilder.$1=null;Search.Configuration.QueryBuilder.$q=null;Search.Configuration.QueryBuilder.$2a=null;Search.Configuration.QueryBuilder.$23=null;Search.Configuration.QueryBuilder.$1w=null;Search.Configuration.QueryBuilder.$1z=null;Search.Configuration.QueryBuilder.$1j=null;Search.Configuration.QueryBuilder.$1k=null;Search.Configuration.QueryBuilder.$1p=null;Search.Configuration.QueryBuilder.$1L=null;Search.Configuration.QueryBuilder.$3O=null;Search.Configuration.QueryBuilder.$3Z=null;Search.Configuration.QueryBuilder.$3g=null;Search.Configuration.QueryBuilder.$b=null;Search.Configuration.QueryBuilder.$44=null;Search.Configuration.QueryBuilder.$3j=null;Search.Configuration.QueryBuilder.$2O=null;Search.Configuration.QueryHelperTab.$1q=null;Search.Configuration.QueryHelperTab.$1h=null;Search.Configuration.QueryHelperTab.$1i=null;Search.Configuration.QueryHelperTab.$1u=null;Search.Configuration.QueryHelperTab.$4J=null;Search.Configuration.QueryHelperTab.$2Y=null;Search.Configuration.QueryHelperTab.$2Z=null;Search.Configuration.QueryHelperTab.$2X=null;Search.Configuration.QueryHelperTab.$4p=null;Search.Configuration.QueryHelperTab.$1v=null;Search.Configuration.QueryHelperTab.$1W=null;Search.Configuration.QueryHelperTab.$J=null;Search.Configuration.QueryHelperTab.$3=null;Search.Configuration.QueryHelperTab.$B=null;Search.Configuration.QueryHelperTab.$M=null;Search.Configuration.QueryHelperTab.$A=null;Search.Configuration.QueryHelperTab.$d=null;Search.Configuration.QueryHelperTab.$D=null;Search.Configuration.QueryHelperTab.$u=null;Search.Configuration.QueryHelperTab.$N=null;Search.Configuration.QueryHelperTab.$14=null;Search.Configuration.QueryHelperTab.$22=null;Search.Configuration.QueryHelperTab.$20=null;Search.Configuration.QueryHelperTab.$21=null;Search.Configuration.QueryHelperTab.$X=false;Search.Configuration.QueryHelperTab.$w=null;Search.Configuration.QueryHelperTab.$2G=Srch.Res.qb_UserQuery_ShowAllProperties;Search.Configuration.QueryHelperTab.$s=Srch.Res.qb_UserQuery_ManualValue;Search.Configuration.QueryHelperTab.$3U=Srch.Res.qb_UserQuery_SelectProperty;Search.Configuration.QueryHelperTab.$2F=Srch.Res.qb_UserQuery_SelectValue;Search.Configuration.QueryHelperTab.$40=Srch.Res.qb_UseDefinedSort;Search.Configuration.QueryHelperTab.$2r="ContentType";Search.Configuration.QueryHelperTab.$12=null;Search.Configuration.QueryHelperTab.$1T=null;Search.Configuration.QueryHelperTab.$1I=null;Search.Configuration.Refinement.$k=null;Search.Configuration.SettingsTab.$W="DoNotOverwriteCatalogPath";Search.Configuration.SettingsTab.$2R=null;Search.Configuration.SettingsTab.$2V=null;Search.Configuration.SettingsTab.$2T=null;Search.Configuration.SettingsTab.$25=null;Search.Configuration.SettingsTab.$24=null;Search.Configuration.SettingsTab.$1b=null;Search.Configuration.SettingsTab.$1a=null;Search.Configuration.SettingsTab.$1e=null;Search.Configuration.SettingsTab.$1Z=null;Search.Configuration.SettingsTab.$1c=null;Search.Configuration.SettingsTab.$1X=null;Search.Configuration.SortTab.$2I=null;Search.Configuration.SortTab.$2J=null;Search.Configuration.SortTab.$2L=null;Search.Configuration.SortTab.$2K=null;Search.Configuration.SortTab.$c=null;Search.Configuration.SortTab.$2c=null;Search.Configuration.SortTab.$2b=null;Search.Configuration.SortTab.$1H=null;Search.Configuration.SortTab.$27=null;Search.Configuration.SortTab.$Q=null;Search.Configuration.SortTab.$1E={};Search.Configuration.SortTab.$t=1;Search.Configuration.SortTab.$i=0;Search.Configuration.SortTab.$1U=0;Search.Configuration.TestQueryTab.$26=null;Search.Configuration.TestQueryTab.$28=null;Search.Configuration.TestQueryTab.$1O=null;Search.Configuration.TestQueryTab.$2P=null;Search.Configuration.TestQueryTab.$2Q=null;Search.Configuration.TestQueryTab.$2D=null;Search.Configuration.TestQueryTab.$1f=null;Search.Configuration.TestQueryTab.$4j=null;Search.Configuration.TestQueryTab.$2t="data-termid";Search.Configuration.TestQueryTab.$1G=null;Sys.Application.add_load(Search.Configuration.QueryBuilder.onLoad);function mso_getSlotUIElements(a){mso_ensureSlotsUIData();if($isNull(templateSlotsUIData.slotElements[a])){var b={label:document.getElementById(templateSlotsUIData.slotLabelIdPrefix+a),textBox:document.getElementById(templateSlotsUIData.slotTextBoxIdPrefix+a),slotDiv:document.getElementById(templateSlotsUIData.slotDivIdPrefix+a)};templateSlotsUIData.slotElements[a]=b}return templateSlotsUIData.slotElements[a]}function mso_updateSlotsForTemplateId(a,b){mso_ensureSlotsUIData();if(!$isNull(templatePropMappings)&&!$isNull(templatePropMappings[a])){templateSlotsUIData.currentlySelectedTemplate=a;mso_updateSlots(templatePropMappings[a],b)}}function mso_resetCurrentSlots(){if($isNull(templateSlotsUIData.resetting)||!templateSlotsUIData.resetting){templateSlotsUIData.resetting=true;mso_ensureSlotsUIData();mso_updateSlotsForTemplateId(templateSlotsUIData.currentlySelectedTemplate,false);templateSlotsUIData.resetting=false}}function mso_updateSlots(f,s){mso_ensureSlotsUIData();if($isNull(f))f="";var t=templateSlotsUIData.checkBox;t.checked=s;mso_togglePropertyMappings();var g=Srch.Result.parsePropertyMappingWithSlotDisplayNames(f),a=0,h="",k=false;for(var l in g){var b={name:l,mappings:g[l]};if(a>=templateSlotsUIData.maxSlots)break;var c=mso_getSlotUIElements(a),u=c.label,m=c.textBox,i=c.slotDiv,e=b.name,r=/([^{]+)({(.+)})?/g,d=r.exec(e);if(d!=null&&d.length===4&&!Srch.U.e(d[3]))e=d[3];u.innerHTML=$htmlEncode(e);if(k)h+="#:#";h+=b.name;if(!$isNull(b.mappings)&&Srch.U.isArray(b.mappings)){m.value=b.mappings.join(";");i.style.display=""}else{m.value=templateSlotsUIData.nonSlotMappedPropertyToken;i.style.display="none"}a++;k=true}var p=templateSlotsUIData.slotCountField;p.value=a;var q=templateSlotsUIData.slotNamesField;q.value=h;var n=templateSlotsUIData.selectedPropsField,o=Srch.Result.getSelectedPropertiesFromMappingDictionary(g);n.value=Sys.Serialization.JavaScriptSerializer.serialize(o);for(var j=a;j<templateSlotsUIData.maxSlots;j++){var c=mso_getSlotUIElements(j),i=c.slotDiv;i.style.display="none"}}typeof Sys!="undefined"&&Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded();typeof NotifyScriptLoadedAndExecuteWaitingJobs!="undefined"&&NotifyScriptLoadedAndExecuteWaitingJobs("search.configuration.js")