Type.registerNamespace("Srch");Srch.ContentBySearch=function(a){this.$0_5="path:[Site.URL]";Srch.ContentBySearch.initializeBase(this,[a])};Srch.ContentBySearch.getControlTemplateEncodedNoResultsMessage=function(e){var b=Srch.ContentBySearch.isRollupPage(e),c=Srch.U.loadResource("control_Content_NoResultsDisplayMode"),a=b?Srch.U.loadResource("control_RollupPage_NoResultsDisplayMode"):c,d=Srch.U.isPageInEditMode();if(d&&b)a=c+a;a=String.format(SP.Utilities.HttpUtility.htmlEncode(a),"&nbsp;");if(d)return String.format(SP.Utilities.HttpUtility.htmlEncode(Srch.U.loadResource("control_Content_NoResultsEditMode")),a,"<br/>");return a};Srch.ContentBySearch.isRollupPage=function(a){if(!Srch.U.n(a)&&!Srch.U.e(a.$0_5)){var b=a.$0_5.toLowerCase();return b.indexOf("{term")!==-1||b.indexOf("{topic")!==-1}return false};Srch.ContentBySearch.getPictureMarkup=function(c,b,a,m,f,g,d){if(!Srch.U.n(c)&&!c.isEmpty){var h=Srch.U.getImageSourceWithRendition(c,b,a),e=String.format('onerror="this.parentNode.innerHTML=Srch.ContentBySearch.getNoPictureMarkup({0});" ',a),i=!Srch.U.n(b)&&!isNaN(b),j=!Srch.U.n(a)&&!isNaN(a),k=i&&j&&b===a;if(k)e+=String.format('onload="Srch.ContentBySearch.resizeImageToSquareLength(this, {0});"',b);var l=Srch.U.e(d)?"":String.format('id="{0}"',SP.Utilities.HttpUtility.htmlEncode(d));return String.format('<img src="{0}" class="{1}" alt="{2}" {3} {4} />',h,SP.Utilities.HttpUtility.htmlEncode(f),g.toString(),l,e)}else return Srch.ContentBySearch.getNoPictureMarkup(a)};Srch.ContentBySearch.getNoPictureMarkup=function(a){var b=String.format('<span class="cbs-noImageContainer-ContentWrapper{0}"><span class="cbs-noImageContainer-Content{0}">{1}</span></span>',a>100?"Large":"Small",SP.Utilities.HttpUtility.htmlEncode(Srch.U.loadResource("item_Content_GenericNoImageSymbol")));return String.format('<span class="cbs-noImageContainer ms-fillBoxFull" title="{0}">{1}<span class="ms-tableRow">{2}{3}{2}</span>{4}</span>',SP.Utilities.HttpUtility.htmlEncode(Srch.U.loadResource("item_NoImageMessage")),String.format('<span class="cbs-noImageContainer-Row{0}">&nbsp;</span>',""),'<span class="cbs-noImageContainer-Cell"></span>',b,String.format('<span class="cbs-noImageContainer-Row{0}">&nbsp;</span>',a<=100?"":"Large"))};Srch.ContentBySearch.getIconSourceFromItem=function(a){return Srch.U.getIconUrlByFileExtension(a,SP.Utilities.VersionUtility.getImageUrl("generaldocument.png"))};Srch.ContentBySearch.resizeImageToSquareLength=function(a,b){if(Srch.U.n(b)||isNaN(b)||Srch.U.n(a)||a.tagName!=="IMG"||a.style.visibility==="hidden")return;var c=Srch.U.n(a.naturalWidth)?a.clientWidth:a.naturalWidth,d=Srch.U.n(a.naturalHeight)?a.clientHeight:a.naturalHeight;if(isNaN(c)||isNaN(d))return;if(c<d){a.width=b;Srch.ContentBySearch.$8(a,d,c,b,false)}else if(c>d){a.height=b;Srch.ContentBySearch.$8(a,c,d,b,true)}else a.width=b};Srch.ContentBySearch.$8=function(a,h,d,c,i){if(d!==c){var e=1*c/d,f=Math.round((e*h-c)/2),b=f+"px";if(i){var g=!Srch.U.n(document.body.parentNode)&&document.body.parentNode.dir==="rtl";if(g)a.style.left=b;else a.style.right=b}else a.style.bottom=b;Sys.UI.DomElement.addCssClass(a,"ms-positionRelative")}};Srch.ContentBySearch.prototype={get_numberOfItems:function(){return this.$4_5},set_numberOfItems:function(a){this.$4_5=a;return a},$4_5:3,get_startingItemIndex:function(){return this.$2_5},set_startingItemIndex:function(a){this.$2_5=a;return a},$2_5:1,get_displayStyle:function(){return this.$6_5},set_displayStyle:function(a){this.$6_5=a;return a},$6_5:"",get_propertyMappings:function(){return this.$7_5},set_propertyMappings:function(a){this.$7_5=a;return a},$7_5:"",get_targetResultTable:function(){return this.$5_5},set_targetResultTable:function(a){this.$5_5=a;return a},$5_5:"RelevantResults",get_shouldHideControlWhenEmpty:function(){return this.$1_5},set_shouldHideControlWhenEmpty:function(a){this.$1_5=a;return a},$1_5:true,get_unparsedQueryTemplate:function(){return this.$0_5},set_unparsedQueryTemplate:function(a){this.$0_5=a;return a},getDataProvider:function(){return this.get_dataProvider()},clearLastQueryState:function(){!Srch.U.n(this.get_dataProvider())&&this.get_dataProvider().get_currentQueryState().copyFrom(new Srch.QueryState,0)},processResultReady:function(b){var c=this.$9_5(b);if(!this.shouldRenderControl()&&this.$1_5){this.processDataProviderErrors(this.get_dataProvider());if(!this.hasMessages()){var d=new Srch.ControlMessage(null,0,-1,"HiddenWithNoResultsWarningMessage",Srch.U.loadResource("cc_err_HiddenWithNoResultsWarningMessage"),"","",null,true,false,true),a=[];Srch.U.appendArray(a,d);this.processDataErrorMessages(a)}this.displayControlMessages();this.setControlElementVisibility(false)}else Srch.Result.prototype.processResultReady.call(this,c)},shouldRenderControl:function(){return this.$3_5||!this.$1_5},shouldShowTable:function(a){if(!Srch.U.n(a)){var b=a[Srch.U.PropNames.rowCount];if(!Srch.U.n(b)&&b>0)if(Srch.U.isTableTypeof(a,this.$5_5)){this.set_renderedResult(true);return true}}return false},$3_5:false,$9_5:function(i){this.$3_5=false;var j=Srch.U.copyDictionary(i),a=null;if(!Srch.U.n(i))a=i.ResultTables;if(!Srch.U.n(a)&&a.length>0){for(var f=new Array(a.length),b=0;b<a.length;b++){f[b]=Srch.U.copyDictionary(a[b]);var c=a[b].ResultRows,d=0;if(this.$2_5>1)d=this.$2_5-1;var e=this.$4_5+d;if(c.length<e)e=c.length;var g=e-d;if(g<0)g=0;if(this.shouldShowTable(a[b]))this.$3_5=true;if(Srch.U.n(c)||c.length<e&&!d)continue;for(var k=new Array(g),l=0,h=d;h<e&&h<c.length;h++){k[l]=c[h];l++}f[b].RowCount=g;f[b].ResultRows=k}j.ResultTables=f;return j}else return i}};Srch.ContentBySearch.registerClass("Srch.ContentBySearch",Srch.Result);function search_cbs_initialize(){Srch.ContentBySearch.$A=["WMV","AVI","MPG","ASF","MP4","OGG","OGV","WEBM"]}search_cbs_initialize();RegisterModuleInit("Search.CBS.js",search_cbs_initialize);NotifyScriptLoadedAndExecuteWaitingJobs("Search.CBS.js")