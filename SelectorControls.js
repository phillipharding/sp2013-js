function $_global_selectorcontrols(){ConstImageSelectorType="Image";ConstLinkSelectorType="Link";ConstSuffixEmptyPanelClientID="__EmptyPanel";ConstSuffixAssetSelectedPanelClientID="__AssetSelectedPanel";ConstSuffixDisplaySpanClientID="__DisplaySpan";ConstSuffixValContextID="__ValContext";ConstSuffixInsertAssetButton="____InsertAsset";ConstSuffixClearAssetButton="____ClearAsset";ASO_GlobalObjectDictionary={};AssetSelector.prototype.UpdateRegisteredObject=ASO_UpdateRegisteredObject;AssetSelector.prototype.LaunchPicker=ASO_LaunchPicker;AssetSelector.prototype.SetAssetDataIntoPostbackFields=ASO_SetAssetDataIntoPostbackFields;AssetSelector.prototype.ClearAssetData=ASO_ClearAssetData;AssetSelector.prototype.GetAssetTextInputField=ASO_GetAssetTextInputField;AssetSelector.prototype.GetEmptyPanel=ASO_GetEmptyPanel;AssetSelector.prototype.GetValContext=ASO_GetValContext;AssetSelector.prototype.GetAssetSelectedPanel=ASO_GetAssetSelectedPanel;AssetSelector.prototype.GetDisplaySpan=ASO_GetDisplaySpan;AssetSelector.prototype.GetImageTag=ASO_GetImageTag;AssetSelector.prototype.GetAnchorTag=ASO_GetAnchorTag;AssetSelector.prototype.GetPrimaryHtmlDisplayElement=ASO_GetPrimaryHtmlDisplayElement;AssetSelector.prototype.UpdateButtonsAndPanels=ASO_UpdateButtonsAndPanels;AssetSelector.prototype.InitializeSelectorControl=ASO_InitializeSelectorControl;disabledButtonStyle=" ms-selectorlinkdis";SelectorToolBarButton.prototype.EnableButton=ASTB_EnableButton;SelectorToolBarButton.prototype.DisableButton=ASTB_DisableButton;GlobalLayoutSelectionControlDictionary={};RadioButtonInfo_Options_none=0;RadioButtonInfo_Options_disable_when_not_selected=1;RadioButtonInfo_Options_hide_when_not_selected=2;typeof Sys!="undefined"&&Sys!=null&&Sys.Application!=null&&Sys.Application.notifyScriptLoaded();typeof NotifyScriptLoadedAndExecuteWaitingJobs!="undefined"&&NotifyScriptLoadedAndExecuteWaitingJobs("SelectorControls.js")}function ULSuBa(){var a={};a.ULSTeamName="CMS";a.ULSFileName="SelectorControls.commentedjs";return a}var ConstImageSelectorType,ConstLinkSelectorType,ConstSuffixEmptyPanelClientID,ConstSuffixAssetSelectedPanelClientID,ConstSuffixDisplaySpanClientID,ConstSuffixValContextID,ConstSuffixInsertAssetButton,ConstSuffixClearAssetButton,ASO_GlobalObjectDictionary;function GetAssetSelector(a){a:;return ASO_GlobalObjectDictionary[a]}function ASO_ClickEditAsset(a){a:;return GetAssetSelector(a).LaunchPicker(true)}function ASO_ClickInsertAsset(a){a:;return GetAssetSelector(a).LaunchPicker(true)}function ASO_ClickInsertAssetV4(a){a:;return GetAssetSelector(a).LaunchPicker(true)}function ASO_TransferAssetV4(b){a:;var a=GetAssetSelector(b);a.InitializeSelectorControl();a.SetAssetDataIntoPostbackFields()}function ASO_ClickClearAsset(a){a:;return GetAssetSelector(a).ClearAssetData()}function ASO_InitializeSelectorControl(){a:;var a=this.GetPrimaryHtmlDisplayElement();this.AssetData.PopulateValuesFromElement(a);this.UpdateButtonsAndPanels()}function AssetSelector(e,d,a){a:;this.Config=e;this.AssetData=d;this.SelectorType=a;this.AssetTextInputFieldClientID=this.Config.ClientID;this.EmptyPanelClientID=this.Config.ClientID+ConstSuffixEmptyPanelClientID;this.AssetSelectedPanelClientID=this.Config.ClientID+ConstSuffixAssetSelectedPanelClientID;this.DisplaySpanClientID=this.Config.ClientID+ConstSuffixDisplaySpanClientID;this.ValContextID=this.Config.ClientID+ConstSuffixValContextID;var b=document.getElementById(this.Config.ClientID+ConstSuffixInsertAssetButton);if(b!=null)this.InsertAssetButton=new SelectorToolBarButton(this.Config.ClientID+ConstSuffixInsertAssetButton);var c=document.getElementById(this.Config.ClientID+ConstSuffixClearAssetButton);if(c!=null)this.ClearAssetButton=new SelectorToolBarButton(this.Config.ClientID+ConstSuffixClearAssetButton);if(ConstImageSelectorType!=a){this.AssetData.ManageLinkDisplayText=true;this.AssetData.ManageLinkIcon=true}this.UpdateRegisteredObject();return this}function ASO_GetAssetTextInputField(){a:;return document.getElementById(this.AssetTextInputFieldClientID)}function ASO_GetEmptyPanel(){a:;return document.getElementById(this.EmptyPanelClientID)}function ASO_GetValContext(){a:;return document.getElementById(this.ValContextID)}function ASO_GetAssetSelectedPanel(){a:;return document.getElementById(this.AssetSelectedPanelClientID)}function ASO_GetFirstChildTagOfType(a,d){a:;if(a)for(var b=0;b<a.childNodes.length;b++){if(a.childNodes[b].tagName==d)return a.childNodes[b];var c=ASO_GetFirstChildTagOfType(a.childNodes[b],d);if(null!=c)return c}return null}function ASO_GetDisplaySpan(){a:;return document.getElementById(this.DisplaySpanClientID)}function ASO_GetImageTag(){a:;var c=this.GetAnchorTag(),a=ASO_GetFirstChildTagOfType(c,"IMG");if(null==a){var b=this.GetDisplaySpan();a=ASO_GetFirstChildTagOfType(b,"IMG");if(null==a&&this.SelectorType==ConstImageSelectorType){a=document.createElement("IMG");if(c!=null)c.appendChild(a);else if(b!=null)b.appendChild(a);else return null}}return a}function ASO_GetAnchorTag(){a:;var b=this.GetDisplaySpan(),a=ASO_GetFirstChildTagOfType(b,"A");if(null==a&&this.SelectorType==ConstLinkSelectorType){a=document.createElement("A");b.appendChild(a)}return a}function ASO_GetPrimaryHtmlDisplayElement(){a:;return ConstImageSelectorType==this.SelectorType?this.GetImageTag():this.GetAnchorTag()}function ASO_UpdateRegisteredObject(){a:;ASO_GlobalObjectDictionary[this.Config.ClientID]=this}function ASO_LaunchPicker(b){a:;var a=this.GetPrimaryHtmlDisplayElement();this.AssetData.ManageLinkDisplayText=true;var c=this;this.Config.ReturnCallback=function(){a:;c.SetAssetDataIntoPostbackFields();if(typeof RTE!="undefined"&&a!=null){RTE.Cursor.get_range().moveToNode(a);if(c.SelectorType=="Image")RTE.RteUtility.showRibbonTab(RTE.RibbonIds.imageContextualGroup,RTE.RibbonCommandNames.imageTab);else RTE.RteUtility.showRibbonTab(RTE.RibbonIds.linkContextualGroup,RTE.RibbonCommandNames.linkTab);window.setTimeout(RTE.Cursor.update,0)}};this.AssetData.LaunchModalDialogOnElement(this.Config,a,b,b)}function ASO_SetAssetDataIntoPostbackFields(){a:;this.GetAssetTextInputField().value=this.AssetData.GenerateSeralizedData();this.UpdateButtonsAndPanels()}function ASO_UpdateButtonsAndPanels(){a:;var a=!!this.AssetData.AssetUrl;if(this.SelectorType==ConstLinkSelectorType)a=a&&!!this.AssetData.AssetText;if(a){this.ClearAssetButton!=null&&this.ClearAssetButton.EnableButton();this.GetAssetSelectedPanel().style.display="inline";this.GetEmptyPanel().style.display="none"}else{this.ClearAssetButton!=null&&this.ClearAssetButton.DisableButton();this.GetAssetSelectedPanel().style.display="none";this.GetEmptyPanel().style.display="inline"}}function ASO_ClearAssetData(){a:;this.GetAssetTextInputField().value="";var a=this.GetPrimaryHtmlDisplayElement();if(ConstImageSelectorType==this.SelectorType){this.AssetData=new ImageAsset("");this.AssetData.SetValuesIntoElement(a,this.Config);var b=this.GetAnchorTag();b!=null&&b.removeAttribute("href",0);a.removeAttribute("src",0);a.removeAttribute("height",0);a.removeAttribute("width",0);a.style.height="";a.style.width=""}else{this.AssetData=new LinkAsset("");this.AssetData.SetValuesIntoElement(a,this.Config);a.removeAttribute("href",0);a.innerHTML=""}this.UpdateButtonsAndPanels()}function SelectorToolBarButton(b){a:;this.ClientID=b;this.buttonAnchorElement=document.getElementById(this.ClientID);this.buttonAnchorLinkElement=document.getElementById(this.ClientID+"_LINK");this.CachedOnClickHandler=document.getElementById(this.ClientID).onclick;this.CachedHref=document.getElementById(this.ClientID).href;if(this.buttonAnchorElement){var a=this.buttonAnchorElement.getElementsByTagName("IMG");if(a&&a.length>0)this.buttonImage=a[0]}return this}var disabledButtonStyle;function ASTB_EnableButton(){a:;if(typeof this.CachedOnClickHandler=="function"){this.buttonAnchorElement.onclick=this.CachedOnClickHandler;this.buttonAnchorLinkElement.onclick=this.CachedOnClickHandler;this.buttonAnchorElement.href=this.CachedHref;this.buttonAnchorLinkElement.href=this.CachedHref}var a=this.buttonAnchorElement.parentNode.className,b=new RegExp(disabledButtonStyle,"ig");a=a.replace(b,"");this.buttonAnchorElement.parentNode.className=a}function ASTB_DisableButton(){a:;this.buttonAnchorElement.onclick=ASTB_EmptyOnClick;this.buttonAnchorLinkElement.onclick=ASTB_EmptyOnClick;this.buttonAnchorElement.removeAttribute("href",0);this.buttonAnchorLinkElement.removeAttribute("href",0);this.buttonAnchorElement.parentNode.className=this.buttonAnchorElement.parentNode.className+disabledButtonStyle}function ASTB_EmptyOnClick(){a:;return false}function traverseElementTree(b,e,h,d){a:;var g=d(b,h),a=e(b,g);if(a!=null)return a;for(var f=b.childNodes,c=0;c<f.length;c++){a=traverseElementTree(f.item(c),e,g,d);if(a!=null)return a}return null}function identityFunction(b,a){a:;return a}function getElementById(b,c){a:;var a=function(a,b){a:;return a.id==b?a:null};return traverseElementTree(b,a,c,identityFunction)}function LayoutInfo(c,b,a){a:;this.name=c;this.description=b;this.previewImageUrl=a}function setSrcAttribute(a,b){a:;a.src=b}function setInnerHTML(a,b){a:;a.innerHTML=b}var GlobalLayoutSelectionControlDictionary;function LayoutSelectionControl(i,h,e,b,a,g,d,c,f){a:;this.layoutInfos=i;this.onNameChanged=h;this.onDescriptionChanged=e;this.onPreviewImageUrlChanged=b;this.containerId=a;this.dropDownListId=f;this.nameElementId=g;this.descriptionElementId=d;this.previewImageElementId=c;this.OnSelectionChanged=LayoutSelectionControl_OnSelectionChanged;this.Update=LayoutSelectionControl_Update;this.OnInit=LayoutSelectionControl_OnInit;this.DropDownList=LayoutSelectionControl_DropDownList;GlobalLayoutSelectionControlDictionary[a]=this}function LayoutSelectionControl_DropDownList(){a:;var a=document.getElementById(this.containerId),b=getElementById(a,this.dropDownListId);return b}function LayoutSelectionControl_OnSelectionChanged(a){a:;var b=this.layoutInfos[a.selectedIndex];this.Update(b)}function LayoutSelectionControl_OnInit(a){a:;var b=this.layoutInfos[a];this.Update(b)}function LayoutSelectionControl_Update(a){a:;var b=document.getElementById(this.containerId),d=getElementById(b,this.descriptionElementId),c=getElementById(b,this.previewImageElementId),e=getElementById(b,this.nameElementId);if(this.onNameChanged!=null&&e!=null)this.onNameChanged(e,a.name);if(this.onDescriptionChanged!=null&&d!=null)this.onDescriptionChanged(d,a.description);if(this.onPreviewImageUrlChanged!=null&&c!=null)this.onPreviewImageUrlChanged(c,a.previewImageUrl)}function SetDisableAttribute(a,b){a:;try{if(b&&a.setAttribute)a.setAttribute("disabled",true);else!b&&a.removeAttribute&&a.removeAttribute("disabled")}catch(c){}}function DetermineDisabledStatus(b,a){a:;return a==false&&b.className=="ms-selectorcontrol-alwaysdisabled"?true:a}function SetDisableAttributeDeep(b,a){a:;traverseElementTree(b,SetDisableAttribute,a,DetermineDisabledStatus)}function SetDisplayStyle(a,b){a:;if(a.style!=null)a.style.display=b}function SetDisplayStyleDeep(b,a){a:;traverseElementTree(b,SetDisplayStyle,a,identityFunction)}var RadioButtonInfo_Options_none,RadioButtonInfo_Options_disable_when_not_selected,RadioButtonInfo_Options_hide_when_not_selected;function RadioButtonInfo(b,a,c){a:;this.radioButtonId=b;this.associatedPanelId=a;this.options=c}function RadioGroupWithAssociatedPanels(a){this.radioButtonInfos=a;this.oldSelectedIndex=-1;this.OnClicked=RadioGroupWithAssociatedPanels_OnClicked;this.UpdatePanel=RadioGroupWithAssociatedPanels_UpdatePanel;this.OnInit=RadioGroupWithAssociatedPanels_OnInit;this.AddButtonInfo=RadioGroupWithAssociatedPanels_AddButtonInfo}function RadioGroupWithAssociatedPanels_AddButtonInfo(a){a:;this.radioButtonInfos[this.radioButtonInfos.length]=a}function RadioGroupWithAssociatedPanels_UpdatePanel(index){a:;if(index>=0){var buttonInfo=this.radioButtonInfos[index],button=document.getElementById(buttonInfo.radioButtonId),panel=document.getElementById(buttonInfo.associatedPanelId);if(panel!=null){(buttonInfo.options&RadioButtonInfo_Options_disable_when_not_selected)!=0&&SetDisableAttributeDeep(panel,!button.checked);if((buttonInfo.options&RadioButtonInfo_Options_hide_when_not_selected)!=0){var value=button.checked?"":"none";SetDisplayStyle(panel,value)}var onUpdatePanelHandler=button.parentNode.getAttribute("onupdatepanel");if(onUpdatePanelHandler!=null&&onUpdatePanelHandler!="")eval(onUpdatePanelHandler+"()")}}}function RadioGroupWithAssociatedPanels_OnInit(){a:;for(var a=0;a<this.radioButtonInfos.length;a++){var c=this.radioButtonInfos[a],b=document.getElementById(c.radioButtonId);if(b.checked)this.oldSelectedIndex=a;this.UpdatePanel(a)}}function RadioGroupWithAssociatedPanels_OnClicked(){a:;for(var a=0;a<this.radioButtonInfos.length;a++){var c=this.radioButtonInfos[a],b=document.getElementById(c.radioButtonId);if(b.checked)break}if(a!=this.oldSelectedIndex){this.UpdatePanel(this.oldSelectedIndex);this.UpdatePanel(a);this.oldSelectedIndex=a}}$_global_selectorcontrols();