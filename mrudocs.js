function $_global_mrudocs(){(function(){var a={};a.Templates={};a.Templates.Header=RenderMruDocsHeader;a.Templates.Body=RenderMruDocsBody;a.Templates.Footer=RenderMruDocsFooter;a.BaseViewID=2;a.ListTemplateType=200;typeof SPClientTemplates!="undefined"&&SPClientTemplates.TemplateManager.RegisterTemplateOverrides(a)})();g_mruDocsRetryCount=0;typeof NotifyScriptLoadedAndExecuteWaitingJobs=="function"&&NotifyScriptLoadedAndExecuteWaitingJobs("mrudocs.js")}function RenderMruDocsHeader(){return"<div class='ms-mrudocs-separator'></div><div id='mrudocsHeader' class='ms-mrudocs-webpartheader'>"+STSHtmlEncode(Strings.STS.L_MruDocs_WebpartTitle)+"</div>"}function RenderMruDocsFooter(a){return a.CountOfItems<=5?"":a.NumberOfItemsToDisplayMax<a.RecentDocsMax?"<div id='mrudocsFooter' class='ms-mrudocs-webpartfooter'><a class='ms-commandLink' onclick='ToggleNumberOfItemsToDisplay("+a.RecentDocsMax+")' href='#'>"+STSHtmlEncode(Strings.STS.L_ShowMoreItems)+"</a></div>":a.NumberOfItemsToDisplayMax==a.RecentDocsMax?"<div id='mrudocsFooter' class='ms-mrudocs-webpartfooter'><a class='ms-commandLink' onclick='ToggleNumberOfItemsToDisplay(5)' href='#'>"+STSHtmlEncode(Strings.STS.L_ShowFewerItems)+"</a></div>":""}var g_mruDocsDataFetched,g_mruDocsWPQualifier,g_mruDocsRetryCount;function ToggleNumberOfItemsToDisplay(b){var a=g_ctxDict["ctx"+g_mruDocsWPQualifier];a.NumberOfItemsToDisplayMax=b;RenderListView(a,a.wpq,null,false)}function MruDocsReceiveData(a){if(isDefinedAndNotNullOrEmpty(a)){g_mruDocsDataFetched=true;CacheMruDocsItems(a);ReRenderMruDocsWebpart(a)}else{g_mruDocsRetryCount++;if(g_mruDocsRetryCount<3)setTimeout("FetchMruDocsDataFromServer( null, null)",1e3*g_mruDocsRetryCount);else{g_mruDocsDataFetched=true;ReRenderMruDocsWebpart(null)}}}function ReRenderMruDocsWebpart(listData){var renderDocListContext=g_ctxDict["ctx"+g_mruDocsWPQualifier];if(!IsNullOrUndefined(listData))renderDocListContext.ListData=eval("("+listData+")");RenderListView(renderDocListContext,renderDocListContext.wpq,null,false)}function MruDocsFetchDataError(){RenderEmptyOrErrorBody()}function RenderMruDocsBody(a){var b=a.NumberOfItemsToDisplayMax;if(g_mruDocsDataFetched)if(!IsNullOrUndefined(a.ListData)){var e=a.ListData.Row;a.CountOfItems=e.length;return RenderMruDocsAllItems(e,b)}else{a.CountOfItems=0;return RenderEmptyOrErrorBody()}else{g_mruDocsWPQualifier=a.wpq;var c=GetMruDocsItemsFromCache(a.LocalStorageCacheTTL);if(IsNullOrUndefined(c)){_spBodyOnLoadFunctionNames.push("FetchMruDocsDataFromServer");a.CountOfItems=0;return RenderLoadingBody()}else{var d=c.Row;a.CountOfItems=d.length;return RenderMruDocsAllItems(d,b)}}}function RenderMruDocsAllItems(e,a){var f=[],c=e.length;if(c==0)return RenderEmptyOrErrorBody();else if(c<a)a=c;for(var d=0;d<a;d++){var g=RenderDocumentListItem(e[d]);f.push(g)}var b="<div id='docListContainer' class='ms-mrudocs-webpartbody'>";b+=f.join("");b+="</div>";return b}function RenderDocumentListItem(b){var d=STSHtmlEncode(b.FileName),c=STSHtmlEncode(b.LinkLocation),e=b.IsPinned=="True",f=b.IconUrl,a;a="<div class='ms-mrudocs-itemscontainer'>";a+="<div>";a+="<div class='ms-displayInlineBlock ms-mrudocs-documenticon' ><img src='"+f+"'></div>";a+="<div  class='ms-displayInlineBlock ms-textSmall ms-noWrap ms-mrudocs-documentname' title='"+d+"&#10;"+c+"'><a class='ms-listlink' href='"+c+"'>"+d+"</a></div>";if(e){a+="<div class='ms-displayInlineBlock ms-mrudocs-pinnedicon-container'>";a+="<img class='ms-mrudocs-pinnedicon' src='/_layouts/15/images/spcommon.png'>";a+="</div>"}a+="</div>";a+="</div>";return a}function GetCurrentUserId(){var a=null;if(_spPageContextInfo!=null)a=_spPageContextInfo.systemUserKey;return a}function GetMruDocsItemsFromCache(localStorageCacheTTL){var docItemsJson=null,docItemsJsonIsStale=true;if(!IsNullOrUndefined(window.localStorage))if(GetCurrentUserId()==window.localStorage.SPMruDocsItemsUserId){docItemsJson=window.localStorage.SPMruDocsItemsJson;var docItemsDate=Date.parse(window.localStorage.SPMruDocsItemsDate);docItemsJsonIsStale=!(docItemsDate>0)||+new Date-docItemsDate>localStorageCacheTTL*1e3}if(docItemsJsonIsStale){ClearMruDocsItemsCache();return null}else return eval("("+docItemsJson+")")}function RenderLoadingBody(){var a;a="<div class='ms-mrudocs-webpartbody ms-mrudocs-itemscontainer'>";a+="<div class='ms-displayInlineBlock ms-mrudocs-documenticon'><img src='/_layouts/15/images/loadingcirclests16.gif'></div>";a+="<div class='ms-displayInlineBlock ms-metadata ms-mrudocs-loadingmessage'>";a+=STSHtmlEncode(Strings.STS.L_Loading_Text);a+="</div></div>";return a}function RenderEmptyOrErrorBody(){var a;a="<div class='ms-mrudocs-webpartbody ms-mrudocs-itemscontainer'>";a+="<div class='ms-displayInlineBlock ms-metadata'>";a+=STSHtmlEncode(Strings.STS.L_MruDocs_ErrorMessage);a+="</div></div>";return a}function CacheMruDocsItems(a){try{JSON.parse(a)}catch(b){return false}if(!IsNullOrUndefined(window.localStorage)){TrySetProperty(window.localStorage,"SPMruDocsItemsJson",a);TrySetProperty(window.localStorage,"SPMruDocsItemsDate",new Date);TrySetProperty(window.localStorage,"SPMruDocsItemsUserId",GetCurrentUserId());return true}return false}function ClearMruDocsItemsCache(){if(!IsNullOrUndefined(window.localStorage)){window.localStorage.removeItem("SPMruDocsItemsJson");window.localStorage.removeItem("SPMruDocsItemsDate");window.localStorage.removeItem("SPMruDocsItemsUserId")}}$_global_mrudocs();