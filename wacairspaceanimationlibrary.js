var WacAnimation={};function WacCurve(b,a,c,e,d,f){this.ID=b;this.type=a;this.x1=c;this.y1=e;this.x2=d;this.y2=f}var WacCurveType={Instant:0,Hold:1,Linear:2,CubicBezier:3},WacCurveID={Instant:0,Hold:1,Linear:2,ShotgunToPillowLanding:3,EaseIn:4,EaseOut:5,EaseInOut:6,Exponential:7},g_AnimationCurves=new Array(8);g_AnimationCurves[WacCurveID.Instant]=new WacCurve(WacCurveID.Instant,WacCurveType.Instant,0,0,0,0);g_AnimationCurves[WacCurveID.Hold]=new WacCurve(WacCurveID.Hold,WacCurveType.Hold,0,0,0,0);g_AnimationCurves[WacCurveID.Linear]=new WacCurve(WacCurveID.Linear,WacCurveType.Linear,0,0,0,0);g_AnimationCurves[WacCurveID.ShotgunToPillowLanding]=new WacCurve(WacCurveID.ShotgunToPillowLanding,WacCurveType.CubicBezier,.1,.9,.2,1);g_AnimationCurves[WacCurveID.EaseIn]=new WacCurve(WacCurveID.EaseIn,WacCurveType.CubicBezier,.83,0,1,1);g_AnimationCurves[WacCurveID.EaseOut]=new WacCurve(WacCurveID.EaseOut,WacCurveType.CubicBezier,0,0,.58,1);g_AnimationCurves[WacCurveID.EaseInOut]=new WacCurve(WacCurveID.EaseInOut,WacCurveType.CubicBezier,.42,0,.58,1);g_AnimationCurves[WacCurveID.Exponential]=new WacCurve(WacCurveID.Exponential,WacCurveType.CubicBezier,.1,.25,.75,.9);function WacIntWrapper(b,a){this.value=b;this.contextId=a}WacKeyFrame.prototype={type:0,curveID:0,startTime:new WacIntWrapper(0,null),endTime:new WacIntWrapper(0,null),startValue:new WacIntWrapper(0,null),endValue:new WacIntWrapper(0,null),relativeTo:0,operationType:0};function WacKeyFrame(h,g,a,c,b,d,f,e){this.type=h;this.curveID=g;this.startTime=a==null||a.value==undefined?new WacIntWrapper(a,null):a;this.endTime=c==null||c.value==undefined?new WacIntWrapper(c,null):c;this.startValue=b==null||b.value==undefined?new WacIntWrapper(b,null):b;this.endValue=d==null||d.value==undefined?new WacIntWrapper(d,null):d;this.relativeTo=f;this.operationType=e}var g_numAnimationAttributes=8;WacAnimation.Attribute={PositionX:1,PositionY:2,Height:3,Width:4,Opacity:5,ScrollTop:6,ScrollLeft:7,RotateZ:8};var AnimRelativeTo={Initial:0,Final:1,Absolute:2},WacKeyframeType={Mult:0,Add:1};WacAnimation.ContextID={};var g_AnimationContextVariables=new Array(0);WacAnimation.ContextVariableManager=WacAnimation_ContextVariableManager;function WacAnimation_ContextVariableManager(){}WacAnimation_ContextVariableManager.prototype={};WacAnimation_ContextVariableManager.prototype.SetContextVariable=function(b,a){var c=WacAnimation.ContextID[b];g_AnimationContextVariables[c].value=a};function WacAnim(a,b){this.ID=a;this.keyFrames=b}WacAnimation.ID={BASIC_QUICKESTSHOW:0,BASIC_QUICKMOVE:1,BASIC_QUICKSIZE:2,BASIC_QUICKFADE:3,BASIC_QUICKSHOW:4,BASIC_QUICKHIDE:5,BASIC_MOVE:6,BASIC_SIZE:7,BASIC_FADE:8,BASIC_SHOW:9,BASIC_HIDE:10,BASIC_SCROLL:11,BASIC_SLOWMOVE:12,BASIC_SLOWSIZE:13,BASIC_SLOWFADE:14,BASIC_SLOWSHOW:15,TAB_MOVE:16,TAB_SLIDEINFADEINBOTTOM:17,BASIC_INSTANTFADE:18,DELAY_SHOW:19,DELAY_MOVE:20,WAC_RIBBONMOVE:21,WAC_RIBBONSHOW:22,WAC_RIBBONHIDE:23};var g_WacAnimations=new Array(24);g_WacAnimations[WacAnimation.ID.BASIC_QUICKESTSHOW]=new WacAnim(WacAnimation.ID.BASIC_QUICKESTSHOW,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,0,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Mult),new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,50,null,1,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.BASIC_QUICKMOVE]=new WacAnim(WacAnimation.ID.BASIC_QUICKMOVE,[new WacKeyFrame(WacAnimation.Attribute.PositionX,WacCurveID.ShotgunToPillowLanding,0,167,null,0,AnimRelativeTo.Final,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.PositionY,WacCurveID.ShotgunToPillowLanding,0,167,null,0,AnimRelativeTo.Final,WacKeyframeType.Add)]);g_WacAnimations[WacAnimation.ID.BASIC_QUICKSIZE]=new WacAnim(WacAnimation.ID.BASIC_QUICKSIZE,[new WacKeyFrame(WacAnimation.Attribute.Height,WacCurveID.ShotgunToPillowLanding,0,167,null,0,AnimRelativeTo.Final,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.Width,WacCurveID.ShotgunToPillowLanding,0,167,null,0,AnimRelativeTo.Final,WacKeyframeType.Add)]);g_WacAnimations[WacAnimation.ID.BASIC_QUICKFADE]=new WacAnim(WacAnimation.ID.BASIC_QUICKFADE,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,167,null,1,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.BASIC_QUICKSHOW]=new WacAnim(WacAnimation.ID.BASIC_QUICKSHOW,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,0,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Mult),new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,167,null,1,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.BASIC_QUICKHIDE]=new WacAnim(WacAnimation.ID.BASIC_QUICKHIDE,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,167,null,0,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.BASIC_MOVE]=new WacAnim(WacAnimation.ID.BASIC_MOVE,[new WacKeyFrame(WacAnimation.Attribute.PositionX,WacCurveID.ShotgunToPillowLanding,0,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.PositionY,WacCurveID.ShotgunToPillowLanding,0,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Add)]);g_WacAnimations[WacAnimation.ID.BASIC_SIZE]=new WacAnim(WacAnimation.ID.BASIC_SIZE,[new WacKeyFrame(WacAnimation.Attribute.Height,WacCurveID.ShotgunToPillowLanding,0,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.Width,WacCurveID.ShotgunToPillowLanding,0,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Add)]);g_WacAnimations[WacAnimation.ID.BASIC_FADE]=new WacAnim(WacAnimation.ID.BASIC_FADE,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,367,null,1,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.BASIC_SHOW]=new WacAnim(WacAnimation.ID.BASIC_SHOW,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,0,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Mult),new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,367,null,1,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.BASIC_HIDE]=new WacAnim(WacAnimation.ID.BASIC_HIDE,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.BASIC_SCROLL]=new WacAnim(WacAnimation.ID.BASIC_SCROLL,[new WacKeyFrame(WacAnimation.Attribute.ScrollTop,WacCurveID.ShotgunToPillowLanding,0,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.ScrollLeft,WacCurveID.ShotgunToPillowLanding,0,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Add)]);g_WacAnimations[WacAnimation.ID.BASIC_SLOWMOVE]=new WacAnim(WacAnimation.ID.BASIC_SLOWMOVE,[new WacKeyFrame(WacAnimation.Attribute.PositionX,WacCurveID.ShotgunToPillowLanding,0,750,null,0,AnimRelativeTo.Final,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.PositionY,WacCurveID.ShotgunToPillowLanding,0,750,null,0,AnimRelativeTo.Final,WacKeyframeType.Add)]);g_WacAnimations[WacAnimation.ID.BASIC_SLOWSIZE]=new WacAnim(WacAnimation.ID.BASIC_SLOWSIZE,[new WacKeyFrame(WacAnimation.Attribute.Height,WacCurveID.ShotgunToPillowLanding,0,750,null,0,AnimRelativeTo.Final,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.Width,WacCurveID.ShotgunToPillowLanding,0,750,null,0,AnimRelativeTo.Final,WacKeyframeType.Add)]);g_WacAnimations[WacAnimation.ID.BASIC_SLOWFADE]=new WacAnim(WacAnimation.ID.BASIC_SLOWFADE,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,750,null,1,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.BASIC_SLOWSHOW]=new WacAnim(WacAnimation.ID.BASIC_SLOWSHOW,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,0,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Mult),new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,750,null,1,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.TAB_MOVE]=new WacAnim(WacAnimation.ID.TAB_MOVE,[new WacKeyFrame(WacAnimation.Attribute.PositionX,WacCurveID.ShotgunToPillowLanding,0,433,null,0,AnimRelativeTo.Final,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.PositionY,WacCurveID.ShotgunToPillowLanding,0,433,null,0,AnimRelativeTo.Final,WacKeyframeType.Add)]);g_WacAnimations[WacAnimation.ID.TAB_SLIDEINFADEINBOTTOM]=new WacAnim(WacAnimation.ID.TAB_SLIDEINFADEINBOTTOM,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,0,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Mult),new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,50,null,1,AnimRelativeTo.Final,WacKeyframeType.Mult),new WacKeyFrame(WacAnimation.Attribute.PositionY,WacCurveID.ShotgunToPillowLanding,0,0,null,40,AnimRelativeTo.Final,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.PositionY,WacCurveID.ShotgunToPillowLanding,0,167,null,0,AnimRelativeTo.Final,WacKeyframeType.Add)]);g_WacAnimations[WacAnimation.ID.BASIC_INSTANTFADE]=new WacAnim(WacAnimation.ID.BASIC_INSTANTFADE,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Instant,0,0,null,1,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.DELAY_SHOW]=new WacAnim(WacAnimation.ID.DELAY_SHOW,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,0,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Mult),new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,200,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Mult),new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.ShotgunToPillowLanding,201,500,null,1,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.DELAY_MOVE]=new WacAnim(WacAnimation.ID.DELAY_MOVE,[new WacKeyFrame(WacAnimation.Attribute.PositionX,WacCurveID.Linear,0,0,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.PositionY,WacCurveID.Linear,0,0,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.PositionX,WacCurveID.Linear,0,200,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.PositionY,WacCurveID.Linear,0,200,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.PositionX,WacCurveID.ShotgunToPillowLanding,201,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.PositionY,WacCurveID.ShotgunToPillowLanding,201,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Add)]);g_WacAnimations[WacAnimation.ID.WAC_RIBBONMOVE]=new WacAnim(WacAnimation.ID.WAC_RIBBONMOVE,[new WacKeyFrame(WacAnimation.Attribute.PositionX,WacCurveID.ShotgunToPillowLanding,0,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Add),new WacKeyFrame(WacAnimation.Attribute.PositionY,WacCurveID.ShotgunToPillowLanding,0,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Add)]);g_WacAnimations[WacAnimation.ID.WAC_RIBBONSHOW]=new WacAnim(WacAnimation.ID.WAC_RIBBONSHOW,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,0,null,0,AnimRelativeTo.Absolute,WacKeyframeType.Mult),new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,367,null,1,AnimRelativeTo.Final,WacKeyframeType.Mult)]);g_WacAnimations[WacAnimation.ID.WAC_RIBBONHIDE]=new WacAnim(WacAnimation.ID.WAC_RIBBONHIDE,[new WacKeyFrame(WacAnimation.Attribute.Opacity,WacCurveID.Linear,0,367,null,0,AnimRelativeTo.Final,WacKeyframeType.Mult)]);var g_WacAnimationEngine=null,g_WacAnimationLogging=window.location.search.indexOf("AnimationLogging=1")!=-1,g_WacAnimationThrottleFPS=0,g_WacAnimationThrottleNumInstance=3;window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,16)}}();WacAnimation.State=WacAnimation_State;WacAnimation.Object=WacAnimation_Object;function WacAnimationEngine(){this.AnimationQueue=new Array(0);this.sharedTimer=null;this.sharedCancelTimer=null;this.resetInterval=5e3;this.sharedTimerRefs=0;this.conflictTable=new Array(0);this.currentAnimationIndex=-1;this.temporaryIDGenerator=0}WacAnimationEngine.prototype={AnimationQueue:new Array(0),sharedTimer:null,sharedCancelTimer:null,resetInterval:5e3,sharedTimerRefs:0,conflictTable:new Array(0),currentAnimationIndex:-1,temporaryIDGenerator:0};WacAnimationEngine.prototype.LocalStepper=function(){g_WacAnimationEngine.StepAllAnimations()};WacAnimationEngine.prototype.LocalStopper=function(){g_WacAnimationEngine.StepAllAnimations();g_WacAnimationEngine.StopEngine()};WacAnimationEngine.prototype.StartEngine=function(){if(this.sharedTimer!=null||this.sharedCancelTimer!=null||this.sharedTimerRefs!=0)return;this.sharedTimer=window.requestAnimationFrame(WacAnimationEngine.prototype.LocalStepper);g_WacAnimationEngine.StartCancelTimer();this.sharedTimerRefs=0;g_WacAnimationTelemetry.Start()};WacAnimationEngine.prototype.StopEngine=function(){g_WacAnimationTelemetry.Stop();g_WacAnimationEngine.StopCancelTimer();if(this.sharedTimer!=null)this.sharedTimer=null;this.sharedTimerRefs=0;this.conflictTable=new Array(0);this.AnimationQueue=new Array(0)};WacAnimationEngine.prototype.StartAnimation=function(a){this.AnimationQueue[this.sharedTimerRefs++]=a};WacAnimationEngine.prototype.StopAnimation=function(b){for(var a=0;a<this.AnimationQueue.length;a++)if(this.AnimationQueue[a]==b){this.RemoveTemporaryIds(b);this.AnimationQueue[a]=null}};WacAnimationEngine.prototype.StepAllAnimations=function(){var c=false,b=null;g_WacAnimationEngine.StopCancelTimer();for(var a=0;a<this.AnimationQueue.length;a++)if(this.AnimationQueue[a]!=null){if(IsNullOrUndef(b))b=this.AnimationQueue[a].currentTime;this.currentAnimationIndex=a;this.AnimationQueue[a].StepAnimation();c=true}this.currentAnimationIndex=-1;c&&!IsNullOrUndef(b)&&g_WacAnimationTelemetry.AddPerfData(new Date-b);if(c){g_WacAnimationEngine.StartCancelTimer();window.requestAnimationFrame(WacAnimationEngine.prototype.LocalStepper)}else this.StopEngine()};WacAnimationEngine.prototype.CheckForConflictingAnimations=function(d,h){if(d.id==null||d.id==""){var k="tempAnimID_"+String(this.temporaryIDGenerator);this.temporaryIDGenerator++;d.id=k}var i=d.id+"_"+String(h),c=this.conflictTable[i];if(IsNullOrUndef(c)||c==this.currentAnimationIndex||this.AnimationQueue[c]==null)this.conflictTable[i]=this.currentAnimationIndex;else{var a=this.AnimationQueue[c];a.curveID.SetAttribute(h,null);if(a.finishFunc!=null){var b=this.AnimationQueue[this.currentAnimationIndex],e=a.finishFunc,g=a.extraData,f=b.finishFunc,j=b.extraData;b.finishFunc=f==null?function(){e(g)}:function(){e(g);f(j)};b.extraData=null;a.finishFunc=null}}};WacAnimationEngine.prototype.RemoveTemporaryIds=function(b){var a;if(IsArrayCheck(b.element))for(var d=b.element.length,c=0;c<d;c++){a=b.element[c];if(a.id.indexOf("tempAnimID_")==0)a.id==null}else{a=b.element;if(a.id.indexOf("tempAnimID_")==0)a.id==null}};WacAnimationEngine.prototype.StopCancelTimer=function(){if(this.sharedCancelTimer!=null){window.clearTimeout(this.sharedCancelTimer);this.sharedCancelTimer=null}};WacAnimationEngine.prototype.StartCancelTimer=function(){this.sharedCancelTimer=window.setTimeout(WacAnimationEngine.prototype.LocalStopper,this.resetInterval)};var g_WacRadix=10;function WacAnimation_State(){this.Index=0;this.Data=new Array(0);this.AnimateRight=false}WacAnimation_State.prototype={Index:0,Data:new Array(0),AnimateRight:false};WacAnimation_State.prototype.SetAttribute=function(a,b){var c=this.GetDataIndex(a);if(c==-1){var d=this.Data.length;this.Index+=a*Math.pow(g_WacRadix,d);this.Data[d]=b}else this.Data[c]=b};WacAnimation_State.prototype.GetAttribute=function(b){var a=this.GetDataIndex(b);return a==-1?null:this.Data[a]};WacAnimation_State.prototype.GetDataIndex=function(c){var b=0,a=this.Index;while(a!=0){var d=a%g_WacRadix;if(d==c)return b;a=Math.floor(a/g_WacRadix);b++}return-1};WacAnimation_State.prototype.SetAnimateRight=function(a){this.AnimateRight=a};WacAnimation_Object.prototype={animationID:-1,delay:0,element:null,finalState:null,finishFunc:null,extraData:null,arrAnimationUnits:null,idxAnimUnit:0,cachedContextVariables:null};function WacAnimation_Object(a,f,e,b,c,d){this.Initialize(a,f,e,b,c,d)}WacAnimation_Object.prototype.Initialize=function(a,f,e,b,c,d){this.animationID=a;this.delay=f;this.element=e;this.finalState=b;this.finishFunc=c;this.extraData=d;this.arrAnimationUnits=new Array(0);this.idxAnimUnit=0;this.cachedContextVariables=g_AnimationContextVariables};WacAnimation_Object.prototype.GetIntWrapperValue=function(a){return a.contextId==null?a.value:this.cachedContextVariables[a.contextId].value};WacAnimation_Object.prototype.RunAnimation=function(){if(this.animationID!=-1&&this.element!=null){this.GenerateAnimationUnits();for(var b=this.arrAnimationUnits.length,a=0;a<b;a++)this.arrAnimationUnits[a].StartAnimation()}};WacAnimation_Object.prototype.AdvanceToFinalState=function(g,d){for(var c=new WacAnimation_State,j=d.keyFrames.length,b=0;b<j;b++){var e=d.keyFrames[b];c.SetAttribute(e.type,this.GetFinalValue(e,g))}for(var i=g_numAnimationAttributes,f=IsArrayCheck(this.element)?this.element[g]:this.element,a=1;a<=i;a++){var h=c.GetAttribute(a);if(h!=null){var k=new WacAnimationUnit(f,0,0,null,null,this.finalState.AnimateRight);k.SetStyle(a,f,h)}}};WacAnimation_Object.prototype.GenerateAnimationUnits=function(){for(var i=g_WacAnimations[this.animationID],e=null,j=i.keyFrames.length,c=null,h=0;h<j;h++){var a=i.keyFrames[h],f=this.FindMatchingAnimationUnit(a),d,g;if(f!=null){f.startValue.SetAttribute(a.type,this.GetIntWrapperValue(a.startValue));f.curveID.SetAttribute(a.type,a.curveID);if(IsArrayCheck(this.element)){g=this.element.length;for(d=0;d<g;d++){c=this.GetFinalValue(a,d);if(IsNullOrUndef(c)){f.curveID.SetAttribute(a.type,null);break}else f.targetValue[d].SetAttribute(a.type,c)}}else{c=this.GetFinalValue(a,-1);if(IsNullOrUndef(c))f.curveID.SetAttribute(a.type,null);else f.targetValue.SetAttribute(a.type,c)}}else{var b=new WacAnimationUnit(this.element,this.GetIntWrapperValue(a.startTime)+this.delay,this.GetIntWrapperValue(a.endTime)-this.GetIntWrapperValue(a.startTime),null,null,this.finalState.AnimateRight);b.startValue.SetAttribute(a.type,this.GetIntWrapperValue(a.startValue));b.curveID.SetAttribute(a.type,a.curveID);if(IsArrayCheck(this.element)){g=this.element.length;for(d=0;d<g;d++){if(b.targetValue==null)b.targetValue=new Array(this.element.length);if(b.targetValue[d]==null)b.targetValue[d]=new WacAnimation_State;c=this.GetFinalValue(a,d);if(IsNullOrUndef(c)){b.curveID.SetAttribute(a.type,null);break}else b.targetValue[d].SetAttribute(a.type,c)}}else{if(b.targetValue==null)b.targetValue=new WacAnimation_State;c=this.GetFinalValue(a,-1);if(IsNullOrUndef(c))b.curveID.SetAttribute(a.type,null);else b.targetValue.SetAttribute(a.type,c)}if(e==null||e.delay+e.duration<=b.delay+b.duration)e=b;this.arrAnimationUnits[this.idxAnimUnit++]=b}}if(e!=null){e.finishFunc=this.finishFunc;e.extraData=this.extraData}};WacAnimation_Object.prototype.FindMatchingAnimationUnit=function(b){for(var d=this.arrAnimationUnits.length,c=0;c<d;c++){var a=this.arrAnimationUnits[c];if(a.delay==this.GetIntWrapperValue(b.startTime)+this.delay&&a.duration==this.GetIntWrapperValue(b.endTime)-this.GetIntWrapperValue(b.startTime))return a}return null};WacAnimation_Object.prototype.GetFinalValue=function(a,e){var b=null;if(!IsNullOrUndef(this.GetIntWrapperValue(a.endValue)))switch(a.relativeTo){case 0:var g=IsArrayCheck(this.element)?this.element[e]:this.element,d=this.GetIntWrapperValue(a.startValue)==null?GetCurrentAttributeCssValue(g,a.type,this.finalState.AnimateRight):this.GetIntWrapperValue(a.startValue);b=a.operationType==0?this.GetIntWrapperValue(a.endValue)*d:this.GetIntWrapperValue(a.endValue)+d;break;case 1:var f=IsArrayCheck(this.element)?this.finalState[e]:this.finalState,c=f.GetAttribute(a.type);if(!IsNullOrUndef(c))b=a.operationType==0?this.GetIntWrapperValue(a.endValue)*c:this.GetIntWrapperValue(a.endValue)+c;break;case 2:b=this.GetIntWrapperValue(a.endValue)}return b};WacAnimationUnit.prototype={element:null,delay:0,duration:0,startValue:null,perElementStartValue:null,targetValue:null,curveID:null,finishFunc:null,extraData:null,startTime:null,fIsExecuting:false,animateRight:false,relativePosition:false};function WacAnimationUnit(e,f,d,b,c,a){this.Initialize(e,f,d,b,c,a)}WacAnimationUnit.prototype.Initialize=function(e,f,d,b,c,a){this.element=e;this.delay=f;this.duration=d;this.finishFunc=b;this.extraData=c;this.startValue=new WacAnimation_State;this.perElementStartValue=null;this.targetValue=null;this.curveID=new WacAnimation_State;this.startTime=null;this.fIsExecuting=false;this.animateRight=a;this.relativePosition=false};WacAnimationUnit.prototype.StartAnimation=function(){if(g_WacAnimationEngine==null)g_WacAnimationEngine=new WacAnimationEngine;g_WacAnimationEngine.sharedTimer==null&&g_WacAnimationEngine.StartEngine();if(this.element.style.position=="relative")this.relativePosition=true;this.startTime=new Date;this.currentTime=new Date;g_WacAnimationEngine.StartAnimation(this)};WacAnimationUnit.prototype.StopAnimation=function(){g_WacAnimationEngine.StopAnimation(this)};WacAnimationUnit.prototype.StepAnimation=function(){this.currentTime=new Date;var f=Number(this.currentTime)-Number(this.startTime);if(f<this.delay)return;f-=this.delay;for(var j=true,k=!this.fIsExecuting,m=g_numAnimationAttributes,a=1;a<=m;a++){var l=this.curveID.GetAttribute(a);if(IsNullOrUndef(l))continue;var i=this.PositionFunction(f,this.duration,l),b,d,e,g,h;if(IsArrayCheck(this.element))for(var n=this.element.length,c=0;c<n;c++){g=this.element[c];b=this.startValue.GetAttribute(a);h=this.targetValue[c];d=h.GetAttribute(a);if(IsNullOrUndef(b)){if(this.perElementStartValue==null)this.perElementStartValue=new Array(this.element.length);if(IsNullOrUndef(this.perElementStartValue[c]))this.perElementStartValue[c]=new WacAnimation_State;b=this.perElementStartValue[c].GetAttribute(a);if(IsNullOrUndef(b)){b=GetCurrentAttributeCssValue(g,a,this.animateRight,this.relativePosition);this.perElementStartValue[c].SetAttribute(a,b)}}e=b+i*(d-b);if(f>=this.duration||i>1)e=d;else j=false;k&&g_WacAnimationEngine.CheckForConflictingAnimations(g,a);this.SetStyle(a,g,e)}else{g=this.element;b=this.startValue.GetAttribute(a);h=this.targetValue;d=h.GetAttribute(a);if(IsNullOrUndef(b)){b=GetCurrentAttributeCssValue(this.element,a,this.animateRight,this.relativePosition);this.startValue.SetAttribute(a,b)}e=b+i*(d-b);if(f>=this.duration||i>1)e=d;else j=false;k&&g_WacAnimationEngine.CheckForConflictingAnimations(this.element,a);this.SetStyle(a,this.element,e)}}this.fIsExecuting=true;if(j){this.StopAnimation();if(this.finishFunc!=null){g_WacAnimationTelemetry.LogData("calling fnishfunc");this.finishFunc(this.extraData)}}};WacAnimationUnit.prototype.PositionFunction=function(c,d,e){var a=0,b=g_AnimationCurves[e];switch(b.type){case 0:a=1;break;case 1:a=c<d?0:1;break;case 2:a=c/d;break;case 3:a=CalculateBezier(b.x1,b.y1,b.x2,b.y2,c/d)}return a};WacAnimationUnit.prototype.SetStyle=function(c,a,b){g_WacAnimationTelemetry.elementIds[a.id]=true;switch(c){case 1:this.StyleLeftSetter(a,b);break;case 2:this.StyleTopSetter(a,b);break;case 3:this.StyleHeightSetter(a,b);break;case 4:this.StyleWidthSetter(a,b);break;case 5:this.StyleOpacitySetter(a,b);break;case 6:this.StyleScrollTopSetter(a,b);break;case 7:this.StyleScrollLeftSetter(a,b);break;case 8:this.StyleRotateZSetter(a,b)}};WacAnimationUnit.prototype.StyleLeftSetter=function(b,a){if(this.animateRight)if(this.relativePosition)b.style.marginRight=String(a)+"px";else b.style.right=String(a)+"px";else if(this.relativePosition)b.style.marginLeft=String(a)+"px";else b.style.left=String(a)+"px";g_WacAnimationLogging&&g_WacAnimationTelemetry.LogData("element: "+b.id+", "+(this.animateRight?"right":"left")+": "+String(a)+", timestamp: "+String(Number(new Date)))};WacAnimationUnit.prototype.StyleTopSetter=function(a,b){if(this.relativePosition)a.style.marginTop=String(b)+"px";else a.style.top=String(b)+"px";g_WacAnimationLogging&&g_WacAnimationTelemetry.LogData("element: "+a.id+", top: "+String(a.style.top)+", timestamp: "+String(Number(new Date)))};WacAnimationUnit.prototype.StyleHeightSetter=function(a,b){a.style.height=String(b)+"px";g_WacAnimationLogging&&g_WacAnimationTelemetry.LogData("element: "+a.id+", height: "+String(a.style.height)+", timestamp: "+String(Number(new Date)))};WacAnimationUnit.prototype.StyleWidthSetter=function(a,b){a.style.width=String(b)+"px";g_WacAnimationLogging&&g_WacAnimationTelemetry.LogData("element: "+a.id+", width: "+String(a.style.width)+", timestamp: "+String(Number(new Date)))};WacAnimationUnit.prototype.StyleOpacitySetter=function(b,a){SetCssOpacity(b,a);g_WacAnimationLogging&&g_WacAnimationTelemetry.LogData("element: "+b.id+", opacity: "+String(a)+", timestamp: "+String(Number(new Date)))};WacAnimationUnit.prototype.StyleScrollTopSetter=function(b,a){b.scrollTop=a;g_WacAnimationLogging&&g_WacAnimationTelemetry.LogData("element: "+b.id+", scrollTop: "+a+", timestamp: "+String(Number(new Date)))};WacAnimationUnit.prototype.StyleScrollLeftSetter=function(b,a){b.scrollLeft=a;g_WacAnimationLogging&&g_WacAnimationTelemetry.LogData("element: "+b.id+", scrollLeft: "+a+", timestamp: "+String(Number(new Date)))};WacAnimationUnit.prototype.StyleRotateZSetter=function(b,a){SetCssRotation(b,a);g_WacAnimationLogging&&g_WacAnimationTelemetry.LogData("element: "+b.id+", rotateZ: "+a+", timestamp: "+String(Number(new Date)))};WacAnimationTelemetry.prototype={perfData:null,logData:null,animationStatsLength:5,animationStats:null,animationStatsIndex:0,perfDataIndex:0,logDataIndex:0,animationIndex:0,startTime:null,duration:null,numUnits:0,elementIds:null,avgSessionFps:-1,countSessionFps:0,minSessionFps:-1,maxSessionFps:-1};function WacAnimationTelemetry(){this.perfData=new Array(0);this.logData=new Array(0);this.animationStats=[];this.animationStatsIndex=0;this.perfDataIndex=0;this.logDataIndex=0;this.animationIndex=0;this.startTime=null;this.duration=null;this.numUnits=0;this.elementIds={};this.avgSessionFps=-1;this.countSessionFps=0;this.minSessionFps=-1;this.maxSessionFps=-1}WacAnimationTelemetry.prototype.Start=function(){this.startTime=new Date;this.perfDataIndex=0;this.logDataIndex=0;this.elementIds={}};WacAnimationTelemetry.prototype.Stop=function(){this.duration=Number(new Date)-Number(this.startTime);this.numUnits=g_WacAnimationEngine.sharedTimerRefs;this.CalculateAndShowStatistics();this.perfDataIndex=0;this.logDataIndex=0};WacAnimationTelemetry.prototype.AddPerfData=function(a){this.perfData[this.perfDataIndex++]=a};WacAnimationTelemetry.prototype.LogData=function(a){this.logData[this.logDataIndex++]=a};WacAnimationTelemetry.prototype.CalculateStatistics=function(){var c=0,n=Number.MAX_VALUE,m=Number.MIN_VALUE,f=0,d=0,l="",k="",o=new Date,i="",g=this.duration;if(IsNullOrUndef(g))g=Number(o)-Number(this.startTime);if(g_WacAnimationLogging&&this.logDataIndex>0)for(var p=this.logDataIndex,a=0;a<p;a++){if(a!=0)l+="<br/>";l+=this.logData[a]}if(this.perfDataIndex>0){var e=this.perfDataIndex;for(a=0;a<e;a++){if(this.perfData[a]<n)n=this.perfData[a];if(this.perfData[a]>m)m=this.perfData[a];f+=this.perfData[a];if(a!=0)k+=", ";k+=this.perfData[a]}if(e>1)f/=e-1;f=Math.round(f*100)/100;for(a=0;a<e;a++){var h=this.perfData[a]-f;h=h*h;d+=h}if(e>1)d/=e-1;d=Math.sqrt(d);d=Math.round(d*100)/100;c=this.perfDataIndex/g*1e3;c=Math.round(c)}for(var q in this.elementIds){i+=q;i+=","}if(this.minSessionFps==-1||c<this.minSessionFps)this.minSessionFps=c;if(this.maxSessionFps==-1||c>this.maxSessionFps)this.maxSessionFps=c;if(this.countSessionFps==0){this.countSessionFps++;this.avgSessionFps=c}else{var j=this.avgSessionFps*this.countSessionFps;j=j+c;this.countSessionFps++;this.avgSessionFps=j/this.countSessionFps}var b=new Array(12);b[0]=g;b[1]=c;b[2]=n;b[3]=m;b[4]=f;b[5]=d;b[6]=k;b[7]=l;b[8]=this.numUnits;b[9]=Number(this.startTime);b[10]=Number(o);b[11]=i;return b};WacAnimationTelemetry.prototype.CalculateAndShowStatistics=function(){var a=this.CalculateStatistics();g_LastAnimationData=a;this.StoreAnimationStats(a)};WacAnimationTelemetry.prototype.StoreAnimationStats=function(a){this.animationStats[this.animationStatsIndex]=a;this.animationStatsIndex++;this.animationStatsIndex=this.animationStatsIndex%this.animationStatsLength};WacAnimationTelemetry.prototype.GetRecentAnimationStats=function(){for(var d=[],c=0,b=g_WacAnimationTelemetry.animationStatsIndex;b<g_WacAnimationTelemetry.animationStatsLength;b++)if(g_WacAnimationTelemetry.animationStats[b]!=null){d[c]=g_WacAnimationTelemetry.animationStats[b];c++}for(var a=0;a<g_WacAnimationTelemetry.animationStatsIndex;a++)if(g_WacAnimationTelemetry.animationStats[a]!=null){d[c]=g_WacAnimationTelemetry.animationStats[a];c++}return d};WacAnimationTelemetry.prototype.GetAnimationSqmStats=function(){var a=[];if(g_WacAnimationTelemetry.avgSessionFps<0)a[0]=0;else a[0]=g_WacAnimationTelemetry.avgSessionFps;if(g_WacAnimationTelemetry.minSessionFps<0)a[1]=0;else a[1]=g_WacAnimationTelemetry.minSessionFps;if(g_WacAnimationTelemetry.maxSessionFps<0)a[2]=0;else a[2]=g_WacAnimationTelemetry.maxSessionFps;return a};var g_WacAnimationTelemetry=new WacAnimationTelemetry,g_LastAnimationData=null;WacAnimation.Telemetry=g_WacAnimationTelemetry;function GetCurrentAttributeCssValue(a,e,d,c){if(IsNullOrUndef(c))c=a.style.position=="relative";var b=0;switch(e){case 1:if(d)b=parseInt(c?a.style.marginRight.replace("px",""):a.style.right.replace("px",""));else b=parseInt(c?a.style.marginLeft.replace("px",""):a.style.left.replace("px",""));break;case 2:b=parseInt(c?a.style.marginTop.replace("px",""):a.style.top.replace("px",""));break;case 3:b=parseInt(a.style.height.replace("px",""));break;case 4:b=parseInt(a.style.width.replace("px",""));break;case 5:b=GetCssOpacity(a);break;case 6:b=parseInt(a.scrollTop);break;case 7:b=parseInt(a.scrollLeft);break;case 8:b=GetCssRotation(a)}return b}function Bezier1(a){return a*a*a}function Bezier2(a){return 3*a*a*(1-a)}function Bezier3(a){return 3*a*(1-a)*(1-a)}function Bezier4(a){return(1-a)*(1-a)*(1-a)}function CalculateBezier(d,b,e,c,a){return 0*Bezier4(a)+b*Bezier3(a)+c*Bezier2(a)+1*Bezier1(a)}function IsArrayCheck(a){return typeof a=="object"&&a instanceof Array}function IsNullOrUndef(a){return a==null||a==undefined}function SetCssOpacity(b,a){if(document.body.style.opacity!=null)b.style.opacity=a;else b.style.filter=a==1?"":"alpha(opacity="+String(a*100)+")"}function GetCssOpacity(c){if(document.body.style.opacity!=null){var b=c.style.opacity;return b!=null&&b!=""?parseFloat(b):1}else{var a=c.style.filter;return a!=null&&a!=""?parseInt(a.replace("alpha(opacity=","").replace(")",""))/100:1}}function SetCssRotation(b,c){var a="rotate("+c+"deg)";if(document.body.style.msTransform!=null)b.style.msTransform=a;else if(document.body.style.webkitTransform!=null)b.style.webkitTransform=a;else if(document.body.style.mozTransform!=null)b.style.mozTransform=a;else if(document.body.style.oTransform!=null)b.style.oTransform=a;else if(document.body.style.transform!=null)b.style.transform=a}function GetCssRotation(b){var a;if(document.body.style.msTransform!=null)a=b.style.msTransform;else if(document.body.style.webkitTransform!=null)a=b.style.webkitTransform;else if(document.body.style.mozTransform!=null)a=b.style.mozTransform;else if(document.body.style.oTransform!=null)a=b.style.oTransform;else if(document.body.style.transform!=null)a=b.style.transform;if(!a)return 0;a=a.replace("rotate(","");a=a.replace("deg)","");return parseFloat(a)}