function $_global_wpadder(){WPAdder=null;_WPAdder_minimumDescriptionWidth=320;_WPAdder_maximumItemWidth=200;_WPAdder_maximumItemPanes=3;_WPAdder_Zone_InitializePrototype();_WPAdder.prototype={_id:undefined,_table:undefined,_selCat:undefined,_selItem:undefined,_cats:undefined,_itemContainerTemplate:undefined,_visibleItemCols:undefined,_dummyCols:undefined,_firstItem:undefined,_lastItem:undefined,_firstItemCol:undefined,_lastLayoutWidth:undefined,_lastLayoutHeight:undefined,_layoutHash:undefined,_searchTxt:undefined,_ribbonMap:undefined,_visible:undefined,_zones:undefined,_widestColumn:undefined,_selectedTab:undefined,_maxCols:undefined,_postbackFunc:undefined,_callbackFunc:undefined,_onResizeDelegate:undefined,_onUnloadDelegate:undefined,addSelectedItemToPage:_WPAdder$addSelectedItemToPage,addItemToPageByItemIdAndZoneId:_WPAdder$addItemToPageByItemIdAndZoneId,addItemToPage:_WPAdder$addItemToPage,initialize:_WPAdder$initialize,nextPage:_WPAdder$nextPage,previousPage:_WPAdder$previousPage,searchCategory:_WPAdder$searchCategory,searchItem:_WPAdder$searchItem,selectCategoryByTitle:_WPAdder$selectCategoryByTitle,selectCategory:_WPAdder$selectCategory,selectItem:_WPAdder$selectItem,selectDescriptionTab:_WPAdder$selectDescriptionTab,show:_WPAdder$show,hide:_WPAdder$hide,showError:_WPAdder$showError,_setZone:_WPAdder$_setZone,_addItemToPage:_WPAdder$_addItemToPage,CreateWebpartPlaceholderMarkup:_WPAdder$CreateWebpartPlaceholderMarkup,_createWebpartPlaceholderInRte:_WPAdder$_createWebpartPlaceholderInRte,_clearChildren:_WPAdder$_clearChildren,_createEventArg:_WPAdder$_createEventArg,_createColumn:_WPAdder$_createColumn,_delayInitialize:_WPAdder$_delayInitialize,_disableUpload:_WPAdder$_disableUpload,_fillCachedItems:_WPAdder$_fillCachedItems,_fillItems:_WPAdder$_fillItems,_finishColumn:_WPAdder$_finishColumn,_getAddButton:_WPAdder$_getAddButton,_getCategoryContainer:_WPAdder$_getCategoryContainer,_getDummyColumn:_WPAdder$_getDummyColumn,_getFirstChild:_WPAdder$_getFirstChild,_getLastChild:_WPAdder$_getLastChild,_getHiddenField:_WPAdder$_getHiddenField,_getItemCount:_WPAdder$_getItemCount,_getItemContainer:_WPAdder$_getItemContainer,_getItemContainerTable:_WPAdder$_getItemContainerTable,_getItems:_WPAdder$_getItems,_getItemCols:_WPAdder$_getItemCols,_getNavigationTable:_WPAdder$_getNavigationTable,_getNavigationPrevious:_WPAdder$_getNavigationPrevious,_getNavigationNext:_WPAdder$_getNavigationNext,_getDescriptionArea:_WPAdder$_getDescriptionArea,_getDescriptionTable:_WPAdder$_getDescriptionTable,_getSelectedItem:_WPAdder$_getSelectedItem,_getUploadDiv:_WPAdder$_getUploadDiv,_getZoneSelect:_WPAdder$_getZoneSelect,_getNameArea:_WPAdder$_getNameArea,_handleCategoryKeydown:_WPAdder$_handleCategoryKeydown,_handleCategoryKeypress:_WPAdder$_handleCategoryKeypress,_handleItemKeydown:_WPAdder$_handleItemKeydown,_handleItemKeypress:_WPAdder$_handleItemKeypress,_handleKeypress:_WPAdder$_handleKeypress,_handleZoneKeypress:_WPAdder$_handleZoneKeypress,_calculateVisibleItemColumns:_WPAdder$_calculateVisibleItemColumns,_layout:_WPAdder$_layout,_layoutCategoryColumn:_WPAdder$_layoutCategoryColumn,_layoutItemColumns:_WPAdder$_layoutItemColumns,_moveCategory:_WPAdder$_moveCategory,_moveCategoryPage:_WPAdder$_moveCategoryPage,_moveItem:_WPAdder$_moveItem,_moveItemPage:_WPAdder$_moveItemPage,_onResize:_WPAdder$_onResize,_removeElement:_WPAdder$_removeElement,_removeItemHover:_WPAdder$_removeItemHover,_resizeItem:_WPAdder$_resizeItem,_resetSearch:_WPAdder$_resetSearch,_restoreDescriptionAndLayout:_WPAdder$_restoreDescriptionAndLayout,_saveDescriptionForLayout:_WPAdder$_saveDescriptionForLayout,_search:_WPAdder$_search,_setupNavImage:_WPAdder$_setupNavImage,_showItemCols:_WPAdder$_showItemCols,_hideUpload:_WPAdder$_hideUpload,_showUpload:_WPAdder$_showUpload,_makeUploadVisible:_WPAdder$_makeUploadVisible,_updateDescription:_WPAdder$_updateDescription,_uploadFile:_WPAdder$_uploadFile,_zoneChanged:_WPAdder$_zoneChanged,_showCategoryColumn:_WPAdder$_showCategoryColumn};_WPAdder_category_InitializePrototype();_WPAdder_item_InitializePrototype();WPAdderClass={load:WPAdderClassLoad};typeof Sys!="undefined"&&Sys&&null!=Sys.Application&&Sys.Application.notifyScriptLoaded();typeof NotifyScriptLoadedAndExecuteWaitingJobs!="undefined"&&NotifyScriptLoadedAndExecuteWaitingJobs("wpadder.js")}function ULSior(){var a={};a.ULSTeamName="Microsoft SharePoint Foundation";a.ULSFileName="wpadder.commentedjs";return a}var WPAdder,_WPAdder_minimumDescriptionWidth,_WPAdder_maximumItemWidth,_WPAdder_maximumItemPanes;function _WPAdder_Zone_InitializePrototype(){a:;_WPAdder_Zone.prototype.id=undefined;_WPAdder_Zone.prototype.displayTitle=undefined;_WPAdder_Zone.prototype.isInRTE=undefined}function _WPAdder_Zone(c,a,b){this.id=c;this.displayTitle=a;this.isInRTE=b}function _WPAdder(m,e,c,j,i,k){for(var a=0;a<e.length;a++){var d=e[a];d.el.index=a;for(var h=d.items,b=0;b<h.length;b++){d=h[b];d.el.index=b}}this._id=m;this._cats=e;this._dummyCols=[];this._searchTxt="";this._selCat=this._selItem=-1;this._postbackFunc=j;this._callbackFunc=i;this._lastLayoutWidth=this._lastLayoutHeight=-1;this._ribbonMap=k;this._visible=false;var f=[];for(a=0;a<c.length;a+=3){var l=new _WPAdder_Zone(c[a],c[a+1],c[a+2]);b=a/3;f[b]=l}this._zones=f;var g=this;this._onResizeDelegate=function(){a:;return g._onResize.apply(g,arguments)};this._onUnloadDelegate=function(){a:;if(typeof window.WPAdder!="undefined")window.WPAdder=undefined}}function _WPAdder$addSelectedItemToPage(){a:;if(this._selItem!=-1){var a=this._getSelectedItem();if(typeof a.onClientAdd!="undefined"&&a.onClientAdd!=null)DeferCall(a.onClientAdd,a,this._getZoneSelect().value,0);else this._addItemToPage(a,Number(this._getZoneSelect().value),0);this.hide()}}function _WPAdder$addItemToPageByItemIdAndZoneId(c,d,a,b){if(null==a)a=0;if(typeof b=="undefined")b="";this._postbackFunc(this._createEventArg("addItem",d,a,c,b))}function _WPAdder$addItemToPage(c,b,a){a:;this._addItemToPage(c,b,a)}function _WPAdder$initialize(b,h){if(null!=this._table)return;this._layoutHash=b;this._table=document.getElementById(this._id+"_tbl");for(var k=this._getHiddenField("selZone").value,j=this._getHiddenField("selItem").value,l=this._getHiddenField("selCat").value,p=this._getHiddenField("selTab").value,e=this._getHiddenField("layout").value,o=this._getHiddenField("visible").value,f=this._getZoneSelect(),a=0;a<this._zones.length;a++){var i=this._zones[a],d=document.createElement("OPTION");d.text=i.displayTitle;d.value=String(a);if(String(a)==k)d.selected=true;f.options.add(d)}f.onchange=_WPAdder_delegate(this,this._zoneChanged);this._itemContainerTemplate=this._getFirstChild(this._getItemContainer());this._clearChildren(this._itemContainerTemplate.parentNode);this._getDescriptionArea().innerHTML="";!h&&this._disableUpload();var c=null;if(b!=null&&b.length!=0&&e!=null&&e.length!=0&&e.substr(0,b.length+1)==b+";"){c=e.substr(b.length+1).split(";");for(a=0;a<c.length;a++)c[a]=c[a].split(",")}this._table.style.display="";this._layout(c);for(a=0;a<this._cats.length;a++){var n=this._cats[a];if(n.title==l){this.selectCategory(a);break}}var g=this._getItems();for(a=0;a<g.length;a++){var m=g[a];if(m.title==j){this.selectItem(a);break}}this.selectDescriptionTab();AttachEvent("resize",this._onResizeDelegate);AttachEvent("unload",this._onUnloadDelegate,window);NotifyEventAndExecuteWaitingJobs("_spEventWebPartAdderReady")}function _WPAdder$nextPage(){a:;this._firstItemCol+this._visibleItemCols<this._getItemCols().length&&this._showItemCols(this._firstItemCol+1)}function _WPAdder$previousPage(){a:;this._firstItemCol>0&&this._showItemCols(this._firstItemCol-1)}function _WPAdder$searchCategory(a){return this._search(a,this._cats,this._selCat,_WPAdder_delegate(this,this.selectCategory))}function _WPAdder$searchItem(a){return this._search(a,this._getItems(),this._selItem,_WPAdder_delegate(this,this.selectItem))}function _WPAdder$selectCategoryByTitle(b){for(var a=0;a<this._cats.length;a++){var c=this._cats[a];if(c.title==b)break}a<this._cats.length&&this.selectCategory(a)}function _WPAdder$selectCategory(b){a:;var a;if(this._selCat!=b){if(this._selCat!=-1){this.selectItem(-1);a=this._cats[this._selCat];a.deselect()}a=this._cats[b];a.select();this._getHiddenField("selCat").value=a.title;this._selCat=b;this._layoutItemColumns();this.selectItem(0)}}function _WPAdder$selectItem(a){a:;if(this._selItem!=a){var c=this._getItems(),f;this._selItem!=-1&&c[this._selItem].deselect();if(a!=-1){f=c[a];f.select();if(a<this._firstItem||a>=this._lastItem){this._removeItemHover();for(var g=a<this._firstItem,d=0,e=this._getItemCols(),b=0;b<e.length;b++){d+=this._getItemCount(e[b]);if(a<d){this._showItemCols(g?b:Math.max(b-this._visibleItemCols+1,0));break}}}}this._getHiddenField("selItem").value=a==-1?"":c[a].title;this._selItem=a;this._selectedTab=="error"&&this.selectDescriptionTab();this._updateDescription()}}function _WPAdder$selectDescriptionTab(){a:;this._getHiddenField("selTab").value=this._selectedTab="description";this._updateDescription()}function _WPAdder$show(){a:;if(this._visible)return;if(null==this._table){setTimeout(_WPAdder_delegate(this,this.show),50);return}var b=document.getElementById("WebPartAdderUpdatePanelContainer");if(b!=null)b.style.display="";document.getElementById("wpadder_foofoo").style.display="none";this._table.style.position="";this._table.style.visibility="";this._table.style.display="";!browseris.ie&&this._layout();var c=this._getHiddenField("catColVisible").value;c=="0"&&this._showCategoryColumn(false);g_wpadderHeight=this._table.offsetHeight;FixRibbonAndWorkspaceDimensions();this._visible=true;var a=this._getCategoryContainer();if(a!=null)try{a.focus()}catch(d){}}function _WPAdder$hide(){a:;var a=document.getElementById("WebPartAdderUpdatePanelContainer");if(a!=null)a.style.display="none";if(!this._visible)return;var b=document.getElementById("wpadder_foofoo");if(null!=b)b.style.display="";if(null!=this._table){this._table.style.visibility="hidden";this._table.style.display="none";this._table.style.position="absolute"}this._getHiddenField("visible").value="";g_wpadderHeight=0;FixRibbonAndWorkspaceDimensions();this._visible=false}function _WPAdder$showError(a){a:;this._getHiddenField("selTab").value=this._selectedTab="error";this._getDescriptionArea().innerHTML='<div class="ms-wpadder-description ms-errorcolor">'+a+"</div>";this.show()}function _WPAdder$_setZone(b){a:;for(var a=0;a<this._zones.length;a++)if(b==this._zones[a].id){this._getZoneSelect().selectedIndex=a;this._getHiddenField("selZone").value=String(a);break}}function _WPAdder$_addItemToPage(e,a,b){if(null==b)b=0;if(null==a||isNaN(a)||a>=this._zones.length)return;var d=this._zones[a],c="";if(d.isInRTE){c=this._createWebpartPlaceholderInRte();if(null==c)return;IsFullNameDefined("SP.UI.ModalDialog.showWaitScreenWithNoClose")&&SP.UI.ModalDialog.showWaitScreenWithNoClose(SP.Res.genericLoading,null,null,null)}this.addItemToPageByItemIdAndZoneId(e.id,d.id,b,c)}function _WPAdder$CreateWebpartPlaceholderMarkup(b){var a=[];a.push('<div class="ms-rtestate-read ms-rte-wpbox" contentEditable="false"><div class="ms-rtestate-notify ms-rtegenerate-notify ms-rtestate-read ');a.push(b);a.push('" id="div_');a.push(b);a.push('">');a.push(STSHtmlEncode(SP.Res.genericLoading));a.push("</div>");a.push("<div style='display:none' id='vid_");a.push(b);a.push("'/></div>");return a.join("")}function _WPAdder$_createWebpartPlaceholderInRte(a){if(null==a){var e=RTE.Cursor.get_range();a=e}if(null==a)return null;var c=a.getEditableRegion();if(c==null||c.parentNode==null)return null;var f=SP.Guid.newGuid(),b=f.toString("D");document.getElementById("_wpcmWpid").value=b;var d=this.CreateWebpartPlaceholderMarkup(b);a.collapse(false);a.replaceHtml(d);a.collapse(false);RTE.Cursor.update();RTE.CanvasEvents.dispatchChanged();return b}function _WPAdder$_clearChildren(a){while(null!=a.lastChild)a.removeChild(a.lastChild)}function _WPAdder$_createEventArg(){a:;for(var a="",b=0;b<arguments.length;b++){if(a!=null&&a.length!=0)a+="&";a+=escapeProperly(String(arguments[b]))}return a}function _WPAdder$_createColumn(c,a){var b=c.cloneNode(true);null!=a&&a.appendChild(b);return b}function _WPAdder$_delayInitialize(a){AttachEvent("domLoad",function(){a:;setTimeout(a,50)})}function _WPAdder$_disableUpload(){a:;var a=this._saveDescriptionForLayout();this._getUploadDiv().style.display="none"}function _WPAdder$_fillCachedItems(j,l,c){for(var h=[],b=0,e=0;b<c.length;b++){var m=parseInt(c[b]),a=c[b].indexOf(" "),i=a==-1?-1:parseInt(c[b].substr(a+1)),d=this._createColumn(l);h.push(d);d=this._getFirstChild(d);for(var k=0;k<m&&e<j.length;e++,k++){var g=j[e].el;if(i==e){var f=_WPAdder_findTextNode(g);g.title=_WPAdder_trim(f.nodeValue);a=c[b].indexOf(":",a+2);f.nodeValue=f.nodeValue.substr(0,parseInt(c[b].substr(a+1)))+"...";a=c[b].indexOf(" ",a+2);i=a==-1?-1:parseInt(c[b].substr(a+1))}d.appendChild(g)}}return h}function _WPAdder$_fillItems(m,n,j,l,k){for(var d=0,b=m[0]=this._createColumn(l,j),c=this._getFirstChild(b),a="",f="",h=-1,g=0,o=1;g<n.length;g++){var e=n[g].el;c.appendChild(e);if(h==-1)h=this._table.offsetHeight;var i=-1;if(0!=k)i=this._resizeItem(e,k);if(this._table.offsetHeight>h){this._removeElement(e);if(c.offsetWidth>d)d=c.offsetWidth;this._removeElement(b);if(null!=a&&a.length>0)a+=",";a+=String(this._getItemCount(b))+f;f="";b=m[o++]=this._createColumn(l,j);c=this._getFirstChild(b);c.appendChild(e)}if(i!=-1)f+=" "+String(g)+":"+String(i);e.style.overflow="hidden"}if(c.offsetWidth>d)d=c.offsetWidth;this._removeElement(b);if(null!=a&&a.length>0)a+=",";a+=String(this._getItemCount(b))+f;return[a,d]}function _WPAdder$_finishColumn(b,a){var c=this._getFirstChild(b);c.style.width=String(a)+"px"}function _WPAdder$_getAddButton(){a:;return this._getFirstChild(this._getFirstChild(this._table.rows[2].cells[0]))}function _WPAdder$_getCategoryContainer(){a:;return this._getFirstChild(this._table.rows[1].cells[1])}function _WPAdder$_getDummyColumn(b){var a=this._dummyCols[b];if(null==a){this._dummyCols[b]=a=this._createColumn(this._itemContainerTemplate,null);a.className="ms-wpadder-cell ms-wpadder-itemCell2";this._finishColumn(a,this._widestColumn)}return a}function _WPAdder$_getFirstChild(b){var a=b.firstChild;while(null!=a&&a.nodeType==3)a=a.nextSibling;return a}function _WPAdder$_getLastChild(b){var a=b.lastChild;while(null!=a&&a.nodeType==3)a=a.previousSibling;return a}function _WPAdder$_getHiddenField(a){a:;return document.forms[0].elements[this._id+"_"+a]}function _WPAdder$_getItemCount(a){a:;var b=this._getFirstChild(a);return b.childNodes.length}function _WPAdder$_getItemContainer(){a:;return this._getItemContainerTable().rows[0]}function _WPAdder$_getItemContainerTable(){a:;return this._getFirstChild(this._table.rows[1].cells[3])}function _WPAdder$_getItems(){a:;var a=this._cats[this._selCat];return a.items}function _WPAdder$_getItemCols(){a:;var a=this._cats[this._selCat];return a.itemCols}function _WPAdder$_getNavigationTable(){a:;return this._getFirstChild(this._getItemContainerTable().rows[1].cells[0])}function _WPAdder$_getNavigationPrevious(){a:;return this._getNavigationTable().rows[0].cells[0].firstChild}function _WPAdder$_getNavigationNext(){a:;return this._getNavigationTable().rows[0].cells[1].firstChild}function _WPAdder$_getDescriptionArea(){a:;return this._getFirstChild(this._getFirstChild(this._getDescriptionTable().rows[1].cells[0]))}function _WPAdder$_getDescriptionTable(){a:;var a=this._table,b=a.rows[1];return this._getFirstChild(b.cells[5])}function _WPAdder$_getSelectedItem(){a:;return this._selItem==-1?null:this._getItems()[this._selItem]}function _WPAdder$_getUploadDiv(){a:;return this._getLastChild(this._table.rows[1].cells[1])}function _WPAdder$_getZoneSelect(){a:;return this._getFirstChild(this._getDescriptionTable().rows[2].cells[0])}function _WPAdder$_getNameArea(){a:;return this._getFirstChild(this._getDescriptionTable().rows[0].cells[0])}function _WPAdder$_handleCategoryKeydown(b){if(null==b)b=window.event;var a=_WPAdder_getKey(b);if(a==38)this._moveCategory(-1);else if(a==40)this._moveCategory(1);else if(a==33)this._moveCategoryPage(-1);else if(a==34)this._moveCategoryPage(1);else if(a==36)this.selectCategory(0);else if(a==35)this.selectCategory(this._cats.length-1);else if(a!=8)return true;this._resetSearch();return _WPAdder_cancelEvent(b)}function _WPAdder$_handleCategoryKeypress(a){this._handleKeypress(a,_WPAdder_delegate(this,this.searchCategory))}function _WPAdder$_handleItemKeydown(b){if(null==b)b=window.event;var a=_WPAdder_getKey(b);if(a==38)this._moveItem(-1);else if(a==40)this._moveItem(1);else if(a==37)this._moveItemPage(-1);else if(a==39)this._moveItemPage(1);else if(a==33)this._moveItemPage(-1);else if(a==34)this._moveItemPage(1);else if(a==36)this.selectItem(0);else if(a==35)this.selectItem(this._getItems().length-1);else if(a==13)this.addSelectedItemToPage();else if(a!=8)return true;this._resetSearch();return _WPAdder_cancelEvent(b)}function _WPAdder$_handleItemKeypress(a){this._handleKeypress(a,_WPAdder_delegate(this,this.searchItem))}function _WPAdder$_handleKeypress(a,d){if(null==a)a=window.event;var b=null!=a.charCode&&0!=a.charCode?a.charCode:a.keyCode;if(b>=32&&b<127&&!a.altKey&&!a.ctrlKey){var c=String.fromCharCode(b);this._searchTxt+=c;if(!d(this._searchTxt))if(this._searchTxt.length>1&&d(c))this._searchTxt=c;return _WPAdder_cancelEvent(a)}return true}function _WPAdder$_handleZoneKeypress(a){if(null==a)a=window.event;_WPAdder_getKey(a)==13&&this.addSelectedItemToPage()}function _WPAdder$_calculateVisibleItemColumns(){a:;for(var b=this._table.clientWidth,c=this._table.rows[1].cells,a=0;a<c.length;a++)if(a!=3&&a!=5)b-=c[a].offsetWidth;this._visibleItemCols=0;var d=Math.min(this._maxCols,_WPAdder_maximumItemPanes);do{this._visibleItemCols++;b-=this._widestColumn}while(this._visibleItemCols<d&&b-this._widestColumn>=_WPAdder_minimumDescriptionWidth);this._getNavigationTable().parentNode.colSpan=this._visibleItemCols;if(this._selCat!=-1)this._layoutItemColumns();else this.selectCategory(0)}function _WPAdder$_layout(a){var m=this._saveDescriptionForLayout(),g,b,d,c;if(this._lastLayoutWidth==-1){g=this._getCategoryContainer();for(b in this._cats){c=this._cats[b];g.appendChild(c.el)}}if(this._table.clientHeight!=this._lastLayoutHeight){this._selCat!=-1&&this._removeItemHover();this._layoutCategoryColumn();this._getNavigationTable().parentNode.colSpan=1;var f=0,h=0,e=document.createElement("DIV");g=this._itemContainerTemplate.cloneNode(true);e.style.whiteSpace="nowrap";e.style.width="1px";e.style.height="1px";e.style.overflow="auto";e.innerHTML="Quick Brown Fox!<br/>It jumped!";this._getFirstChild(g).appendChild(e);this._getItemContainer().appendChild(g);var k=e.scrollWidth,j=e.scrollHeight;this._removeElement(g);if(null!=a&&(parseInt(a[0][0])!=k||parseInt(a[0][1])!=j||parseInt(a[0][2])!=this._table.clientHeight))a=null;if(null!=a){f=parseInt(a[0][3]);for(b=0;b<this._cats.length;b++){c=this._cats[b];d=this._fillCachedItems(c.items,this._itemContainerTemplate,a[b+1]);if(d.length>h)h=d.length;c.itemCols=d}}else{a="";for(b in this._cats){d=[];c=this._cats[b];var i=this._fillItems(d,c.items,this._getItemContainer(),this._itemContainerTemplate,_WPAdder_maximumItemWidth);if(i[1]>f)f=i[1];if(d.length>h)h=d.length;c.itemCols=d;a+=";"+i[0]}a=String(k)+","+String(j)+","+String(this._table.clientHeight)+","+String(f)+a;this._getHiddenField("layout").value=this._layoutHash+";"+a}for(b in this._cats){c=this._cats[b];var l=c.itemCols;for(var n in l)this._finishColumn(l[n],f)}for(b in this._dummyCols)this._finishColumn(this._dummyCols[b],f);this._maxCols=h;this._widestColumn=f}(this._table.clientWidth!=this._lastLayoutWidth||this._table.clientHeight!=this._lastLayoutHeight)&&this._calculateVisibleItemColumns();this._restoreDescriptionAndLayout(m);this._lastLayoutWidth=this._table.clientWidth;this._lastLayoutHeight=this._table.clientHeight}function _WPAdder$_layoutCategoryColumn(){a:;var a=this._getCategoryContainer();if(a.className.indexOf("ms-wpadder-categories")<0)return;var b=a.parentNode;this._removeElement(a);var d=b.clientHeight-this._getUploadDiv().offsetHeight;a.style.overflow="auto";a.style.height=String(d)+"px";a.style.width="";b.insertBefore(a,this._getFirstChild(b));var c=Math.max(a.scrollWidth,b.clientWidth);a.style.width=String(c)+"px";if(a.scrollWidth>a.clientWidth)a.style.width=String(c+16)+"px"}function _WPAdder$_layoutItemColumns(){a:;this._removeItemHover();this._firstItemCol=-1;this._showItemCols(0);var a=this._selItem!=-1&&this._selItem>=this._lastItem;if(a){var b=this._selItem;this.selectItem(-1);this.selectItem(b)}}function _WPAdder$_moveCategory(b){var a=this._selCat+b;if(a<0)a=0;else if(a>=this._cats.length)a=this._cats.length-1;this.selectCategory(a)}function _WPAdder$_moveCategoryPage(e){var b=this._getCategoryContainer(),d=b.parentNode,c=d.clientHeight-this._getUploadDiv().offsetHeight,a=c/this._getFirstChild(b).offsetHeight-1;if(a<1)a=1;this._moveCategory(e*a)}function _WPAdder$_moveItem(c){var a=this._selItem+c,b=this._getItems();if(a<0)a=0;else if(a>=b.length)a=b.length-1;this.selectItem(a)}function _WPAdder$_moveItemPage(c){var b=this._cats[this._selCat],a=this._getItemCount(b.itemCols[0]);this._moveItem(c*a)}function _WPAdder$_onResize(){a:;null!=this._table.parentNode&&1==this._table.parentNode.nodeType&&this._table.style.display!="none"&&this._layout()}function _WPAdder$_removeElement(a){null!=a.parentNode&&a.parentNode.removeChild(a)}function _WPAdder$_removeItemHover(){a:;var a=this._getItems();for(var c in a){var b=a[c];b.removeHover()}}function _WPAdder$_resizeItem(a,g){var e=false,d="",h=browseris.ie&&browseris.iever==7&&!browseris.ie8standard;if(h&&a.className.indexOf("ms-wpadder-selected")>=0){e=true;d=a.className;a.className.replace("ms-wpadder-selected","")}a.style.width=String(g)+"px";a.style.overflow="auto";var b=-1;if(a.scrollWidth>a.clientWidth){var f=_WPAdder_findTextNode(a),c=f.nodeValue;b=c.length-3;a.title=_WPAdder_trim(c);do{f.nodeValue=c.substr(0,b)+"...";b--}while(b>=0&&a.scrollWidth>a.clientWidth);if(++b<0)b=0}a.style.overflow="";a.style.width="";if(e)a.className=d;return b}function _WPAdder$_resetSearch(){a:;this._searchTxt=""}function _WPAdder$_restoreDescriptionAndLayout(b){var a=this._getDescriptionArea();a.style.width=String(a.parentNode.clientWidth)+"px";a.style.height=String(a.parentNode.clientHeight)+"px";a.innerHTML=b}function _WPAdder$_saveDescriptionForLayout(){a:;var a=this._getDescriptionArea(),b=a.innerHTML;a.innerHTML="&nbsp;";a.style.width="";a.style.height="";return b}function _WPAdder$_search(c,d,b,e){var a;c=c.toLowerCase();if(c.length<2)b++;if(b<0)b=0;for(a=b;a<d.length;a++)if(d[a].title.toLowerCase().indexOf(c)==0){e(a);return true}for(a=0;a<b;a++)if(d[a].title.toLowerCase().indexOf(c)==0){e(a);return true}return false}function _WPAdder$_setupNavImage(a,c){var b=a.src.lastIndexOf(".")-1;if(b>0)a.src=a.src.substring(0,b)+(c?"A":"I")+a.src.substring(b+1);a.className=c?"":"ms-wpadder-disabled"}function _WPAdder$_showItemCols(b){a:;var a,f;if(this._firstItemCol!=b){var c=this._getItemCols(),e=this._getItemContainer();this._clearChildren(e);this._firstItemCol=b;this._firstItem=0;for(a=0;a<b;a++)this._firstItem+=this._getItemCount(c[a]);this._lastItem=this._firstItem;for(a=0,f=0;a<this._visibleItemCols;a++){var d=b+a;if(d<c.length){this._lastItem+=this._getItemCount(c[d]);c[d].className="ms-wpadder-cell "+(a==0?"ms-wpadder-itemCell":"ms-wpadder-itemCell2");e.appendChild(c[d])}else e.appendChild(this._getDummyColumn(f++))}this._setupNavImage(this._getNavigationPrevious(),b>0);this._setupNavImage(this._getNavigationNext(),b+this._visibleItemCols<c.length)}}function _WPAdder$_hideUpload(){a:;this._makeUploadVisible(false)}function _WPAdder$_showUpload(){a:;this._makeUploadVisible(true)}function _WPAdder$_makeUploadVisible(b){a:;var c=this._saveDescriptionForLayout(),g=this._getUploadDiv(),a=this._getFirstChild(g),f=this._getLastChild(a.rows[0].cells[0]),e=this._getFirstChild(a.rows[1].cells[0]),d=this._getLastChild(a.rows[0].cells[1]);f.style.display=b?"none":"inline";d.style.display=e.style.display=b?"inline":"none";this._layoutCategoryColumn();this._calculateVisibleItemColumns();this._restoreDescriptionAndLayout(c)}function _WPAdder$_updateDescription(){a:;if(this._selItem==-1){this._getDescriptionArea().innerHTML="&nbsp;";this._getAddButton().disabled=true}else{var a=this._getSelectedItem(),c=this._getDescriptionArea(),b=this._getNameArea();if(b.innerText!=null)b.innerText=a.title;else b.textContent=a.title;if(this._selectedTab=="description")c.innerHTML='<div class="ms-wpadder-description">'+a.description+"</div>";this._getAddButton().disabled=false}}function _WPAdder$_uploadFile(d){a:;var c=this._getLastChild(this._getLastChild(this._getUploadDiv())),a;try{var b=_WPAdder_trim(c.value);a=b!=null&&b.length!=0}catch(e){a=true}if(a){this._getHiddenField("visible").value="yes";document.forms[0].enctype="multipart/form-data";document.forms[0].submit()}_WPAdder_cancelEvent(d)}function _WPAdder$_zoneChanged(b){a:;var a=_WPAdder_getSrcElement(b);this._getHiddenField("selZone").value=String(a.selectedIndex)}function _WPAdder$_showCategoryColumn(c){a:;if(this._table!=null){var b=this._table.rows;if(b!=null&&b.length>1){var e=b[1],a=e.cells;if(a!=null&&a.length>1){var d=a[1];if(d.className.indexOf("ms-wpadder-categoryColumn")>=0){d.style.display=c?"":"none";this._getHiddenField("catColVisible").value=c?"1":"0";document.getElementById("wpadder_categorysectionhead").style.display=c?"":"none"}}}}}function _WPAdder_category_InitializePrototype(){a:;_WPAdder_category.prototype.title=undefined;_WPAdder_category.prototype.items=undefined;_WPAdder_category.prototype.el=undefined;_WPAdder_category.prototype.itemCols=undefined;_WPAdder_category.prototype.select=_WPAdder_category$select;_WPAdder_category.prototype.deselect=_WPAdder_category$deselect;_WPAdder_category.prototype.removeHover=_WPAdder_category$removeHover}function _WPAdder_category(b,d,c){a:;this.title=b;this.items=c;var a=document.createElement("DIV");a.onmouseover=_WPAdder_item_mouseOver;a.onmouseout=_WPAdder_item_mouseOut;a.role="button";a.setAttribute("title",b);a.onclick=_WPAdder_category_click;a.style.whiteSpace="nowrap";a.innerHTML='<img src="'+d+'" alt="" align="absmiddle" /> '+b;this.el=a}function _WPAdder_category$select(){a:;this.el.className="ms-wpadder-selected";var b=this.el.offsetTop,a=this.el.parentNode,c=a.scrollTop;if(b<c)a.scrollTop=b;else{var d=b+this.el.offsetHeight,e=c+a.clientHeight;if(d>e)a.scrollTop=d-a.clientHeight}}function _WPAdder_category$deselect(){a:;this.el.className=""}function _WPAdder_category$removeHover(){a:;_WPAdder_item_removeHover(this.el)}function _WPAdder_item_InitializePrototype(){a:;_WPAdder_item.prototype.id=undefined;_WPAdder_item.prototype.title=undefined;_WPAdder_item.prototype.description=undefined;_WPAdder_item.prototype.v3pickerkey=undefined;_WPAdder_item.prototype.listTemplate=undefined;_WPAdder_item.prototype.onClientAdd=undefined;_WPAdder_item.prototype.el=undefined;_WPAdder_item.prototype.removeHover=_WPAdder_category$removeHover;_WPAdder_item.prototype.deselect=_WPAdder_category$deselect;_WPAdder_item.prototype.select=_WPAdder_item$select}function _WPAdder_item(h,b,d,g,e,f,c){a:;this.id=h;this.title=b;this.description=d;this.v3pickerkey=f;this.listTemplate=c;this.onClientAdd=e;var a=document.createElement("DIV");a.onmouseover=_WPAdder_item_mouseOver;a.onmouseout=_WPAdder_item_mouseOut;a.role="button";a.setAttribute("title",b);a.onclick=_WPAdder_item_click;a.style.whiteSpace="nowrap";a.innerHTML='<img src="'+g+'" alt="" align="absmiddle" />';a.appendChild(document.createTextNode(b));this.el=a}function _WPAdder_item$select(){a:;this.el.className="ms-wpadder-selected"}function _WPAdder_find(a,b){while(null!=a&&a.tagName.toUpperCase()!=b)a=a.parentNode;return a}function _WPAdder_getKey(a){if(null==a)a=window.event;return null!=a.keyCode&&0!=a.keyCode?a.keyCode:a.which}function _WPAdder_getSrcElement(a){if(null==a)a=window.event;return typeof a.srcElement!="undefined"&&null!=a.srcElement?a.srcElement:typeof a.originalTarget!="undefined"?a.originalTarget:null}function _WPAdder_cancelEvent(a){if(null==a)a=window.event;a.cancelBubble=true;typeof a.preventDefault!="undefined"&&a.preventDefault();typeof a.stopPropogation!="undefined"&&a.stopPropogation();return false}function _WPAdder_category_click(a){WPAdder._resetSearch();WPAdder.selectCategory(_WPAdder_find(_WPAdder_getSrcElement(a),"DIV").index);return _WPAdder_cancelEvent(a)}function _WPAdder_clickOnEnter(e,el){if(_WPAdder_getKey(e)==13){if(typeof el.onclick!="undefined"){var onclick=el.onclick;if(typeof onclick=="string")eval(onclick);else onclick(e)}return _WPAdder_cancelEvent(e)}return true}function _WPAdder_item_click(a){WPAdder._resetSearch();WPAdder.selectItem(_WPAdder_find(_WPAdder_getSrcElement(a),"DIV").index);return _WPAdder_cancelEvent(a)}function _WPAdder_item_mouseOver(a){_WPAdder_item_addHover(_WPAdder_find(_WPAdder_getSrcElement(a),"DIV"))}function _WPAdder_item_mouseOut(a){_WPAdder_item_removeHover(_WPAdder_find(_WPAdder_getSrcElement(a),"DIV"))}function _WPAdder_item_addHover(a){a.className+=" ms-wpadder-hover"}function _WPAdder_item_removeHover(a){a.className=a.className==null||a.className=="ms-wpadder-hover"?"":a.className.replace(" ms-wpadder-hover","")}function _WPAdder_findTextNode(b){var a=b.firstChild;while(null!=a&&a.nodeType!=3)a=a.nextSibling;return a}function _WPAdder_trim(a){return a.replace(/^\s+|\s+$/g,"")}function _WPAdder_delegate(b,a){a:;return function(){a:;return a.apply(b,arguments)}}function WPAdderClassLoad(a){a:;a()}var WPAdderClass;$_global_wpadder();