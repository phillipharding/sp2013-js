Type.registerNamespace("Srch");Srch.AU=function(){};Srch.AU.get_querySuggestionLanguage=function(){var a=-1,b=Srch.ScriptApplicationManager.get_current(),e=b.queryGroups;for(var f in e){var g={key:f,value:e[f]};if(!Srch.U.n(g)){var c=g.value;if(!Srch.U.n(c)&&!Srch.U.n(c.dataProvider))return c.dataProvider.get_effectiveQueryLanguage()}}if(a<1){var d=b.states["languages"];if(!Srch.U.n(d)&&d.length>0){var h=d[0];if(!Srch.U.n(h))a=h.id}}if(a<1){var i=b.states["browserLanguage"];if(i>0)a=i}return a};Srch.AU.registerClass("Srch.AU");Type.registerNamespace("AjaxControlToolkit");AjaxControlToolkit._CommonToolkitScripts=function(){};AjaxControlToolkit._CommonToolkitScripts.prototype={getCurrentStyle:function(b,c,d){var a=null;if(b){if(b.currentStyle)a=b.currentStyle[c];else if(document.defaultView&&document.defaultView.getComputedStyle){var e=document.defaultView.getComputedStyle(b,null);if(e)a=e[c]}if(!a&&b.style.getPropertyValue)a=b.style.getPropertyValue(c);else if(!a&&b.style.getAttribute)a=b.style.getAttribute(c)}if(!a||a==""||typeof a==="undefined")if(typeof d!="undefined")a=d;else a=null;return a},getLocation:function(a){if(a===document.documentElement)return new Sys.UI.Point(0,0);return Sys.UI.DomElement.getLocation(a)},setLocation:function(b,a){Sys.UI.DomElement.setLocation(b,a.x,a.y)},getBounds:function(a){var b=$common.getLocation(a);return new Sys.UI.Bounds(b.x,b.y,a.offsetWidth||0,a.offsetHeight||0)},getVisible:function(a){return a&&"none"!=$common.getCurrentStyle(a,"display")&&"hidden"!=$common.getCurrentStyle(a,"visibility")},setVisible:function(a,b){if(a&&b!=$common.getVisible(a)){if(b)a.style.display="block";else a.style.display="none";a.style.visibility=b?"visible":"hidden"}},prepareHiddenElementForATDeviceUpdate:function(){var a=document.getElementById("hiddenInputToUpdateATBuffer_CommonToolkitScripts");if(!a){var a=document.createElement("input");a.setAttribute("type","hidden");a.setAttribute("value","1");a.setAttribute("id","hiddenInputToUpdateATBuffer_CommonToolkitScripts");a.setAttribute("name","hiddenInputToUpdateATBuffer_CommonToolkitScripts");document.forms[0]&&document.forms[0].appendChild(a)}},updateFormToRefreshATDeviceBuffer:function(){var a=document.getElementById("hiddenInputToUpdateATBuffer_CommonToolkitScripts");if(a)if(a.getAttribute("value")=="1")a.setAttribute("value","0");else a.setAttribute("value","1")},__DOMEvents:{focusin:{eventGroup:"UIEvents",init:function(a){a.initUIEvent("focusin",true,false,window,1)}},focusout:{eventGroup:"UIEvents",init:function(a){a.initUIEvent("focusout",true,false,window,1)}},activate:{eventGroup:"UIEvents",init:function(a){a.initUIEvent("activate",true,true,window,1)}},focus:{eventGroup:"UIEvents",init:function(a){a.initUIEvent("focus",false,false,window,1)}},blur:{eventGroup:"UIEvents",init:function(a){a.initUIEvent("blur",false,false,window,1)}},click:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("click",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},dblclick:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("click",true,true,window,2,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},mousedown:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("mousedown",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},mouseup:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("mouseup",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},mouseover:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("mouseover",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},mousemove:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("mousemove",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},mouseout:{eventGroup:"MouseEvents",init:function(b,a){b.initMouseEvent("mousemove",true,true,window,1,a.screenX||0,a.screenY||0,a.clientX||0,a.clientY||0,a.ctrlKey||false,a.altKey||false,a.shiftKey||false,a.metaKey||false,a.button||0,a.relatedTarget||null)}},load:{eventGroup:"HTMLEvents",init:function(a){a.initEvent("load",false,false)}},unload:{eventGroup:"HTMLEvents",init:function(a){a.initEvent("unload",false,false)}},select:{eventGroup:"HTMLEvents",init:function(a){a.initEvent("select",true,false)}},change:{eventGroup:"HTMLEvents",init:function(a){a.initEvent("change",true,false)}},submit:{eventGroup:"HTMLEvents",init:function(a){a.initEvent("submit",true,true)}},reset:{eventGroup:"HTMLEvents",init:function(a){a.initEvent("reset",true,false)}},resize:{eventGroup:"HTMLEvents",init:function(a){a.initEvent("resize",true,false)}},scroll:{eventGroup:"HTMLEvents",init:function(a){a.initEvent("scroll",true,false)}}},applyProperties:function(d,c){for(var b in c){var a=c[b];if(a!=null&&Object.getType(a)===Object){var e=d[b];$common.applyProperties(e,a)}else d[b]=a}},tryFireEvent:function(e,d,c){try{if(document.createEventObject){var a=document.createEventObject();$common.applyProperties(a,c||{});e.fireEvent("on"+d,a);return true}else if(document.createEvent){var b=$common.__DOMEvents[d];if(b){var a=document.createEvent(b.eventGroup);b.init(a,c||{});e.dispatchEvent(a);return true}}}catch(a){}return false},overlaps:function(a,b){return a.x<b.x+b.width&&b.x<a.x+a.width&&a.y<b.y+b.height&&b.y<a.y+a.height}};var CommonToolkitScripts=AjaxControlToolkit.CommonToolkitScripts=new AjaxControlToolkit._CommonToolkitScripts,$common=CommonToolkitScripts;Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(pageLoadedCallOut);function pageLoadedCallOut(f,e){var a=e.get_panelsUpdated();if(a&&a.length>0){for(i=0;i<a.length;i++){var b=a[i];if(b&&b.id.endsWith("UpdatePanelPeopleCore")){AdjustPopupPanel(b);var c=b.getElementsByTagName("a");if(c&&c.length>0){var d=c[0];if(d){d.focus();break}}}}$common.updateFormToRefreshATDeviceBuffer()}}function AdjustPopupPanel(a,b){if(Sys.Browser.agent==Sys.Browser.InternetExplorer&&(!document.documentMode||document.documentMode==7)){if(a&&a.currentStyle.direction=="rtl"){a.dir="";a.dir="rtl"}if(b)b.style.display="block"}}Sys.Timer=function(){Sys.Timer.initializeBase(this);this._interval=1e3;this._enabled=false;this._timer=null};Sys.Timer.prototype={get_interval:function(){return this._interval},set_interval:function(a){if(this._interval!==a){this._interval=a;this.raisePropertyChanged("interval");if(!this.get_isUpdating()&&this._timer!==null){this._stopTimer();this._startTimer()}}},get_enabled:function(){return this._enabled},set_enabled:function(a){if(a!==this.get_enabled()){this._enabled=a;this.raisePropertyChanged("enabled");if(!this.get_isUpdating())if(a)this._startTimer();else this._stopTimer()}},add_tick:function(a){this.get_events().addHandler("tick",a)},remove_tick:function(a){this.get_events().removeHandler("tick",a)},dispose:function(){this.set_enabled(false);this._stopTimer();Sys.Timer.callBaseMethod(this,"dispose")},_timerCallback:function(){var a=this.get_events().getHandler("tick");a&&a(this,Sys.EventArgs.Empty)},_startTimer:function(){this._timer=window.setInterval(Function.createDelegate(this,this._timerCallback),this._interval)},_stopTimer:function(){window.clearInterval(this._timer);this._timer=null}};Sys.Timer.descriptor={properties:[{name:"interval",type:Number},{name:"enabled",type:Boolean}],events:[{name:"tick"}]};Sys.Timer.registerClass("Sys.Timer",Sys.Component);AjaxControlToolkit.PopupBehavior=function(a){AjaxControlToolkit.PopupBehavior.initializeBase(this,[a]);this._parentElement=null;this._parentElementID=null;this._firstPopup=true;this._originalParent=null;this._visible=false};AjaxControlToolkit.PopupBehavior.prototype={initialize:function(){AjaxControlToolkit.PopupBehavior.callBaseMethod(this,"initialize");this._hidePopup();this.get_element().style.position="absolute"},dispose:function(){var a=this.get_element();if(a){this._visible&&this.hide();if(this._originalParent){a.parentNode.removeChild(a);this._originalParent.appendChild(a);this._originalParent=null}}this._parentElement=null;AjaxControlToolkit.PopupBehavior.callBaseMethod(this,"dispose")},show:function(){if(this._visible)return;this._visible=true;var a=this.get_element();$common.setVisible(a,true)},hide:function(){if(!this._visible)return;this._visible=false;this._hidePopup();this._hideCleanup()},_hidePopup:function(){var a=this.get_element();$common.setVisible(a,false);if(a.originalWidth){a.style.width=a.originalWidth+"px";a.originalWidth=null}},_hideCleanup:function(){var a=this.get_element();this.raiseHidden(Sys.EventArgs.Empty)},get_parentElement:function(){if(!this._parentElement&&this._parentElementID){this.set_parentElement($get(this._parentElementID));Sys.Debug.assert(this._parentElement!=null,String.format(AjaxControlToolkit.Resources.PopupExtender_NoParentElement,this._parentElementID))}return this._parentElement},set_parentElement:function(a){this._parentElement=a;this.raisePropertyChanged("parentElement")},get_parentElementID:function(){if(this._parentElement)return this._parentElement.id;return this._parentElementID},set_parentElementID:function(a){this._parentElementID=a;this.get_isInitialized()&&this.set_parentElement($get(a))},get_visible:function(){return this._visible},add_hidden:function(a){this.get_events().addHandler("hidden",a)},remove_hidden:function(a){this.get_events().removeHandler("hidden",a)},raiseHidden:function(b){var a=this.get_events().getHandler("hidden");a&&a(this,b)}};AjaxControlToolkit.PopupBehavior.registerClass("AjaxControlToolkit.PopupBehavior",Sys.UI.Behavior);AjaxControlToolkit.PopupControlBehavior=function(a){AjaxControlToolkit.PopupControlBehavior.initializeBase(this,[a]);this._popupControlID=null;this._popupShowingScript=null;this._popupHiddenScript=null;this._hoverDelay=0;this._unhoverDelay=0;this._position=null;this._popupElement=null;this._popupBehavior=null;this._popupVisible=false;this._clickHandler=null;this._keyDownHandler=null;this._mouseOverHandler=null;this._mouseOutHandler=null;this._popupKeyDownHandler=null;this._popupClickHandler=null;this._popupMouseOverHandler=null;this._popupMouseOutHandler=null;this._bodyClickHandler=null;this._hoverTimeoutID=undefined;this._unhoverTimeoutID=undefined};AjaxControlToolkit.PopupControlBehavior.prototype={initialize:function(){AjaxControlToolkit.PopupControlBehavior.callBaseMethod(this,"initialize");$common.prepareHiddenElementForATDeviceUpdate();var a=this.get_element();this._popupElement=$get(this._popupControlID);this._popupBehavior=$create(AjaxControlToolkit.PopupBehavior,{id:this.get_id()+"PopupBehavior",parentElement:a},null,null,this._popupElement);this._clickHandler=Function.createDelegate(this,this._onClick);this._keyDownHandler=Function.createDelegate(this,this._onKeyDown);this._mouseOverHandler=Function.createDelegate(this,this._onMouseOver);this._mouseOutHandler=Function.createDelegate(this,this._onMouseOut);this._popupClickHandler=Function.createDelegate(this,this._onPopupClick);this._popupMouseOverHandler=Function.createDelegate(this,this._onPopupMouseOver);this._popupMouseOutHandler=Function.createDelegate(this,this._onPopupMouseOut);this._bodyClickHandler=Function.createDelegate(this,this._onBodyClick);this._popupKeyDownHandler=Function.createDelegate(this,this._onPopupKeyDown);$addHandler(a,"click",this._clickHandler);$addHandler(a,"keydown",this._keyDownHandler);$addHandler(a,"mouseover",this._mouseOverHandler);$addHandler(a,"mouseout",this._mouseOutHandler);$addHandler(document.body,"click",this._bodyClickHandler);$addHandler(this._popupElement,"click",this._popupClickHandler);$addHandler(this._popupElement,"keydown",this._popupKeyDownHandler);$addHandler(this._popupElement,"mouseover",this._popupMouseOverHandler);$addHandler(this._popupElement,"mouseout",this._popupMouseOutHandler);AdjustPopupPanel(this._popupElement,a)},dispose:function(){var a=this.get_element();if(this._popupBehavior){this._popupBehavior.dispose();this._popupBehavior=null}if(this._clickHandler){$removeHandler(a,"click",this._clickHandler);this._clickHandler=null}if(this._keyDownHandler){$removeHandler(a,"keydown",this._keyDownHandler);this._keyDownHandler=null}if(this._mouseOverHandler){$removeHandler(a,"mouseover",this._mouseOverHandler);this._mouseOverHandler=null}if(this._mouseOutHandler){$removeHandler(a,"mouseout",this._mouseOutHandler);this._mouseOutHandler=null}if(this._bodyClickHandler){$removeHandler(document.body,"click",this._bodyClickHandler);this._bodyClickHandler=null}if(this._popupClickHandler){$removeHandler(this._popupElement,"click",this._popupClickHandler);this._popupClickHandler=null}if(this._popupKeyDownHandler){$removeHandler(this._popupElement,"keydown",this._popupKeyDownHandler);this._popupKeyDownHandler=null}if(this._popupMouseOverHandler){$removeHandler(this._popupElement,"mouseover",this._popupMouseOverHandler);this._popupMouseOverHandler=null}if(this._popupMouseOutHandler){$removeHandler(this._popupElement,"mouseout",this._popupMouseOutHandler);this._popupMouseOutHandler=null}AjaxControlToolkit.PopupControlBehavior.callBaseMethod(this,"dispose")},clearHoverTimer:function(){if(this._hoverDelay&&this._hoverDelay>0&&this._hoverTimeoutID){window.clearTimeout(this._hoverTimeoutID);this._hoverTimeoutID=undefined}},setHoverTimer:function(){if(this._hoverDelay&&this._hoverDelay>0){this._hoverTimeoutID=window.setTimeout(Function.createDelegate(this,this.showPopup),this._hoverDelay);return true}else return false},clearUnhoverTimer:function(){if(this._unhoverDelay&&this._unhoverDelay>0&&this._unhoverTimeoutID){window.clearTimeout(this._unhoverTimeoutID);this._unhoverTimeoutID=undefined}},setUnhoverTimer:function(){if(this._unhoverDelay&&this._unhoverDelay>0){this._unhoverTimeoutID=window.setTimeout(Function.createDelegate(this,this.hidePopup),this._unhoverDelay);return true}else return false},showPopup:function(){var old=AjaxControlToolkit.PopupControlBehavior.__VisiblePopup;old&&old._popupBehavior&&old.hidePopup();var element=this.get_element();(element&&Sys.Browser.agent!=Sys.Browser.InternetExplorer||document.documentMode&&document.documentMode!=7)&&element.parentNode.insertBefore(this._popupElement,element.nextSibling);this.clearHoverTimer();if(this._popupShowingScript)eval(this._popupShowingScript);this._popupBehavior.show();if(this._popupElement&&Sys.Browser.agent==Sys.Browser.InternetExplorer&&(!document.documentMode||document.documentMode==7)){var elementBounds=$common.getBounds(element);if(elementBounds){var x;if(this._popupElement.currentStyle.direction=="rtl"){var xOffset=0;if(document.documentElement.scrollHeight>document.documentElement.clientHeight)xOffset=16;x=elementBounds.x+elementBounds.width-this._popupElement.offsetWidth-xOffset}else x=elementBounds.x;var y=elementBounds.y+element.offsetHeight,bounds=new Sys.UI.Bounds(x,y,this._popupElement.offsetWidth,this._popupElement.offsetHeight);$common.setLocation(this._popupElement,bounds)}}this._popupVisible=true;AjaxControlToolkit.PopupControlBehavior.__VisiblePopup=this},hidePopup:function(){this.clearUnhoverTimer();this._popupBehavior.hide();if(this._popupHiddenScript)eval(this._popupHiddenScript);this._popupVisible=false;AjaxControlToolkit.PopupControlBehavior.__VisiblePopup=null},hidePopupReturnFocus:function(){if(this._popupVisible){this.hidePopup();this.get_element().focus()}},_onClick:function(a){!this._popupVisible&&this.showPopup();a&&a.stopPropagation()},_onKeyDown:function(a){a.keyCode==27&&this.hidePopupReturnFocus()},_onMouseOver:function(){this.clearUnhoverTimer();!this._popupVisible&&this.setHoverTimer()},_onMouseOut:function(){this.clearHoverTimer();this._popupVisible&&this.setUnhoverTimer()},_onPopupKeyDown:function(a){a.keyCode==27&&this.hidePopupReturnFocus()},_onPopupMouseOver:function(){this._popupVisible&&this.clearUnhoverTimer()},_onPopupMouseOut:function(){this._popupVisible&&this.setUnhoverTimer()},_onPopupClick:function(a){this._popupVisible&&a.stopPropagation()},_onBodyClick:function(){this._popupVisible&&this.hidePopup()},get_PopupControlID:function(){return this._popupControlID},set_PopupControlID:function(a){if(this._popupControlID!=a){this._popupControlID=a;this.raisePropertyChanged("PopupControlID")}},get_PopupShowingScript:function(){return this._popupShowingScript},set_PopupShowingScript:function(a){if(this._popupShowingScript!=a){this._popupShowingScript=a;this.raisePropertyChanged("PopupShowingScript")}},get_PopupHiddenScript:function(){return this._popupHiddenScript},set_PopupHiddenScript:function(a){if(this._popupHiddenScript!=a){this._popupHiddenScript=a;this.raisePropertyChanged("PopupHiddenScript")}},get_HoverDelay:function(){return this._hoverDelay},set_HoverDelay:function(a){if(this._hoverDelay!=a){this._hoverDelay=a;this.raisePropertyChanged("HoverDelay")}},get_UnhoverDelay:function(){return this._unhoverDelay},set_UnhoverDelay:function(a){if(this._unhoverDelay!=a){this._unhoverDelay=a;this.raisePropertyChanged("UnhoverDelay")}},get_PopupVisible:function(){return this._popupVisible}};AjaxControlToolkit.PopupControlBehavior.registerClass("AjaxControlToolkit.PopupControlBehavior",Sys.UI.Behavior);AjaxControlToolkit.PopupControlBehavior.__VisiblePopup=null;AjaxControlToolkit.AutoCompleteBehavior=function(a){AjaxControlToolkit.AutoCompleteBehavior.initializeBase(this,[a]);this._enterKeyDownScript=null;this._minimumPrefixLength=3;this._completionInterval=1e3;this._offsetTop=0;this._offsetWidth=0;this._offsetLeft=0;this._queryCount=5;this._personalResultCount=3;this._showPeopleNameSuggestions=false;this._completionListElementID=null;this._completionListElement=null;this._popupBehavior=null;this._popupBehaviorHiddenHandler=null;this._timer=null;this._cache=null;this._currentPrefix=null;this._selectIndex=-1;this._highlightedItem=null;this._focusHandler=null;this._blurHandler=null;this._bodyClickHandler=null;this._completionListBlurHandler=null;this._keyDownHandler=null;this._mouseDownHandler=null;this._mouseOverHandler=null;this._tickHandler=null;this._enableCaching=true;this._textBoxHasFocus=false;this._completionListCssClass=null;this._completionListItemCssClass=null;this._personalResultTitleCssClass=null;this._hrCSSClass=null;this._personalResultTitleSingular=null;this._personalResultTitlePlural=null;this._highlightedItemCssClass=null;this._firstRowSelected=false;this._overlappingElementID=null;this._sourceId=null;this._webRequest=null;this._parentElementID=null};AjaxControlToolkit.AutoCompleteBehavior.prototype={initialize:function(){AjaxControlToolkit.AutoCompleteBehavior.callBaseMethod(this,"initialize");$common.prepareHiddenElementForATDeviceUpdate();this._popupBehaviorHiddenHandler=Function.createDelegate(this,this._popupHidden);this._tickHandler=Function.createDelegate(this,this._onTimerTick);this._focusHandler=Function.createDelegate(this,this._onGotFocus);this._blurHandler=Function.createDelegate(this,this._onLostFocus);this._keyDownHandler=Function.createDelegate(this,this._onKeyDown);this._mouseDownHandler=Function.createDelegate(this,this._onListMouseDown);this._mouseOverHandler=Function.createDelegate(this,this._onListMouseOver);this._completionListBlurHandler=Function.createDelegate(this,this._onCompletionListBlur);this._bodyClickHandler=Function.createDelegate(this,this._onCompletionListBlur);this._timer=new Sys.Timer;this.initializeTimer(this._timer);var b=this.get_element();this.initializeTextBox(b);if(this._completionListElementID!==null)this._completionListElement=$get(this._completionListElementID);if(this._completionListElement==null){this._completionListElement=document.createElement("ul");this._completionListElement.id=this.get_id()+"_AutoCompContainer";if(Sys.Browser.agent===Sys.Browser.Safari)document.body.appendChild(this._completionListElement);else b.parentNode.insertBefore(this._completionListElement,b.nextSibling)}this.initializeCompletionList(this._completionListElement);var a=this._getPopupContainer(this._completionListElement);if(a&&Sys.Browser.agent==Sys.Browser.InternetExplorer&&(!document.documentMode||document.documentMode==7))a.style.marginTop="-1px";this._popupBehavior=$create(AjaxControlToolkit.PopupBehavior,{id:this.get_id()+"PopupBehavior",parentElement:this._getPopupPositionParent()},null,null,a);this._popupBehavior.add_hidden(this._popupBehaviorHiddenHandler)},dispose:function(){if(this._popupBehavior){this._popupBehaviorHiddenHandler&&this._popupBehavior.remove_hidden(this._popupBehaviorHiddenHandler);this._popupBehavior.dispose();this._popupBehavior=null}if(this._timer){this._timer.dispose();this._timer=null}var a=this.get_element();if(a){$removeHandler(a,"focus",this._focusHandler);$removeHandler(a,"blur",this._blurHandler);$removeHandler(a,"keydown",this._keyDownHandler);$removeHandler(this._completionListElement,"blur",this._completionListBlurHandler);$removeHandler(this._completionListElement,"mouseover",this._mouseOverHandler)}if(this._bodyClickHandler){$removeHandler(document.body,"click",this._bodyClickHandler);this._bodyClickHandler=null}this._popupBehaviorHiddenHandler=null;this._tickHandler=null;this._focusHandler=null;this._blurHandler=null;this._keyDownHandler=null;this._completionListBlurHandler=null;this._mouseDownHandler=null;this._mouseOverHandler=null;AjaxControlToolkit.AutoCompleteBehavior.callBaseMethod(this,"dispose")},initializeTimer:function(a){a.set_interval(this._completionInterval);a.add_tick(this._tickHandler)},initializeTextBox:function(a){a.autocomplete="off";$addHandler(a,"focus",this._focusHandler);$addHandler(a,"blur",this._blurHandler);$addHandler(a,"keydown",this._keyDownHandler)},initializeCompletionList:function(a){this._completionListCssClass&&Sys.UI.DomElement.addCssClass(a,this._completionListCssClass);$addHandler(a,"mouseover",this._mouseOverHandler);$addHandler(a,"blur",this._completionListBlurHandler);$addHandler(document.body,"click",this._bodyClickHandler)},_getPopupPositionParent:function(){if(this._parentElementID)return $get(this._parentElementID);return this.get_element()},_getPopupContainer:function(b){var c="AutoCompContainer",a=b;while(a){if(a.id.endsWith(c))return a;a=a.parentNode}return b},_currentCompletionWord:function(){var a=this.get_element();return a.value},_getText:function(a){if(a)return a.innerText||a.textContent||a;else return ""},showPopup:function(){if(this._overlappingElementID!=null){var a=$find(this._overlappingElementID);a&&a.hidePopup()}this._popupBehavior.show()},hidePopup:function(){this._popupBehavior&&this._popupBehavior.hide();this._popupHidden()},_popupHidden:function(){if(this._completionListElement){for(var b=this._completionListElement.childNodes,a=0;a<b.length;a++)$clearHandlers(b[a]);this._completionListElement.innerHTML=""}this._selectIndex=-1;this._highlightedItem=null},_highlightItem:function(a){if(this._highlightedItem){if(this._completionListItemCssClass){Sys.UI.DomElement.removeCssClass(this._highlightedItem,this._highlightedItemCssClass);Sys.UI.DomElement.addCssClass(this._highlightedItem,this._completionListItemCssClass)}this._highlightedItem=null}if(a){if(this._highlightedItemCssClass){Sys.UI.DomElement.removeCssClass(a,this._completionListItemCssClass);Sys.UI.DomElement.addCssClass(a,this._highlightedItemCssClass)}this._highlightedItem=a}},_getCompletionListItem:function(a){if(a)if(a._index!=null&&a._index!=undefined)return a;else if(a===this._completionListElement)return null;else return this._getCompletionListItem(a.parentNode);else return null},_onCompletionListBlur:function(){this.hidePopup()},_onListMouseDown:function(ev){var item=this._getCompletionListItem(ev.target);if(item!=null){suggestedQuery=true;if(item.isQuery!==null&&item.isQuery!==undefined&&item.isQuery===false&&item.url!==null&&item.url!==undefined){this.hidePopup();window.location=item.url}else if(this._enterKeyDownScript){this._setText(item);this.hidePopup();eval(this._enterKeyDownScript)}}},_onListMouseOver:function(b){var a=this._getCompletionListItem(b.target);if(a!=null){this._highlightItem(a);this._selectIndex=a._index;if(a.isQuery===true)suggestedQuery=true}},_onGotFocus:function(){this._textBoxHasFocus=true},_onKeyDown:function(ev){this._timer.set_enabled(false);var k=ev.keyCode?ev.keyCode:ev.rawEvent.keyCode;if(k===Sys.UI.Key.esc){this._selectIndex>-1&&this._setText(this._currentPrefix);this.hidePopup();suggestedQuery=false;ev.preventDefault()}else if(k===Sys.UI.Key.up){if(this._selectIndex>-1){do this._selectIndex-=1;while(this._selectIndex>-1&&(this._completionListElement.childNodes[this._selectIndex].className===this._hrCSSClass||this._completionListElement.childNodes[this._selectIndex].className===this._personalResultTitleCssClass))}else this._selectIndex=this._completionListElement.childNodes.length-1;if(this._selectIndex==-1){this._highlightItem(null);this._setText(this._currentPrefix);suggestedQuery=false}else{var item=this._completionListElement.childNodes[this._selectIndex];if(item.className===this._completionListItemCssClass){this._handleScroll(item,this._selectIndex);this._highlightItem(item);if(!Srch.U.n(item.isQuery))if(item.isQuery)this._setText(this._completionListElement.childNodes[this._selectIndex]);else this._setText(this._currentPrefix);suggestedQuery=true}}ev.stopPropagation();ev.preventDefault()}else if(k===Sys.UI.Key.down){if(this._selectIndex<this._completionListElement.childNodes.length-1){do this._selectIndex+=1;while(this._selectIndex<this._completionListElement.childNodes.length-1&&(this._completionListElement.childNodes[this._selectIndex].className===this._hrCSSClass||this._completionListElement.childNodes[this._selectIndex].className===this._personalResultTitleCssClass))}else this._selectIndex=-1;if(this._selectIndex==-1){this._highlightItem(null);this._setText(this._currentPrefix);suggestedQuery=false}else{var item=this._completionListElement.childNodes[this._selectIndex];if(item.className===this._completionListItemCssClass){this._handleScroll(item,this._selectIndex);this._highlightItem(item);if(!Srch.U.n(item.isQuery))if(item.isQuery)this._setText(this._completionListElement.childNodes[this._selectIndex]);else this._setText(this._currentPrefix);suggestedQuery=true}}ev.stopPropagation();ev.preventDefault()}else if(k===Sys.UI.Key.enter)if(this._selectIndex!==-1){var item=this._completionListElement.childNodes[this._selectIndex];if(item!==null&&item!==undefined&&item.isQuery!==null&&item.isQuery!==undefined&&item.isQuery===false&&item.url!==null&&item.url!==undefined)window.location=item.url;else if(this._enterKeyDownScript)eval(this._enterKeyDownScript);this.hidePopup();ev.preventDefault()}else this.hidePopup();else if(k===Sys.UI.Key.tab){this.hidePopup();suggestedQuery=false}else if(!(k===Sys.UI.Key.right||k===Sys.UI.Key.left||k===Sys.UI.Key.pageUp||k===Sys.UI.Key.pageDown||k===Sys.UI.Key.home||k===Sys.UI.Key.end)){!this._textBoxHasFocus&&this._onGotFocus();this._timer.set_enabled(true);suggestedQuery=false}},_handleScroll:function(e,c){var a=this._completionListElement,b=$common.getBounds(e),d=this._completionListElement.childNodes.length;if(b.height*c-(a.clientHeight+a.scrollTop)>=0)a.scrollTop+=b.height*c-(a.clientHeight+a.scrollTop)+b.height;if(b.height*(d-(c+1))-(a.scrollHeight-a.scrollTop)>=0)a.scrollTop-=b.height*(d-(c+1))-(a.scrollHeight-a.scrollTop)+b.height;if(a.scrollTop%b.height!==0)if(b.height*(c+1)-(a.clientHeight+a.scrollTop)>=0)a.scrollTop-=a.scrollTop%b.height;else a.scrollTop+=b.height-a.scrollTop%b.height},_onLostFocus:function(){this._textBoxHasFocus=false;this._timer.set_enabled(false);this.hidePopup();if(this._webRequest){this._webRequest.get_executor().abort();this._webRequest=null}},_onMethodComplete:function(b,a){this._webRequest=null;this._update(a,b,true)},_onMethodFailed:function(){this._webRequest=null},_onTimerTick:function(){this._timer.set_enabled(false);var a=this._currentCompletionWord();if(a.trim().length<this._minimumPrefixLength){this._currentPrefix=null;this.hidePopup();return}this._currentPrefix=a;if(a!=""&&this._cache&&this._cache[a]){this._update(a,this._cache[a],false);return}EnsureScript("sp.search.js",TypeofFullName("Microsoft.SharePoint.Client.Search.Query.KeywordQuery"),Function.createDelegate(this,this._getSuggestion))},_getSuggestion:function(){var b=Srch.ScriptApplicationManager.get_clientRuntimeContext();try{var a=new Microsoft.SharePoint.Client.Search.Query.KeywordQuery.newObject(b);if(a){var e=this._currentPrefix;a.set_queryText(e);var d=Srch.AU.get_querySuggestionLanguage();d>0&&a.set_culture(d);a.set_showPeopleNameSuggestions(this._showPeopleNameSuggestions);var c=Srch.U.e(this._sourceId)?null:new SP.Guid(this._sourceId);c!=null&&a.set_sourceId(c);var g=a.getQuerySuggestionsWithResults(this._queryCount,this._personalResultCount,true,true,this._showPeopleNameSuggestions,false);b.executeQueryAsync(Function.createDelegate(this,function(){try{this._update(e,g,true)}catch(a){Srch.U.trace(null,"AutoCompleteBehavior._update",a.toString())}}),function(){})}}catch(f){Srch.U.trace(null,"AutoCompleteBehavior._getSuggestion",f.toString())}$common.updateFormToRefreshATDeviceBuffer()},_setText:function(d){this._timer.set_enabled(false);var c=this._getText(d),b=this.get_element(),a=b.control;if(a&&a.set_text)a.set_text(c);else b.value=c},_display:function(c,g,f){for(var e=null,b=0;b<c.length;b++){var a=null;if(this._completionListElementID)a=document.createElement("div");else a=document.createElement("li");if(e==null)e=a;if(!g){var d=document.createElement("a");d.id="PR_Item"+b;d.innerHTML=c[b].get_title();a.appendChild(d);a.url=Srch.U.ensureAllowedProtocol(c[b].get_url());a.isQuery=false}else{if(typeof c[0]=="string")a.innerHTML=c[b];else a.innerHTML=c[b].get_query();a.id="QS_Item"+b;a.url="";a.isQuery=true}a._index=b+f;this._completionListItemCssClass&&Sys.UI.DomElement.addCssClass(a,this._completionListItemCssClass);$addHandler(a,"mousedown",this._mouseDownHandler);this._completionListElement.appendChild(a)}return e},_update:function(m,d,q){if(q&&this.get_enableCaching()){if(!this._cache)this._cache={};this._cache[m]=d}if(!this._textBoxHasFocus||m!=this._currentCompletionWord())return;if(d){var c=d.get_queries(),b=d.get_personalResults(),e=d.get_peopleNames();if((c===null||c===undefined||c.length===0)&&(b===null||b===undefined||b.length===0)&&(e===null||e===undefined||e.length===0)){this.hidePopup();return}for(var n=this._completionListElement.childNodes,i=0;i<n.length;i++)$clearHandlers(n[i]);this._completionListElement.innerHTML="";this._selectIndex=-1;this._highlightedItem=null;var a=0,j=this._display(c,true,a);a+=c.length;if(c.length>0&&b.length>0){var h=document.createElement("div");Sys.UI.DomElement.addCssClass(h,this._hrCSSClass);this._completionListElement.appendChild(h);a++}if(b.length>0){var g=document.createElement("div");Sys.UI.DomElement.addCssClass(g,this._personalResultTitleCssClass);g.id=this.get_id()+"_PersonalResultsTitle";g.innerHTML=STSHtmlEncode(b.length>1?this._personalResultTitlePlural:this._personalResultTitleSingular);this._completionListElement.appendChild(g);a++}var k=this._display(b,false,a);a+=b.length;if(e.length>0){if(c.length>0||b.length>0){var h=document.createElement("div");Sys.UI.DomElement.addCssClass(h,this._hrCSSClass);this._completionListElement.appendChild(h);a++}var f=document.createElement("div");Sys.UI.DomElement.addCssClass(f,this._personalResultTitleCssClass);f.id=this.get_id()+"_NameResultsTitle";f.innerHTML=STSHtmlEncode(Srch.Res.qs_NameSuggestionsTitle);this._completionListElement.appendChild(f);a++}var r=this._display(e,true,a),p=$common.getBounds(this._getPopupPositionParent()),o=p.width+this._offsetWidth;if(o>0)this._completionListElement.style.width=o+"px";this._completionListElement.scrollTop=0;this.showPopup();var l=j?j:k?k:r;if(this._firstRowSelected&&l!=null){this._highlightItem(l);this._selectIndex=0}}else this.hidePopup()},get_completionInterval:function(){return this._completionInterval},set_completionInterval:function(a){if(this._completionInterval!=a){this._completionInterval=a;this.raisePropertyChanged("completionInterval")}},get_overlappingElementID:function(){return this._overlappingElementID},set_overlappingElementID:function(a){if(this._overlappingElementID!=a){this._overlappingElementID=a;this.raisePropertyChanged("overlappingElementID")}},get_queryCount:function(){return this._queryCount},set_queryCount:function(a){if(this._queryCount!=a){this._queryCount=a;this.raisePropertyChanged("queryCount")}},get_personalResultCount:function(){return this._personalResultCount},set_personalResultCount:function(a){if(this._personalResultCount!=a){this._personalResultCount=a;this.raisePropertyChanged("personalResultCount")}},get_showPeopleNameSuggestions:function(){return this._showPeopleNameSuggestions},set_showPeopleNameSuggestions:function(a){if(this._showPeopleNameSuggestions!=a){this._showPeopleNameSuggestions=a;this.raisePropertyChanged("showPeopleNameSuggestions")}},get_completionList:function(){return this._completionListElement},set_completionList:function(a){if(this._completionListElement!=a){this._completionListElement=a;this.raisePropertyChanged("completionList")}},get_offsetTop:function(){return this._offsetTop},set_offsetTop:function(a){if(this._offsetTop!=a){this._offsetTop=a;this.raisePropertyChanged("offsetTop")}},get_offsetWidth:function(){return this._offsetWidth},set_offsetWidth:function(a){if(this._offsetWidth!=a){this._offsetWidth=a;this.raisePropertyChanged("_offsetWidth")}},get_offsetLeft:function(){return this._offsetLeft},set_offsetLeft:function(a){if(this._offsetLeft!=a){this._offsetLeft=a;this.raisePropertyChanged("offsetLeft")}},get_minimumPrefixLength:function(){return this._minimumPrefixLength},set_minimumPrefixLength:function(a){if(this._minimumPrefixLength!=a){if(a<1)a=1;this._minimumPrefixLength=a;this.raisePropertyChanged("minimumPrefixLength")}},get_enterKeyDownScript:function(){return this._enterKeyDownScript},set_enterKeyDownScript:function(a){if(this._enterKeyDownScript!=a){this._enterKeyDownScript=a;this.raisePropertyChanged("enterKeyDownScript")}},get_enableCaching:function(){return this._enableCaching},set_enableCaching:function(a){if(this._enableCaching!=a){this._enableCaching=a;this.raisePropertyChanged("enableCaching")}},get_completionListElementID:function(){return this._completionListElementID},set_completionListElementID:function(a){if(this._completionListElementID!=a){this._completionListElementID=a;this.raisePropertyChanged("completionListElementID")}},get_parentElementID:function(){return this._parentElementID},set_parentElementID:function(a){if(this._parentElementID!=a){this._parentElementID=a;this.raisePropertyChanged("parentElementID")}},get_completionListCssClass:function(){return this._completionListCssClass},set_completionListCssClass:function(a){if(this._completionListCssClass!=a){this._completionListCssClass=a;this.raisePropertyChanged("completionListCssClass")}},get_completionListItemCssClass:function(){return this._completionListItemCssClass},set_completionListItemCssClass:function(a){if(this._completionListItemCssClass!=a){this._completionListItemCssClass=a;this.raisePropertyChanged("completionListItemCssClass")}},get_personalResultTitleCssClass:function(){return this._personalResultTitleCssClass},set_personalResultTitleCssClass:function(a){if(this._personalResultTitleCssClass!=a){this._personalResultTitleCssClass=a;this.raisePropertyChanged("personalResultTitleCssClass")}},get_hrCSSClass:function(){return this._hrCSSClass},set_hrCSSClass:function(a){if(this._hrCSSClass!=a){this._hrCSSClass=a;this.raisePropertyChanged("hrCSSClass")}},get_personalResultTitleSingular:function(){return this._personalResultTitleSingular},set_personalResultTitleSingular:function(a){if(this._personalResultTitleSingular!=a){this._personalResultTitleSingular=a;this.raisePropertyChanged("personalResultTitleSingular")}},get_personalResultTitlePlural:function(){return this._personalResultTitlePlural},set_personalResultTitlePlural:function(a){if(this._personalResultTitlePlural!=a){this._personalResultTitlePlural=a;this.raisePropertyChanged("personalResultTitlePlural")}},get_highlightedItemCssClass:function(){return this._highlightedItemCssClass},set_highlightedItemCssClass:function(a){if(this._highlightedItemCssClass!=a){this._highlightedItemCssClass=a;this.raisePropertyChanged("highlightedItemCssClass")}},get_firstRowSelected:function(){return this._firstRowSelected},set_firstRowSelected:function(a){if(this._firstRowSelected!=a){this._firstRowSelected=a;this.raisePropertyChanged("firstRowSelected")}},get_sourceId:function(){return this._sourceId},set_sourceId:function(a){if(this._sourceId!=a){this._sourceId=a;this.raisePropertyChanged("sourceId")}}};AjaxControlToolkit.AutoCompleteBehavior.registerClass("AjaxControlToolkit.AutoCompleteBehavior",Sys.UI.Behavior);AjaxControlToolkit.AutoCompleteBehavior.descriptor={properties:[{name:"completionInterval",type:Number},{name:"completionList",isDomElement:true},{name:"completionListElementID",type:String},{name:"parentElementID",type:String},{name:"minimumPrefixLength",type:Number},{name:"personalResultTitleCssClass",type:String},{name:"hrCSSClass",type:String},{name:"highlightedItemCssClass",type:String},{name:"personalResultTitle",type:String},{name:"offsetTop",type:Number},{name:"offsetWidth",type:Number},{name:"offsetLeft",type:Number},{name:"queryCount",type:Number},{name:"personalResultCount",type:Number},{name:"showPeopleNameSuggestions",type:Boolean},{name:"enableCaching",type:Boolean},{name:"overlappingElementID",type:String}]};AjaxControlToolkit.DropdownListBehavior=function(a){AjaxControlToolkit.DropdownListBehavior.initializeBase(this,[a]);this._offsetTop=0;this._offsetWidth=0;this._offsetLeft=0;this._listElementID=null;this._listElement=null;this._parentElementID=null;this._popupBehavior=null;this._selectIndex=-1;this._highlightedItem=null;this._bodyClickHandler=null;this._listBlurHandler=null;this._keyDownHandler=null;this._buttonClickHandler=null;this._listKeyDownHandler=null;this._mouseDownHandler=null;this._mouseOverHandler=null;this._hrCSSClass=null;this._highlightedItemCssClass=null;this._buttonOpenCssClass=null;this._containerOpenCssClass=null;this._dropdownInitVisible=false;this._firstRowSelected=false;this._overlappingElementID=null;this._listItems=null;this._textBoxControl=null;this._textBoxElementId=null;this._prompt=null;this._resultsPageUrl=null;this._useResultsPage=false};AjaxControlToolkit.DropdownListBehavior.prototype={initialize:function(){AjaxControlToolkit.DropdownListBehavior.callBaseMethod(this,"initialize");$common.prepareHiddenElementForATDeviceUpdate();this._keyDownHandler=Function.createDelegate(this,this._onKeyDown);this._buttonClickHandler=Function.createDelegate(this,this._togglePopup);this._mouseDownHandler=Function.createDelegate(this,this._onListMouseDown);this._mouseOverHandler=Function.createDelegate(this,this._onListMouseOver);this._listBlurHandler=Function.createDelegate(this,this._onListBlur);this._listKeyDownHandler=Function.createDelegate(this,this._onKeyDown);this._bodyClickHandler=Function.createDelegate(this,this._onBodyClick);this.initializeTextBox();var b=this.get_element();this.initializeButton(b);if(this._listElementID!==null)this._listElement=$get(this._listElementID);this.initializeList(this._listElement);var a=this._getPopupContainer(this._listElement);if(a&&Sys.Browser.agent==Sys.Browser.InternetExplorer&&(!document.documentMode||document.documentMode==7))a.style.marginTop="-1px";this._popupBehavior=$create(AjaxControlToolkit.PopupBehavior,{id:this.get_id()+"PopupBehavior",parentElement:this._getPopupPositionParent()},null,null,a);this._popupBehavior.hide();this._dropdownInitVisible&&this.showPopup()},dispose:function(){if(this._popupBehavior){this._popupBehavior.dispose();this._popupBehavior=null}var a=this.get_element();if(a){$removeHandler(a,"keydown",this._keyDownHandler);$removeHandler(a,"click",this._buttonClickHandler)}if(this._listElement){$removeHandler(this._listElement,"blur",this._listBlurHandler);$removeHandler(this._listElement,"mouseover",this._mouseOverHandler);$removeHandler(this._listElement,"keydown",this._listKeyDownHandler);for(var c=this._listElement.childNodes,b=0;b<c.length;b++){var d=c[b];$removeHandler(d,"mousedown",this._mouseDownHandler)}}if(this._bodyClickHandler){$removeHandler(document.body,"click",this._bodyClickHandler);this._bodyClickHandler=null}this._keyDownHandler=null;this._listBlurHandler=null;this._mouseDownHandler=null;this._mouseOverHandler=null;this._listKeyDownHandle=null;AjaxControlToolkit.DropdownListBehavior.callBaseMethod(this,"dispose")},initializeButton:function(a){$addHandler(a,"keydown",this._keyDownHandler);$addHandler(a,"click",this._buttonClickHandler)},initializeList:function(a){this._listCssClass&&Sys.UI.DomElement.addCssClass(a,this._listCssClass);$addHandler(a,"mouseover",this._mouseOverHandler);$addHandler(a,"blur",this._listBlurHandler);$addHandler(a,"keydown",this._listKeyDownHandler);$addHandler(document.body,"click",this._bodyClickHandler);this._populateList()},initializeTextBox:function(){if(this._textBoxControl){this._prompt=this._textBoxControl.get_currentPrompt();this._resultsPageUrl=this._textBoxControl.get_resultsPageAddress();this._useResultsPage=!this._textBoxControl.get_tryInplaceQuery();this._textBoxElementId=this._textBoxControl.get_searchBoxInputId()}},_populateList:function(){var b=this._listItems;if(b===null||b===undefined||b.length===0)return;this._listElement.innerHTML="";this._selectIndex=-1;this._highlightedItem=null;for(var c=0;c<b.length;c++){var a=document.createElement("div");a.innerHTML=b[c].name;a._promptString=b[c].promptString;a._url=b[c].url;a._index=c;this._listItemCssClass&&Sys.UI.DomElement.addCssClass(a,this._listItemCssClass);$addHandler(a,"mousedown",this._mouseDownHandler);this._listElement.appendChild(a)}var e=$common.getBounds(this._getPopupPositionParent()),d=e.width+this._offsetWidth;if(d>0)this._listElement.style.width=d+"px";this._listElement.scrollTop=0},_getPopupPositionParent:function(){if(this._parentElementID)return $get(this._parentElementID);return null},_getPopupContainer:function(b){var c="DropdownListContainer",a=b;while(a){if(a.id&&a.id.endsWith(c))return a;a=a.parentNode}return b},showPopup:function(){if(this._overlappingElementID!=null){var b=$find(this._overlappingElementID);b&&b.hidePopup()}this._popupBehavior.show();var a=this.get_element();a&&Srch.U.ensureCSSClassNameExist(a,this._buttonOpenCssClass);this._textBoxControl.setBorder(true);$common.updateFormToRefreshATDeviceBuffer()},hidePopup:function(){this._popupBehavior&&this._popupBehavior.hide();var a=this.get_element();a&&Srch.U.ensureCSSClassNameNotExist(a,this._buttonOpenCssClass);this._textBoxControl.setBorder(false)},_togglePopup:function(a){if(this._popupBehavior.get_visible())this.hidePopup();else this.showPopup();a.stopPropagation()},_highlightItem:function(a){if(this._highlightedItem){if(this._listItemCssClass){Sys.UI.DomElement.removeCssClass(this._highlightedItem,this._highlightedItemCssClass);Sys.UI.DomElement.addCssClass(this._highlightedItem,this._listItemCssClass)}this._highlightedItem=null}if(a){if(this._highlightedItemCssClass){Sys.UI.DomElement.removeCssClass(a,this._listItemCssClass);Sys.UI.DomElement.addCssClass(a,this._highlightedItemCssClass)}this._highlightedItem=a}},_getListItem:function(a){if(a)if(a._index!=null&&a._index!=undefined)return a;else if(a===this._listElement)return null;else return this._getListItem(a.parentNode);else return null},_onListBlur:function(){this.hidePopup()},_onBodyClick:function(){this.hidePopup()},_onListMouseDown:function(b){var a=this._getListItem(b.target);if(a!=null){this._selectAction(a);this.hidePopup();this._enterAction()}},_onListMouseOver:function(b){var a=this._getListItem(b.target);if(a!=null){this._highlightItem(a);this._selectIndex=parseInt(a._index);this._selectAction(a)}},_onKeyDown:function(b){var a=b.keyCode?b.keyCode:b.rawEvent.keyCode;if(a===Sys.UI.Key.esc){this.hidePopup();b.preventDefault()}else if(a===Sys.UI.Key.up){if(this._selectIndex>-1){do this._selectIndex-=1;while(this._selectIndex>-1&&this._listElement.childNodes[this._selectIndex].className===this._hrCSSClass)}else this._selectIndex=this._listElement.childNodes.length-1;if(this._selectIndex==-1){this._highlightItem(null);this._selectAction(null)}else if(this._listElement.childNodes[this._selectIndex].className===this._listItemCssClass){this._handleScroll(this._listElement.childNodes[this._selectIndex],this._selectIndex);this._highlightItem(this._listElement.childNodes[this._selectIndex]);this._selectAction(this._listElement.childNodes[this._selectIndex])}b.stopPropagation();b.preventDefault()}else if(a===Sys.UI.Key.down){if(this._selectIndex<this._listElement.childNodes.length-1){do this._selectIndex+=1;while(this._selectIndex<this._listElement.childNodes.length-1&&this._listElement.childNodes[this._selectIndex].className===this._hrCSSClass)}else this._selectIndex=-1;if(this._selectIndex==-1){this._highlightItem(null);this._selectAction(null)}else if(this._listElement.childNodes[this._selectIndex].className===this._listItemCssClass){this._handleScroll(this._listElement.childNodes[this._selectIndex],this._selectIndex);this._highlightItem(this._listElement.childNodes[this._selectIndex]);this._selectAction(this._listElement.childNodes[this._selectIndex])}b.stopPropagation();b.preventDefault()}else if(a===Sys.UI.Key.enter){if(this._selectIndex!==-1){var c=this._listElement.childNodes[this._selectIndex];this._enterAction()}this._togglePopup(b);b.preventDefault()}else if(a===Sys.UI.Key.tab){if(this._selectIndex!==-1){this._selectAction(this._listElement.childNodes[this._selectIndex]);this.hidePopup()}}else if(a===Sys.UI.Key.right||a===Sys.UI.Key.left||a===Sys.UI.Key.pageUp||a===Sys.UI.Key.pageDown||a===Sys.UI.Key.home||a===Sys.UI.Key.end);},_handleScroll:function(e,c){var a=this._listElement,b=$common.getBounds(e),d=this._listElement.childNodes.length;if(b.height*c-(a.clientHeight+a.scrollTop)>=0)a.scrollTop+=b.height*c-(a.clientHeight+a.scrollTop)+b.height;if(b.height*(d-(c+1))-(a.scrollHeight-a.scrollTop)>=0)a.scrollTop-=b.height*(d-(c+1))-(a.scrollHeight-a.scrollTop)+b.height;if(a.scrollTop%b.height!==0)if(b.height*(c+1)-(a.clientHeight+a.scrollTop)>=0)a.scrollTop-=a.scrollTop%b.height;else a.scrollTop+=b.height-a.scrollTop%b.height},_selectAction:function(a){var b=null,c=null,d=true;if(a&&!Srch.U.e(a._promptString)&&!Srch.U.e(a._url)){b=a._promptString;c=a._url}else{b=this._prompt;c=this._resultsPageUrl;d=this._useResultsPage}if(this._textBoxControl){this._textBoxControl.set_currentPrompt(b);this._textBoxControl.set_resultsPageAddress(c);this._textBoxControl.set_tryInplaceQuery(!d)}},_enterAction:function(){if(this._textBoxControl){var a=this._textBoxControl.get_searchBoxInputElement().value;a&&a!=""&&a!=this._textBoxControl.get_currentPrompt()&&this._textBoxControl.search(a)}},get_overlappingElementID:function(){return this._overlappingElementID},set_overlappingElementID:function(a){if(this._overlappingElementID!=a){this._overlappingElementID=a;this.raisePropertyChanged("overlappingElementID")}},get_listItems:function(){return this._listItems},set_listItems:function(a){this._listItems=a;this.raisePropertyChanged("listItems")},get_textBoxControl:function(){return this._textBoxControl},set_textBoxControl:function(a){this._textBoxControl=a;this.raisePropertyChanged("textBoxControl")},get_list:function(){return this._listElement},set_list:function(a){if(this._listElement!=a){this._listElement=a;this.raisePropertyChanged("list")}},get_offsetTop:function(){return this._offsetTop},set_offsetTop:function(a){if(this._offsetTop!=a){this._offsetTop=a;this.raisePropertyChanged("offsetTop")}},get_offsetWidth:function(){return this._offsetWidth},set_offsetWidth:function(a){if(this._offsetWidth!=a){this._offsetWidth=a;this.raisePropertyChanged("offsetWidth")}},get_offsetLeft:function(){return this._offsetLeft},set_offsetLeft:function(a){if(this._offsetLeft!=a){this._offsetLeft=a;this.raisePropertyChanged("offsetLeft")}},get_listElementID:function(){return this._listElementID},set_listElementID:function(a){if(this._listElementID!=a){this._listElementID=a;this.raisePropertyChanged("listElementID")}},get_parentElementID:function(){return this._parentElementID},set_parentElementID:function(a){if(this._parentElementID!=a){this._parentElementID=a;this.raisePropertyChanged("parentElementID")}},get_listCssClass:function(){return this._listCssClass},set_listCssClass:function(a){if(this._listCssClass!=a){this._listCssClass=a;this.raisePropertyChanged("listCssClass")}},get_listItemCssClass:function(){return this._listItemCssClass},set_listItemCssClass:function(a){if(this._listItemCssClass!=a){this._listItemCssClass=a;this.raisePropertyChanged("listItemCssClass")}},get_hrCSSClass:function(){return this._hrCSSClass},set_hrCSSClass:function(a){if(this._hrCSSClass!=a){this._hrCSSClass=a;this.raisePropertyChanged("hrCSSClass")}},get_highlightedItemCssClass:function(){return this._highlightedItemCssClass},set_highlightedItemCssClass:function(a){if(this._highlightedItemCssClass!=a){this._highlightedItemCssClass=a;this.raisePropertyChanged("highlightedItemCssClass")}},get_dropdownInitVisible:function(){return this._dropdownInitVisible},set_dropdownInitVisible:function(a){if(this._dropdownInitVisible!=a){this._dropdownInitVisible=a;this.raisePropertyChanged("dropdownInitVisible")}},get_firstRowSelected:function(){return this._firstRowSelected},set_firstRowSelected:function(a){if(this._firstRowSelected!=a){this._firstRowSelected=a;this.raisePropertyChanged("firstRowSelected")}},get_buttonOpenCssClass:function(){return this._buttonOpenCssClass},set_buttonOpenCssClass:function(a){if(this._buttonOpenCssClass!=a){this._buttonOpenCssClass=a;this.raisePropertyChanged("buttonOpenCssClass")}},get_containerOpenCssClass:function(){return this._containerOpenCssClass},set_containerOpenCssClass:function(a){if(this._containerOpenCssClass!=a){this._containerOpenCssClass=a;this.raisePropertyChanged("containerOpenCssClass")}}};AjaxControlToolkit.DropdownListBehavior.registerClass("AjaxControlToolkit.DropdownListBehavior",Sys.UI.Behavior);AjaxControlToolkit.DropdownListBehavior.descriptor={properties:[{name:"list",isDomElement:true},{name:"listElementID",type:String},{name:"parentElementID",type:String},{name:"listCssClass",type:String},{name:"listItemCssClass",type:String},{name:"highlightedItemCssClass",type:String},{name:"hrCSSClass",type:String},{name:"offsetTop",type:Number},{name:"offsetWidth",type:Number},{name:"offsetLeft",type:Number},{name:"overlappingElementID",type:String}]};Type.registerNamespace("AjaxControlToolkit");AjaxControlToolkit.IDragSource=function(){};AjaxControlToolkit.IDragSource.prototype={get_dragDataType:function(){throw Error.notImplemented()},getDragData:function(){throw Error.notImplemented()},get_dragMode:function(){throw Error.notImplemented()},onDragStart:function(){throw Error.notImplemented()},onDrag:function(){throw Error.notImplemented()},onDragEnd:function(){throw Error.notImplemented()}};AjaxControlToolkit.IDragSource.registerInterface("AjaxControlToolkit.IDragSource");AjaxControlToolkit.IDropTarget=function(){};AjaxControlToolkit.IDropTarget.prototype={get_dropTargetElement:function(){throw Error.notImplemented()},canDrop:function(){throw Error.notImplemented()},drop:function(){throw Error.notImplemented()},onDragEnterTarget:function(){throw Error.notImplemented()},onDragLeaveTarget:function(){throw Error.notImplemented()},onDragInTarget:function(){throw Error.notImplemented()}};AjaxControlToolkit.IDropTarget.registerInterface("AjaxControlToolkit.IDropTarget");AjaxControlToolkit.DragMode=function(){throw Error.invalidOperation()};AjaxControlToolkit.DragMode.prototype={Copy:0,Move:1};AjaxControlToolkit.DragMode.registerEnum("AjaxControlToolkit.DragMode");AjaxControlToolkit.DragDropEventArgs=function(c,a,b){this._dragMode=c;this._dataType=a;this._data=b};AjaxControlToolkit.DragDropEventArgs.prototype={get_dragMode:function(){return this._dragMode||null},get_dragDataType:function(){return this._dataType||null},get_dragData:function(){return this._data||null}};AjaxControlToolkit.DragDropEventArgs.registerClass("AjaxControlToolkit.DragDropEventArgs");AjaxControlToolkit._DragDropManager=function(){this._instance=null;this._events=null};AjaxControlToolkit._DragDropManager.prototype={add_dragStart:function(a){this.get_events().addHandler("dragStart",a)},remove_dragStart:function(a){this.get_events().removeHandler("dragStart",a)},get_events:function(){if(!this._events)this._events=new Sys.EventHandlerList;return this._events},add_dragStop:function(a){this.get_events().addHandler("dragStop",a)},remove_dragStop:function(a){this.get_events().removeHandler("dragStop",a)},_getInstance:function(){if(!this._instance){if(Sys.Browser.agent===Sys.Browser.InternetExplorer)this._instance=new AjaxControlToolkit.IEDragDropManager;else this._instance=new AjaxControlToolkit.GenericDragDropManager;this._instance.initialize();this._instance.add_dragStart(Function.createDelegate(this,this._raiseDragStart));this._instance.add_dragStop(Function.createDelegate(this,this._raiseDragStop))}return this._instance},startDragDrop:function(b,c,d,a){this._getInstance().startDragDrop(b,c,d,a)},registerDropTarget:function(a){this._getInstance().registerDropTarget(a)},unregisterDropTarget:function(a){this._getInstance().unregisterDropTarget(a)},dispose:function(){delete this._events;Sys.Application.unregisterDisposableObject(this);Sys.Application.removeComponent(this)},_raiseDragStart:function(c,b){var a=this.get_events().getHandler("dragStart");a&&a(this,b)},_raiseDragStop:function(c,b){var a=this.get_events().getHandler("dragStop");a&&a(this,b)}};AjaxControlToolkit._DragDropManager.registerClass("AjaxControlToolkit._DragDropManager");AjaxControlToolkit.DragDropManager=new AjaxControlToolkit._DragDropManager;AjaxControlToolkit.IEDragDropManager=function(){AjaxControlToolkit.IEDragDropManager.initializeBase(this);this._dropTargets=null;this._radius=10;this._useBuiltInDragAndDropFunctions=true;this._activeDragVisual=null;this._activeContext=null;this._activeDragSource=null;this._underlyingTarget=null;this._oldOffset=null;this._potentialTarget=null;this._isDragging=false;this._mouseUpHandler=null;this._documentMouseMoveHandler=null;this._documentDragOverHandler=null;this._dragStartHandler=null;this._mouseMoveHandler=null;this._dragEnterHandler=null;this._dragLeaveHandler=null;this._dragOverHandler=null;this._dropHandler=null};AjaxControlToolkit.IEDragDropManager.prototype={add_dragStart:function(a){this.get_events().addHandler("dragStart",a)},remove_dragStart:function(a){this.get_events().removeHandler("dragStart",a)},add_dragStop:function(a){this.get_events().addHandler("dragStop",a)},remove_dragStop:function(a){this.get_events().removeHandler("dragStop",a)},initialize:function(){AjaxControlToolkit.IEDragDropManager.callBaseMethod(this,"initialize");this._mouseUpHandler=Function.createDelegate(this,this._onMouseUp);this._documentMouseMoveHandler=Function.createDelegate(this,this._onDocumentMouseMove);this._documentDragOverHandler=Function.createDelegate(this,this._onDocumentDragOver);this._dragStartHandler=Function.createDelegate(this,this._onDragStart);this._mouseMoveHandler=Function.createDelegate(this,this._onMouseMove);this._dragEnterHandler=Function.createDelegate(this,this._onDragEnter);this._dragLeaveHandler=Function.createDelegate(this,this._onDragLeave);this._dragOverHandler=Function.createDelegate(this,this._onDragOver);this._dropHandler=Function.createDelegate(this,this._onDrop)},dispose:function(){if(this._dropTargets){for(var a=0;a<this._dropTargets;a++)this.unregisterDropTarget(this._dropTargets[a]);this._dropTargets=null}AjaxControlToolkit.IEDragDropManager.callBaseMethod(this,"dispose")},startDragDrop:function(b,a,g,e){var i=window._event;if(this._isDragging)return;this._underlyingTarget=null;this._activeDragSource=b;this._activeDragVisual=a;this._activeContext=g;this._useBuiltInDragAndDropFunctions=typeof e!="undefined"?e:true;var f={x:i.clientX,y:i.clientY};a.originalPosition=a.style.position;a.style.position="absolute";document._lastPosition=f;a.startingPoint=f;var j=this.getScrollOffset(a,true);a.startingPoint=this.addPoints(a.startingPoint,j);var c=parseInt(a.style.left),d=parseInt(a.style.top);if(isNaN(c))c="0";if(isNaN(d))d="0";a.startingPoint=this.subtractPoints(a.startingPoint,{x:c,y:d});this._prepareForDomChanges();b.onDragStart();var k=new AjaxControlToolkit.DragDropEventArgs(b.get_dragMode(),b.get_dragDataType(),b.getDragData(g)),h=this.get_events().getHandler("dragStart");h&&h(this,k);this._recoverFromDomChanges();this._wireEvents();this._drag(true)},_stopDragDrop:function(a){var c=window._event;if(this._activeDragSource!=null){this._unwireEvents();if(!a)a=this._underlyingTarget==null;!a&&this._underlyingTarget!=null&&this._underlyingTarget.drop(this._activeDragSource.get_dragMode(),this._activeDragSource.get_dragDataType(),this._activeDragSource.getDragData(this._activeContext));this._activeDragSource.onDragEnd(a);var b=this.get_events().getHandler("dragStop");b&&b(this,Sys.EventArgs.Empty);this._activeDragVisual.style.position=this._activeDragVisual.originalPosition;this._activeDragSource=null;this._activeContext=null;this._activeDragVisual=null;this._isDragging=false;this._potentialTarget=null;c.preventDefault()}},_drag:function(e){var d=window._event,c={x:d.clientX,y:d.clientY};document._lastPosition=c;var f=this.getScrollOffset(this._activeDragVisual,true),a=this.addPoints(this.subtractPoints(c,this._activeDragVisual.startingPoint),f);if(!e&&parseInt(this._activeDragVisual.style.left)==a.x&&parseInt(this._activeDragVisual.style.top)==a.y)return;$common.setLocation(this._activeDragVisual,a);this._prepareForDomChanges();this._activeDragSource.onDrag();this._recoverFromDomChanges();this._potentialTarget=this._findPotentialTarget(this._activeDragSource,this._activeDragVisual);var b=this._potentialTarget!=this._underlyingTarget||this._potentialTarget==null;b&&this._underlyingTarget!=null&&this._leaveTarget(this._activeDragSource,this._underlyingTarget);if(this._potentialTarget!=null)if(b){this._underlyingTarget=this._potentialTarget;this._enterTarget(this._activeDragSource,this._underlyingTarget)}else this._moveInTarget(this._activeDragSource,this._underlyingTarget);else this._underlyingTarget=null},_wireEvents:function(){if(this._useBuiltInDragAndDropFunctions){$addHandler(document,"mouseup",this._mouseUpHandler);$addHandler(document,"mousemove",this._documentMouseMoveHandler);$addHandler(document.body,"dragover",this._documentDragOverHandler);$addHandler(this._activeDragVisual,"dragstart",this._dragStartHandler);$addHandler(this._activeDragVisual,"dragend",this._mouseUpHandler);$addHandler(this._activeDragVisual,"drag",this._mouseMoveHandler)}else{$addHandler(document,"mouseup",this._mouseUpHandler);$addHandler(document,"mousemove",this._mouseMoveHandler)}},_unwireEvents:function(){if(this._useBuiltInDragAndDropFunctions){null!=this._mouseMoveHandler&&$removeHandler(this._activeDragVisual,"drag",this._mouseMoveHandler);null!=this._mouseUpHandler&&$removeHandler(this._activeDragVisual,"dragend",this._mouseUpHandler);null!=this._dragStartHandler&&$removeHandler(this._activeDragVisual,"dragstart",this._dragStartHandler);null!=this._documentDragOverHandler&&$removeHandler(document.body,"dragover",this._documentDragOverHandler);null!=this._documentMouseMoveHandler&&$removeHandler(document,"mousemove",this._documentMouseMoveHandler);null!=this._mouseUpHandler&&$removeHandler(document,"mouseup",this._mouseUpHandler)}else{null!=this._mouseMoveHandler&&$removeHandler(document,"mousemove",this._mouseMoveHandler);null!=this._mouseUpHandler&&$removeHandler(document,"mouseup",this._mouseUpHandler)}},registerDropTarget:function(a){if(this._dropTargets==null)this._dropTargets=[];Array.add(this._dropTargets,a);this._wireDropTargetEvents(a)},unregisterDropTarget:function(a){this._unwireDropTargetEvents(a);this._dropTargets&&Array.remove(this._dropTargets,a)},_wireDropTargetEvents:function(b){var a=b.get_dropTargetElement();a._dropTarget=b;$addHandler(a,"dragenter",this._dragEnterHandler);$addHandler(a,"dragleave",this._dragLeaveHandler);$addHandler(a,"dragover",this._dragOverHandler);$addHandler(a,"drop",this._dropHandler)},_unwireDropTargetEvents:function(b){var a=b.get_dropTargetElement();if(a._dropTarget){a._dropTarget=null;null!=this._dragEnterHandler&&$removeHandler(a,"dragenter",this._dragEnterHandler);null!=this._dragLeaveHandler&&$removeHandler(a,"dragleave",this._dragLeaveHandler);null!=this._dragOverHandler&&$removeHandler(a,"dragover",this._dragOverHandler);null!=this._dropHandler&&$removeHandler(a,"drop",this._dropHandler)}},_onDragStart:function(d){window._event=d;document.selection.empty();var c=d.dataTransfer;if(!c&&d.rawEvent)c=d.rawEvent.dataTransfer;var b=this._activeDragSource.get_dragDataType().toLowerCase(),a=this._activeDragSource.getDragData(this._activeContext);if(a){if(b!="text"&&b!="url"){b="text";if(a.innerHTML!=null)a=a.innerHTML}c.effectAllowed="move";c.setData(b,a.toString())}},_onMouseUp:function(a){window._event=a;this._stopDragDrop(false)},_onDocumentMouseMove:function(a){window._event=a;this._dragDrop()},_onDocumentDragOver:function(a){window._event=a;this._potentialTarget&&a.preventDefault()},_onMouseMove:function(a){window._event=a;this._drag()},_onDragEnter:function(c){window._event=c;if(this._isDragging)c.preventDefault();else for(var b=AjaxControlToolkit.IEDragDropManager._getDataObjectsForDropTarget(this._getDropTarget(c.target)),a=0;a<b.length;a++)this._dropTarget.onDragEnterTarget(AjaxControlToolkit.DragMode.Copy,b[a].type,b[a].value)},_onDragLeave:function(c){window._event=c;if(this._isDragging)c.preventDefault();else for(var b=AjaxControlToolkit.IEDragDropManager._getDataObjectsForDropTarget(this._getDropTarget(c.target)),a=0;a<b.length;a++)this._dropTarget.onDragLeaveTarget(AjaxControlToolkit.DragMode.Copy,b[a].type,b[a].value)},_onDragOver:function(c){window._event=c;if(this._isDragging)c.preventDefault();else for(var b=AjaxControlToolkit.IEDragDropManager._getDataObjectsForDropTarget(this._getDropTarget(c.target)),a=0;a<b.length;a++)this._dropTarget.onDragInTarget(AjaxControlToolkit.DragMode.Copy,b[a].type,b[a].value)},_onDrop:function(c){window._event=c;if(!this._isDragging)for(var b=AjaxControlToolkit.IEDragDropManager._getDataObjectsForDropTarget(this._getDropTarget(c.target)),a=0;a<b.length;a++)this._dropTarget.drop(AjaxControlToolkit.DragMode.Copy,b[a].type,b[a].value);c.preventDefault()},_getDropTarget:function(a){while(a){if(a._dropTarget!=null)return a._dropTarget;a=a.parentNode}return null},_dragDrop:function(){if(this._isDragging)return;this._isDragging=true;this._activeDragVisual.dragDrop();document.selection.empty()},_moveInTarget:function(a,b){this._prepareForDomChanges();b.onDragInTarget(a.get_dragMode(),a.get_dragDataType(),a.getDragData(this._activeContext));this._recoverFromDomChanges()},_enterTarget:function(a,b){this._prepareForDomChanges();b.onDragEnterTarget(a.get_dragMode(),a.get_dragDataType(),a.getDragData(this._activeContext));this._recoverFromDomChanges()},_leaveTarget:function(a,b){this._prepareForDomChanges();b.onDragLeaveTarget(a.get_dragMode(),a.get_dragDataType(),a.getDragData(this._activeContext));this._recoverFromDomChanges()},_findPotentialTarget:function(b){var e=window._event;if(this._dropTargets==null)return null;for(var i=b.get_dragDataType(),h=b.get_dragMode(),g=b.getDragData(this._activeContext),c=this.getScrollOffset(document.body,true),j=e.clientX+c.x,k=e.clientY+c.y,f={x:j-this._radius,y:k-this._radius,width:this._radius*2,height:this._radius*2},d,a=0;a<this._dropTargets.length;a++){d=$common.getBounds(this._dropTargets[a].get_dropTargetElement());if($common.overlaps(f,d)&&this._dropTargets[a].canDrop(h,i,g))return this._dropTargets[a]}return null},_prepareForDomChanges:function(){this._oldOffset=$common.getLocation(this._activeDragVisual)},_recoverFromDomChanges:function(){var a=$common.getLocation(this._activeDragVisual);if(this._oldOffset.x!=a.x||this._oldOffset.y!=a.y){this._activeDragVisual.startingPoint=this.subtractPoints(this._activeDragVisual.startingPoint,this.subtractPoints(this._oldOffset,a));scrollOffset=this.getScrollOffset(this._activeDragVisual,true);var b=this.addPoints(this.subtractPoints(document._lastPosition,this._activeDragVisual.startingPoint),scrollOffset);$common.setLocation(this._activeDragVisual,b)}},addPoints:function(a,b){return {x:a.x+b.x,y:a.y+b.y}},subtractPoints:function(a,b){return {x:a.x-b.x,y:a.y-b.y}},getScrollOffset:function(b,e){var c=b.scrollLeft,d=b.scrollTop;if(e){var a=b.parentNode;while(a!=null&&a.scrollLeft!=null){c+=a.scrollLeft;d+=a.scrollTop;if(a==document.body&&(c!=0&&d!=0))break;a=a.parentNode}}return {x:c,y:d}},getBrowserRectangle:function(){var b=window.innerWidth,a=window.innerHeight;if(b==null)b=document.documentElement.clientWidth;if(a==null)a=document.documentElement.clientHeight;return {x:0,y:0,width:b,height:a}},getNextSibling:function(a){for(a=a.nextSibling;a!=null;a=a.nextSibling)if(a.innerHTML!=null)return a;return null},hasParent:function(a){return a.parentNode!=null&&a.parentNode.tagName!=null}};AjaxControlToolkit.IEDragDropManager.registerClass("AjaxControlToolkit.IEDragDropManager",Sys.Component);AjaxControlToolkit.IEDragDropManager._getDataObjectsForDropTarget=function(g){if(g==null)return [];for(var e=window._event,f=[],b=["URL","Text"],c,a=0;a<b.length;a++){var d=e.dataTransfer;if(!d&&e.rawEvent)d=e.rawEvent.dataTransfer;c=d.getData(b[a]);if(g.canDrop(AjaxControlToolkit.DragMode.Copy,b[a],c))c&&Array.add(f,{type:b[a],value:c})}return f};AjaxControlToolkit.GenericDragDropManager=function(){AjaxControlToolkit.GenericDragDropManager.initializeBase(this);this._dropTargets=null;this._scrollEdgeConst=40;this._scrollByConst=10;this._scroller=null;this._scrollDeltaX=0;this._scrollDeltaY=0;this._activeDragVisual=null;this._activeContext=null;this._activeDragSource=null;this._oldOffset=null;this._potentialTarget=null;this._mouseUpHandler=null;this._mouseMoveHandler=null;this._keyPressHandler=null;this._scrollerTickHandler=null};AjaxControlToolkit.GenericDragDropManager.prototype={initialize:function(){AjaxControlToolkit.GenericDragDropManager.callBaseMethod(this,"initialize");this._mouseUpHandler=Function.createDelegate(this,this._onMouseUp);this._mouseMoveHandler=Function.createDelegate(this,this._onMouseMove);this._keyPressHandler=Function.createDelegate(this,this._onKeyPress);this._scrollerTickHandler=Function.createDelegate(this,this._onScrollerTick);this._scroller=new Sys.Timer;this._scroller.set_interval(10);this._scroller.add_tick(this._scrollerTickHandler)},startDragDrop:function(a,b,c){this._activeDragSource=a;this._activeDragVisual=b;this._activeContext=c;AjaxControlToolkit.GenericDragDropManager.callBaseMethod(this,"startDragDrop",[a,b,c])},_stopDragDrop:function(a){this._scroller.set_enabled(false);AjaxControlToolkit.GenericDragDropManager.callBaseMethod(this,"_stopDragDrop",[a])},_drag:function(a){AjaxControlToolkit.GenericDragDropManager.callBaseMethod(this,"_drag",[a]);this._autoScroll()},_wireEvents:function(){$addHandler(document,"mouseup",this._mouseUpHandler);$addHandler(document,"mousemove",this._mouseMoveHandler);$addHandler(document,"keypress",this._keyPressHandler)},_unwireEvents:function(){null!=this._keyPressHandler&&$removeHandler(document,"keypress",this._keyPressHandler);null!=this._mouseMoveHandler&&$removeHandler(document,"mousemove",this._mouseMoveHandler);null!=this._mouseUpHandler&&$removeHandler(document,"mouseup",this._mouseUpHandler)},_wireDropTargetEvents:function(){},_unwireDropTargetEvents:function(){},_onMouseUp:function(a){window._event=a;this._stopDragDrop(false)},_onMouseMove:function(a){window._event=a;this._drag()},_onKeyPress:function(a){window._event=a;var b=a.keyCode?a.keyCode:a.rawEvent.keyCode;b==27&&this._stopDragDrop(true)},_autoScroll:function(){var b=window._event,a=this.getBrowserRectangle();if(a.width>0){this._scrollDeltaX=this._scrollDeltaY=0;if(b.clientX<a.x+this._scrollEdgeConst)this._scrollDeltaX=-this._scrollByConst;else if(b.clientX>a.width-this._scrollEdgeConst)this._scrollDeltaX=this._scrollByConst;if(b.clientY<a.y+this._scrollEdgeConst)this._scrollDeltaY=-this._scrollByConst;else if(b.clientY>a.height-this._scrollEdgeConst)this._scrollDeltaY=this._scrollByConst;if(this._scrollDeltaX!=0||this._scrollDeltaY!=0)this._scroller.set_enabled(true);else this._scroller.set_enabled(false)}},_onScrollerTick:function(){var d=document.body.scrollLeft,f=document.body.scrollTop;window.scrollBy(this._scrollDeltaX,this._scrollDeltaY);var c=document.body.scrollLeft,e=document.body.scrollTop,a=this._activeDragVisual,b={x:parseInt(a.style.left)+(c-d),y:parseInt(a.style.top)+(e-f)};$common.setLocation(a,b)}};AjaxControlToolkit.GenericDragDropManager.registerClass("AjaxControlToolkit.GenericDragDropManager",AjaxControlToolkit.IEDragDropManager);AjaxControlToolkit._MultiHandleSliderDragDropInternal=function(){AjaxControlToolkit._MultiHandleSliderDragDropInternal.initializeBase(this);this._instance=null};AjaxControlToolkit._MultiHandleSliderDragDropInternal.prototype={_getInstance:function(){this._instance=new AjaxControlToolkit.GenericDragDropManager;this._instance.initialize();this._instance.add_dragStart(Function.createDelegate(this,this._raiseDragStart));this._instance.add_dragStop(Function.createDelegate(this,this._raiseDragStop));return this._instance}};AjaxControlToolkit._MultiHandleSliderDragDropInternal.registerClass("AjaxControlToolkit._MultiHandleSliderDragDropInternal",AjaxControlToolkit._DragDropManager);AjaxControlToolkit.DragDrop=new AjaxControlToolkit._MultiHandleSliderDragDropInternal;AjaxControlToolkit.MultiHandleInnerRailStyle=function(){};AjaxControlToolkit.MultiHandleInnerRailStyle.prototype={AsIs:0,SlidingDoors:1};AjaxControlToolkit.MultiHandleInnerRailStyle.registerEnum("AjaxControlToolkit.MultiHandleInnerRailStyle",false);AjaxControlToolkit.SliderOrientation=function(){};AjaxControlToolkit.SliderOrientation.prototype={Horizontal:0,Vertical:1};AjaxControlToolkit.SliderOrientation.registerEnum("AjaxControlToolkit.SliderOrientation",false);AjaxControlToolkit.MultiHandleSliderBehavior=function(a){AjaxControlToolkit.MultiHandleSliderBehavior.initializeBase(this,[a]);this._isServerControl=false;this._minimum=null;this._maximum=null;this._orientation=AjaxControlToolkit.SliderOrientation.Horizontal;this._cssClass=null;this._multiHandleSliderTargets=null;this._length=150;this._steps=0;this._showInnerRail=false;this._showHoverStyle=false;this._showDragStyle=false;this._raiseChangeOnlyOnMouseUp=true;this._innerRailStyle=AjaxControlToolkit.MultiHandleInnerRailStyle.AsIs;this._enableInnerRangeDrag=false;this._enableRailClick=true;this._isReadOnly=false;this._increment=1;this._enableKeyboard=true;this._enableMouseWheel=true;this._tooltipText="";this._boundControlID=null;this._handleCssClass=null;this._handleImageUrl=null;this._handleImage=null;this._railCssClass=null;this._decimals=0;this._textBox=null;this._wrapper=null;this._outer=null;this._inner=null;this._handleData=null;this._handles=0;this._innerDragFlag=false;this._isVertical=false;this._selectStartHandler=null;this._mouseUpHandler=null;this._mouseOutHandler=null;this._keyDownHandler=null;this._mouseWheelHandler=null;this._mouseOverHandler=null;this._selectStartPending=false;this._initialized=false;this._handleUnderDrag=null;this._innerDrag=false;this._blockInnerClick=false};AjaxControlToolkit.MultiHandleSliderBehavior.prototype={initialize:function(){AjaxControlToolkit.MultiHandleSliderBehavior.callBaseMethod(this,"initialize");if(this._boundControlID&&!this._multiHandleSliderTargets)this._multiHandleSliderTargets=[{ControlID:this._boundControlID,HandleCssClass:this._handleCssClass,HandleImageUrl:this._handleImageUrl,Decimals:this._decimals}];this._handles=this._multiHandleSliderTargets?this._multiHandleSliderTargets.length:0;if(this._handles===0){var a=document.createElement("INPUT");a.id="boundless";a.style.display="none";a.value=this.get_minimum();document.forms[0].appendChild(a);this._multiHandleSliderTargets=[{ControlID:a.id,HandleCssClass:this._handleCssClass,HandleImageUrl:this._handleImageUrl,Decimals:this._decimals}];this._boundControlID=a.id;this._handles=1}this._isVertical=this._orientation===AjaxControlToolkit.SliderOrientation.Vertical;this._resolveNamingContainer();this._createWrapper();this._createOuterRail();this._createHandles();this._createInnerRail();this._setRailStyles();if(this._length)if(!this._cssClass&&this._innerRailStyle!==AjaxControlToolkit.MultiHandleInnerRailStyle.SlidingDoors)if(this._isVertical)this._outer.style.height=this._length+"px";else this._outer.style.width=this._length+"px";this._build();this._enforceElementPositioning();this._initializeSlider()},dispose:function(){this._disposeHandlers();this._disposeMultiHandleSliderTargets();AjaxControlToolkit.MultiHandleSliderBehavior.callBaseMethod(this,"dispose")},get_SliderInitialized:function(){return this._initialized},getValue:function(b){var a=$get(this._multiHandleSliderTargets[b].ControlID);return a.value},setValue:function(b,c){var a=$get(this._multiHandleSliderTargets[b].ControlID);if(a){this.beginUpdate();this._setMultiHandleSliderTargetValue(a,this._getNearestStepValue(c));this.endUpdate()}},get_values:function(){for(var b=[this._handles],a=0;a<this._handles;a++){var c=this._multiHandleSliderTargets[a];b[a]=c.value}return b.join(",")},_build:function(){this._textBox=this.get_element();this._textBox.parentNode.insertBefore(this._wrapper,this._textBox);this._wrapper.appendChild(this._outer);this._inner&&this._showInnerRail&&this._outer.appendChild(this._inner);this._textBox.style.display="none"},_calculateInnerRailOffset:function(b){var c=this._isVertical?this._inner.style.top:this._inner.style.left,a=this._isVertical?b.offsetY:b.offsetX;a+=parseInt(c,10);return a},_calculateClick:function(a){var g=this._getOuterBounds(),b=this._handleData[0],f=this._getBoundsInternal(b);b=this._calculateClosestHandle(a);var c=f.width/2,d=g.width-c;a=a<c?c:a>d?d:a;var e=$get(b.multiHandleSliderTargetID);this._calculateMultiHandleSliderTargetValue(e,a,true);$common.tryFireEvent(this.get_element(),"change")},_calculateClosestHandle:function(g){for(var b=this._handleData[0],c=[this._handles],j=this._getOuterBounds(),a=0;a<this._handles;a++){var d=this._handleData[a],m=this._getBoundsInternal(d),n=this._isVertical?d.offsetTop:m.x-j.x;c[a]=Math.abs(n-g)}var h=c[0];for(a=0;a<this._handles;a++){var k=c[a];if(k<h){d=this._handleData[a];h=k;b=d}}if(this._innerDrag){var i=Array.indexOf(this._handleData,b),f=Sys.UI.DomElement.getLocation(b),l=this._isVertical?f.y:f.x-j.x;if(l>=g+c[i]){var e=this._handleData[i-1];if(e)b=e}}return b},_calculateMultiHandleSliderTargetValue:function(e,u,B){var b,i,d=this._minimum,c=this._maximum;if(this._handleUnderDrag&&!e){g=this._handleUnderDrag;e=$get(this._handleUnderDrag.multiHandleSliderTargetID);if(this._innerDrag){var w=Array.indexOf(this._handleData,g);b=this._handleData[w+1];if(!b)b=this._handleData[w-1];i=$get(b.multiHandleSliderTargetID)}}var g=e.Handle,a=e.value;if(a&&!B){if(typeof a!=="number")try{a=parseFloat(a)}catch(F){a=Number.NaN}if(isNaN(a))a=this._minimum;val=Math.max(Math.min(a,c),d)}else{var j=this._getBoundsInternal(g),m=this._getOuterBounds(),n=u?u-j.width/2:j.x-m.x,D=m.width-j.width,C=n/D;val=Math.max(Math.min(a,c),d);val=n===0?d:n===m.width-j.width?c:d+C*(c-d)}if(this._steps>0)val=this._getNearestStepValue(val);val=Math.max(Math.min(val,c),d);for(var r=[],t=[],l=0,o=0,k,x=true,h=0;h<this._handles;h++){var G=this._multiHandleSliderTargets[h];if(!G.ControlID.match(e.id))if(x){r[l]=this._multiHandleSliderTargets[h];l++}else{t[o]=this._multiHandleSliderTargets[h];o++}else x=false}if(l>0){var z=parseFloat($get(r[l-1].ControlID).value);val=Math.max(val,z);k=val===z}if(o>0){var y=parseFloat($get(t[0].ControlID).value);val=Math.min(val,y);k=val===y}if(b){var E=val-parseFloat(a),s=parseFloat(i.value),f=s+E,v=Array.indexOf(this._handleData,b)+1;if(v<this._multiHandleSliderTargets.length)var p=this._multiHandleSliderTargets[v].ControlID;if(p)var q=$get(p);if(q)var A=q.value;if(f>(A||c)){f=s;val=a;k=true}}if(!k&&(Math.max(val,c)===c&&Math.min(val,d)===d)){this.beginUpdate();val=Math.max(Math.min(val,c),d);this._setMultiHandleSliderTargetValue(e,val);b&&this._setMultiHandleSliderTargetValue(i,f);this.endUpdate()}else{this.beginUpdate();if(this._handles===1)this._setMultiHandleSliderTargetValue(e,val);else{e.value=val;g.Value=val;this._setHandlePosition(g,true)}if(b){i.value=f;b.Value=f;this._setHandlePosition(b,true)}this.endUpdate()}return val},_cancelDrag:function(){if(AjaxControlToolkit.MultiHandleSliderBehavior.DropPending===this){AjaxControlToolkit.MultiHandleSliderBehavior.DropPending=null;if(this._selectStartPending)null!=this._selectStartHandler&&$removeHandler(document,"selectstart",this._selectStartHandler)}},_createHandles:function(){for(var a=0;a<this._handles;a++){var m=this.get_id()+"_handle_"+a,f=this._isVertical,c="",d="",e="";if(this._handles===1&&this._handleImageUrl)var j="<img id='"+this.get_id()+"_handleImage' src='"+this._handleImageUrl+"' alt='' />";var l="<a id='"+m+"' ",p=j?j:"",n="><div>"+p+"</div></a>";this._outer.innerHTML+=l+n}this._handleData=[this._handles];for(a=0;a<this._handles;a++){var o=this._cssClass?this._cssClass:"ajax__multi_slider_default",b=this._multiHandleSliderTargets[a].HandleCssClass;if(b||this._cssClass){c=b?b+" ":this._cssClass+" ";d=c;e=c;var i=b,h=b;c=!b?c+this._isVertical?"handle_vertical":"handle_horizontal":c+b;d=!h?d+this._isVertical?"handle_vertical_hover":"handle_horizontal_hover":d+h;e=!i?e+this._isVertical?"handle_vertical_down":"handle_horizontal_down":e+i}this._handleCallbacks={mouseover:Function.createCallback(this._onShowHover,{vertical:f,custom:d}),mouseout:Function.createCallback(this._onHideHover,{vertical:f,custom:c}),mousedown:Function.createCallback(this._onShowDrag,{vertical:f,custom:e}),mouseup:Function.createCallback(this._onHideDrag,{vertical:f,custom:c})};this._handleData[a]=this._outer.childNodes[a];this._handleData[a].style.overflow="hidden";var g=this._multiHandleSliderTargets[a].SupressCssClassEventHandlers;(typeof g=="undefined"||false==g)&&$addHandlers(this._handleData[a],this._handleCallbacks);b=this._multiHandleSliderTargets[a].HandleCssClass;if(b){Sys.UI.DomElement.addCssClass(this._handleData[a],o);Sys.UI.DomElement.addCssClass(this._handleData[a],b)}else this._handleData[a].className=this._isVertical?"handle_vertical":"handle_horizontal";if(this._multiHandleSliderTargets){var k=this._multiHandleSliderTargets[a].ControlID;this._handleData[a].multiHandleSliderTargetID=k}this._handleData[a].style.left="0px";this._handleData[a].style.top="0px"}},_createInnerRail:function(){if(this._handles>1&&this._showInnerRail){this._inner=document.createElement("DIV");this._inner.id=this.get_id()+"_inner";this._inner.style.outline="none";this._inner.tabIndex=-1}},_createOuterRail:function(){this._outer=document.createElement("DIV");this._outer.id=this.get_id()+"_outer";this._outer.style.outline="none";this._outer.tabIndex=-1},_createWrapper:function(){this._wrapper=document.createElement("DIV");this._wrapper.style.position="relative";this._wrapper.style.outline="none"},_disposeHandlers:function(){if(!this._isReadOnly){null!=this._mouseUpHandler&&$removeHandler(document,"mouseup",this._mouseUpHandler);null!=this._mouseOutHandler&&$removeHandler(document,"mouseout",this._mouseOutHandler);if(this._outer)if(this._outer.addEventListener)this._outer.removeEventListener("DOMMouseScroll",this._mouseWheelHandler,false);else this._outer.detachEvent("onmousewheel",this._mouseWheelHandler);for(var a=0;a<this._handles;a++){if(this._handleDelegates);this._handleCallbacks&&$clearHandlers(this._handleData[a])}this._handleDelegates=null;this._handleCallbacks=null;if(this._inner&&this._showInnerRail&&this._innerDelegates);this._selectStartHandler=null;this._mouseUpHandler=null;this._mouseOutHandler=null;this._mouseWheelHandler=null;this._mouseOverHandler=null;this._keyDownHandler=null}},_disposeMultiHandleSliderTargets:function(){if(this._multiHandleSliderTargets)for(var b=0;b<this._handles;b++){var a=this._multiHandleSliderTargets[b],c=a&&a.nodeName==="INPUT";if(c){null!=a.ChangeHandler&&$removeHandler(a,"change",a.ChangeHandler);null!=a.KeyPressHandler&&$removeHandler(a,"keypress",a.KeyPressHandler);a.ChangeHandler=null;a.KeyPressHandler=null}}},_ensureBinding:function(a){if(a){var b=a.value;if(b>=this._minimum||b<=this._maximum){var c=a&&a.nodeName==="INPUT";if(c)a.value=b;else if(a)a.innerHTML=b}}},_enforceElementPositioning:function(){var a={position:this.get_element().style.position,top:this.get_element().style.top,right:this.get_element().style.right,bottom:this.get_element().style.bottom,left:this.get_element().style.left};if(a.position!=="")this._wrapper.style.position=a.position;if(a.top!=="")this._wrapper.style.top=a.top;if(a.right!=="")this._wrapper.style.right=a.right;if(a.bottom!=="")this._wrapper.style.bottom=a.bottom;if(a.left!=="")this._wrapper.style.left=a.left},_getNearestStepValue:function(a){if(this._steps===0)return a;var b=this._maximum-this._minimum;if(b===0)return a;if(this._steps-1!==0)var c=b/(this._steps-1);else return a;return Math.round(a/c)*c},_getStepValues:function(){var b=[this._steps],d=this._maximum-this._minimum,c=d/(this._steps-1);b[0]=this._minimum;for(var a=1;a<this._steps;a++)b[a]=this._minimum+c*a;return b},_handleSlide:function(a){var d=a?0:this._handles-1,e=a?1:0,f=a?this._handles:this._handles-1,b=this._handleData[d].multiHandleSliderTargetID;if(this._slideMultiHandleSliderTarget(b,a))for(var c=e;c<f;c++){b=this._handleData[c].multiHandleSliderTargetID;this._slideMultiHandleSliderTarget(b,a)}this._initializeInnerRail()},_initializeDragHandle:function(b){var a=b.DragHandle=document.createElement("DIV");a.style.position="absolute";a.style.width="1px";a.style.height="1px";a.style.overflow="hidden";a.style.background="none";document.forms[0].appendChild(b.DragHandle)},_initializeHandlers:function(){if(!this._isReadOnly){this._selectStartHandler=Function.createDelegate(this,this._onSelectStart);this._mouseUpHandler=Function.createDelegate(this,this._onMouseUp);this._mouseOutHandler=Function.createDelegate(this,this._onMouseOut);this._mouseWheelHandler=Function.createDelegate(this,this._onMouseWheel);this._mouseOverHandler=Function.createDelegate(this,this._onMouseOver);this._keyDownHandler=Function.createDelegate(this,this._onKeyDown);$addHandler(document,"mouseup",this._mouseUpHandler);$addHandler(document,"mouseout",this._mouseOutHandler);this._handleDelegates={mousedown:Function.createDelegate(this,this._onMouseDown),dragstart:Function.createDelegate(this,this._IEDragDropHandler),drag:Function.createDelegate(this,this._IEDragDropHandler),dragEnd:Function.createDelegate(this,this._IEDragDropHandler)};for(var a=0;a<this._handles;a++)$addHandlers(this._handleData[a],this._handleDelegates);if(this._outer){if(this._enableMouseWheel)if(this._outer.addEventListener)this._outer.addEventListener("DOMMouseScroll",this._mouseWheelHandler,false);else this._outer.attachEvent("onmousewheel",this._mouseWheelHandler);this._outerDelegates={click:Function.createDelegate(this,this._onOuterRailClick),mouseover:Function.createDelegate(this,this._mouseOverHandler),keydown:Function.createDelegate(this,this._keyDownHandler)};$addHandlers(this._outer,this._outerDelegates)}if(this._inner&&this._showInnerRail){this._innerDelegates={click:Function.createDelegate(this,this._onInnerRailClick),mousedown:Function.createDelegate(this,this._onMouseDownInner),mouseup:Function.createDelegate(this,this._onMouseUpInner),mouseout:Function.createDelegate(this,this._onMouseOutInner),mousemove:Function.createDelegate(this,this._onMouseMoveInner),dragStart:Function.createDelegate(this,this._IEDragDropHandler),drag:Function.createDelegate(this,this._IEDragDropHandler),dragEnd:Function.createDelegate(this,this._IEDragDropHandler)};$addHandlers(this._inner,this._innerDelegates)}}},_initializeHandles:function(){var d=null;if(d)var c=d.split(",",this._handles);for(var b=0;b<this._handles;b++){var a=this._handleData[b],e=this._multiHandleSliderTargets[b].Decimals;if(c)a.Value=parseFloat(c[b]);this._initializeMultiHandleSliderTarget(a.multiHandleSliderTargetID,e,a);this._initializeHandleValue(a);this._setHandlePosition(a,true);this._initializeDragHandle(a)}},_initializeHandleValue:function(b){if(!b.Value){try{var a=$get(b.multiHandleSliderTargetID),d=a&&a.nodeName==="INPUT",c=parseFloat(d?a.value:a.innerHTML)}catch(e){c=Number.NaN}if(isNaN(c)){b.Value=this._minimum;if(d)a.value=b.Value;else a.innerHTML=b.Value}else b.Value=c}},_initializeInnerRail:function(){if(this._inner&&this._showInnerRail){var f=0,g=this._handles-1,d=this._handleData[f],c=this._handles>1?this._handleData[g]:null;if(c){var e=parseInt(this._getBoundsInternal(d).width,10),a=parseInt(this._isVertical?d.style.top:d.style.left,10),b=parseInt(this._isVertical?c.style.top:c.style.left,10),h=parseInt(this._multiHandleSliderTargets[f].Offset,10),i=parseInt(this._multiHandleSliderTargets[g].Offset,10);a+=h;b+=i;if(this._isVertical){this._inner.style.top=a+"px";this._inner.style.height=b+e-a+"px"}else{this._inner.style.left=a+"px";this._inner.style.width=b+e-a+"px"}if(this._innerRailStyle===AjaxControlToolkit.MultiHandleInnerRailStyle.SlidingDoors)this._inner.style.backgroundPosition=this._isVertical?"0 -"+a+"px":"-"+a+"px 0"}}},_initializeMultiHandleSliderTarget:function(c,d,b){if(c){var a=$get(c);if(b.Value)a.value=b.Value;a.Handle=b;a.Decimals=d;a.OldValue=a.value;a.onchange="setValue(this, "+a.value+")";if(!a.Decimals)a.Decimals=0;var e=a&&a.nodeName==="INPUT";if(e){a.KeyPressHandler=Function.createDelegate(this,this._onMultiHandleSliderTargetKeyPressed);a.ChangeHandler=Function.createDelegate(this,this._onMultiHandleSliderTargetChange);AjaxControlToolkit.addHandlerWorkaround(a,"keypress",a.KeyPressHandler);AjaxControlToolkit.addHandlerWorkaround(a,"change",a.ChangeHandler)}}},_initializeSlider:function(){AjaxControlToolkit.DragDrop.registerDropTarget(this);this._initializeHandles();this._initializeHandlers();this._initializeInnerRail();this._initialized=true;this._raiseEvent("load")},_resetDragHandle:function(b){var a=$common.getBounds(b);$common.setLocation(b.DragHandle,{x:a.x,y:a.y})},_resolveNamingContainer:function(){if(this._isServerControl&&this._multiHandleSliderTargets&&!this._boundControlID)for(var b="",a=0;a<this._handles;a++)this._multiHandleSliderTargets[a].ControlID=b+this._multiHandleSliderTargets[a].ControlID},_saveState:function(){for(var b=[this._handles],a=0;a<this._handles;a++)b[a]=$get(this._multiHandleSliderTargets[a].ControlID).value},_setHandlePosition:function(c){var f=this._minimum,g=this._maximum,e=c.Value,a=this._getBoundsInternal(c),b=this._getOuterBounds();if(a.width<=0&&b.width<=0){a.width=parseInt($common.getCurrentStyle(c,"width"),10);b.width=parseInt($common.getCurrentStyle(this._outer,"width"),10);if(a.width<=0||b.width<=0)throw Error.argument("width",AjaxControlToolkit.Resources.MultiHandleSlider_CssHeightWidthRequired)}var i=g-f,h=(e-f)/i,d=Math.round(h*(b.width-a.width)),j=e===f?0:e===g?b.width-a.width:d;d=j+"px";if(this._isVertical)c.style.top=d;else c.style.left=d},_setRailStyles:function(){if(!this._inner&&this._railCssClass){this._outer.className=this._railCssClass;return}var a=this._cssClass?this._cssClass:"ajax__multi_slider_default";Sys.UI.DomElement.addCssClass(this.get_element(),a);Sys.UI.DomElement.addCssClass(this._outer,a);Sys.UI.DomElement.addCssClass(this._wrapper,a);if(this._inner){Sys.UI.DomElement.addCssClass(this._inner,a);var b=this._isVertical?"outer_rail_vertical":"outer_rail_horizontal",c=this._isVertical?"inner_rail_vertical":"inner_rail_horizontal";Sys.UI.DomElement.addCssClass(this._outer,b);Sys.UI.DomElement.addCssClass(this._inner,c)}else{b=this._isVertical?"inner_rail_vertical":"inner_rail_horizontal";Sys.UI.DomElement.addCssClass(this._outer,b)}},_setMultiHandleSliderTargetValue:function(a,e){var c=a.OldValue,b=e;if(c===b&&this._isReadOnly)a.value=c;else{if(!this.get_isUpdating())b=this._calculateMultiHandleSliderTargetValue(a);a.value=b.toFixed(a.Decimals);this._ensureBinding(a);if(!Number.isInstanceOfType(a.value))try{a.value=parseFloat(a.value)}catch(f){a.value=Number.NaN}if(this._tooltipText){var d=a.Handle;d.alt=d.title=String.format(this._tooltipText,a.value)}if(this._initialized){a.Handle.Value=b;this._setHandlePosition(a.Handle,true);if(this._handles===1)this.get_element().value=b;if(a.value!==c){a.OldValue=a.value;this._initializeInnerRail();if(this._innerDrag)this._blockInnerClick=true;this._raiseEvent("valueChanged");if(this.get_isUpdating())!this._raiseChangeOnlyOnMouseUp&&$common.tryFireEvent(this.get_element(),"change")}}}this._saveState()},_setValueFromMultiHandleSliderTarget:function(a){this.beginUpdate();if(a)if(!this._isReadOnly){this._handles===1&&this._steps>0&&this._setMultiHandleSliderTargetValue(a,a.value);this._calculateMultiHandleSliderTargetValue(a)}else this._setMultiHandleSliderTargetValue(a,a.OldValue);this.endUpdate()},_slideMultiHandleSliderTarget:function(h,f){var c=$get(h),i=c.value,b,a;if(this._steps>0){var d=this._getStepValues(),e=this._getNearestStepValue(i);b=e;if(f){for(a=this._steps-1;a>-1;a--)if(d[a]<e){b=d[a];break}}else for(a=0;a<this._steps;a++)if(d[a]>e){b=d[a];break}}else{var g=parseFloat(c.value);b=f?g-parseFloat(this._increment):g+parseFloat(this._increment)}c.value=b;this._setValueFromMultiHandleSliderTarget(c);return c.value==b},_startDragDrop:function(a){this._resetDragHandle(a);this._handleUnderDrag=a;AjaxControlToolkit.DragDrop.startDragDrop(this,a.DragHandle,null)},_onHideDrag:function(b,a){this.className=a.custom&&a.custom.length>0?a.custom:a.vertical?"handle_vertical":"handle_horizontal"},_onHideHover:function(b,a){this.className=a.custom&&a.custom.length>0?a.custom:a.vertical?"ajax__multi_slider_default handle_vertical":"ajax__multi_slider_default handle_horizontal"},_onInnerRailClick:function(a){if(this._enableRailClick){var b=a.target;if(b===this._inner&&!this._blockInnerClick)this._onInnerRailClicked(a);else this._blockInnerClick=false}},_onInnerRailClicked:function(b){var a=this._calculateInnerRailOffset(b);this._calculateClick(a)},_onKeyDown:function(c){if(this._enableKeyboard){var b=new Sys.UI.DomEvent(c),a=false;switch(b.keyCode||b.rawEvent.keyCode){case Sys.UI.Key.up:case Sys.UI.Key.left:if(!a){this._handleSlide(true);b.preventDefault();a=true}return false;case Sys.UI.Key.down:case Sys.UI.Key.right:if(!a){this._handleSlide(false);b.preventDefault();a=true}return false;default:return false}}},_onMouseOver:function(){this._outer.focus()},_onMouseWheel:function(b){var a=0;if(b.wheelDelta){a=b.wheelDelta/120;if(Sys.Browser.agent===Sys.Browser.Opera)a=-a}else if(b.detail)a=-b.detail/3;a&&this._handleSlide(a<=0);b.preventDefault&&b.preventDefault();return false},_onMouseUp:function(a){window._event=a;a.preventDefault();this._cancelDrag()},_onMouseOut:function(a){window._event=a;a.preventDefault();try{this._outer.blur()}catch(a){}this._handleUnderDrag&&this._cancelDrag()},_onMouseOutInner:function(a){window._event=a;a.preventDefault();try{this._inner.blur()}catch(a){}this._innerDrag&&this._cancelDrag()},_onMouseDown:function(a){window._event=a;a.preventDefault();if(!AjaxControlToolkit.MultiHandleSliderBehavior.DropPending){AjaxControlToolkit.MultiHandleSliderBehavior.DropPending=this;$addHandler(document,"selectstart",this._selectStartHandler);this._selectStartPending=true;var b=a.target;this._startDragDrop(b)}},_onMouseDownInner:function(a){window._event=a;a.preventDefault();if(this._enableInnerRangeDrag)if(!this._innerDragFlag)this._innerDragFlag=true},_onMouseUpInner:function(){if(this._enableInnerRangeDrag)this._innerDragFlag=false},_onMouseMoveInner:function(a){window._event=a;a.preventDefault();if(this._enableInnerRangeDrag)if(!this._innerDrag&&this._innerDragFlag){this._innerDragFlag=false;if(!AjaxControlToolkit.MultiHandleSliderBehavior.DropPending){AjaxControlToolkit.MultiHandleSliderBehavior.DropPending=this;$addHandler(document,"selectstart",this._selectStartHandler);this._selectStartPending=true;this._innerDrag=true;var c=this._calculateInnerRailOffset(a),b=this._calculateClosestHandle(c);this._startDragDrop(b)}}},_onMultiHandleSliderTargetChange:function(a){var b=a.target;this._setValueFromMultiHandleSliderTarget(b);this._initializeInnerRail();a.preventDefault()},_onMultiHandleSliderTargetKeyPressed:function(c){var a=new Sys.UI.DomEvent(c);if(a.charCode===13){var b=a.target;this._setValueFromMultiHandleSliderTarget(b);this._initializeInnerRail();a.preventDefault()}},_onOuterRailClick:function(a){if(this._enableRailClick){var b=a.target;b===this._outer&&this._onOuterRailClicked(a)}},_onOuterRailClicked:function(a){var b=this._isVertical?a.offsetY:a.offsetX;this._calculateClick(b)},_onShowDrag:function(b,a){this.className=a.custom&&a.custom.length>0?a.custom:a.vertical?"ajax__multi_slider_default handle_vertical_down":"ajax__multi_slider_default handle_horizontal_down"},_onShowHover:function(b,a){this.className=a.custom&&a.custom.length>0?a.custom:a.vertical?"ajax__multi_slider_default handle_vertical_hover":"ajax__multi_slider_default handle_horizontal_hover"},get_dragDataType:function(){return "HTML"},getDragData:function(){return this._handleUnderDrag},get_dragMode:function(){return AjaxControlToolkit.DragMode.Move},onDragStart:function(){this._resetDragHandle(this._handleUnderDrag);this._raiseEvent("dragStart")},onDrag:function(){var b=this._getBoundsInternal(this._handleUnderDrag.DragHandle),d=this._getBoundsInternal(this._handleUnderDrag),c=this._getOuterBounds(),a;if(this._isVertical)a={y:b.x-c.x,x:0};else a={x:b.x-c.x,y:0};$common.setLocation(this._handleUnderDrag,a);this._calculateMultiHandleSliderTargetValue(null,null,true);this._steps>1&&this._setHandlePosition(this._handleUnderDrag,false);this._raiseEvent("drag")},onDragEnd:function(){this._initializeInnerRail();this._raiseChangeOnlyOnMouseUp&&$common.tryFireEvent(this.get_element(),"change");this._innerDrag=false;this._handleUnderDrag=null;this._raiseEvent("dragEnd")},get_dropTargetElement:function(){return document.forms[0]},canDrop:function(b,a){return a=="HTML"},drop:Function.emptyMethod,onDragEnterTarget:Function.emptyMethod,onDragLeaveTarget:Function.emptyMethod,onDragInTarget:Function.emptyMethod,_IEDragDropHandler:function(a){a.preventDefault()},_onSelectStart:function(a){a.preventDefault();return false},_getOuterBounds:function(){return this._getBoundsInternal(this._outer)},_getInnerBounds:function(){return this._getBoundsInternal(this._inner)},_getBoundsInternal:function(b){var a=$common.getBounds(b);if(this._isVertical)a={x:a.y,y:a.x,height:a.width,width:a.height,right:a.right,left:a.left,bottom:a.bottom,location:{x:a.y,y:a.x},size:{width:a.height,height:a.width}};else a={x:a.x,y:a.y,height:a.height,width:a.width,right:a.right,left:a.left,bottom:a.bottom,location:{x:a.x,y:a.y},size:{width:a.width,height:a.height}};return a},_raiseEvent:function(c,a){var b=this.get_events().getHandler(c);if(b){if(!a)a=Sys.EventArgs.Empty;b(this,a)}},get_Value:function(){var a=$get(this._boundControlID);return a.value?a.value:0},set_Value:function(b){var a=$get(this._multiHandleSliderTargets[0].ControlID);this.beginUpdate();this._setMultiHandleSliderTargetValue(a,this._getNearestStepValue(b));this.endUpdate();$common.tryFireEvent(a,"change")},get_minimum:function(){return this._minimum},set_minimum:function(a){if(a!==this._minimum){this._minimum=a;this.raisePropertyChanged("minimum")}},get_maximum:function(){return this._maximum},set_maximum:function(a){if(a!==this._maximum){this._maximum=a;this.raisePropertyChanged("maximum")}},get_length:function(){return this._length},set_length:function(a){if(a!==this._length){this._length=a;this.raisePropertyChanged("length")}},get_steps:function(){return this._steps},set_steps:function(b){var a=this._steps;this._steps=Math.abs(b);this._steps=this._steps===1?2:this._steps;a!==this._steps&&this.raisePropertyChanged("steps")},get_orientation:function(){return this._isVertical},set_orientation:function(a){if(a!==this._isVertical){this._orientation=a;this.raisePropertyChanged("orientation")}},get_raiseChangeOnlyOnMouseUp:function(){return this._raiseChangeOnlyOnMouseUp},set_raiseChangeOnlyOnMouseUp:function(a){if(a!==this._raiseChangeOnlyOnMouseUp){this._raiseChangeOnlyOnMouseUp=a;this.raisePropertyChanged("raiseChangeOnlyOnMouseUp")}},get_showInnerRail:function(){return this._showInnerRail},set_showInnerRail:function(a){if(a!==this._showInnerRail){this._showInnerRail=a;this.raisePropertyChanged("showInnerRail")}},get_showHandleHoverStyle:function(){return this._showHoverStyle},set_showHandleHoverStyle:function(a){if(a!==this._showHoverStyle){this._showHoverStyle=a;this.raisePropertyChanged("showHoverStyle")}},get_showHandleDragStyle:function(){return this._showDragStyle},set_showHandleDragStyle:function(a){if(a!==this._showDragStyle){this._showDragStyle=a;this.raisePropertyChanged("showDragStyle")}},get_innerRailStyle:function(){return this._innerRailStyle},set_innerRailStyle:function(a){if(a!==this._innerRailStyle){this._innerRailStyle=a;this.raisePropertyChanged("innerRailStyle")}},get_enableInnerRangeDrag:function(){return this._enableInnerRangeDrag},set_enableInnerRangeDrag:function(a){if(a!==this._enableInnerRangeDrag){this._enableInnerRangeDrag=a;this.raisePropertyChanged("allowInnerRangeDrag")}},get_enableRailClick:function(){return this._enableRailClick},set_enableRailClick:function(a){if(a!==this._enableRailClick){this._enableRailClick=a;this.raisePropertyChanged("allowRailClick")}},get_isReadOnly:function(){return this._isReadOnly},set_isReadOnly:function(a){if(a!==this._isReadOnly){this._isReadOnly=a;this.raisePropertyChanged("isReadOnly")}},get_enableKeyboard:function(){return this._enableKeyboard},set_enableKeyboard:function(a){if(a!==this._enableKeyboard){this._enableKeyboard=a;this.raisePropertyChanged("enableKeyboard")}},get_enableMouseWheel:function(){return this._enableMouseWheel},set_enableMouseWheel:function(a){if(a!==this._enableMouseWheel){this._enableMouseWheel=a;this.raisePropertyChanged("enableMouseWheel")}},get_increment:function(){return this._increment},set_increment:function(a){if(a!==this._increment){this._increment=a;this.raisePropertyChanged("increment")}},get_tooltipText:function(){return this._tooltipText},set_tooltipText:function(a){if(a!==this._tooltipText){this._tooltipText=a;this.raisePropertyChanged("tooltipText")}},get_multiHandleSliderTargets:function(){return this._multiHandleSliderTargets},set_multiHandleSliderTargets:function(a){if(a!==this._multiHandleSliderTargets){this._multiHandleSliderTargets=a;this.raisePropertyChanged("multiHandleSliderTargets")}},get_cssClass:function(){return this._cssClass},set_cssClass:function(a){if(a!==this._cssClass){this._cssClass=a;this.raisePropertyChanged("cssClass")}},get_boundControlID:function(){return this._boundControlID},set_boundControlID:function(a){this._boundControlID=a;if(this._boundControlID)this._boundControl=$get(this._boundControlID);else this._boundControl=null},get_handleCssClass:function(){return this._handleCssClass},set_handleCssClass:function(a){this._handleCssClass=a},get_handleImageUrl:function(){return this._handleImageUrl},set_handleImageUrl:function(a){this._handleImageUrl=a},get_railCssClass:function(){return this._railCssClass},set_railCssClass:function(a){this._railCssClass=a},get_decimals:function(){return this._decimals},set_decimals:function(a){this._decimals=a},add_load:function(a){this.get_events().addHandler("load",a)},remove_load:function(a){this.get_events().removeHandler("load",a)},add_dragStart:function(a){this.get_events().addHandler("dragStart",a)},remove_dragStart:function(a){this.get_events().removeHandler("dragStart",a)},add_drag:function(a){this.get_events().addHandler("drag",a)},remove_drag:function(a){this.get_events().removeHandler("drag",a)},add_dragEnd:function(a){this.get_events().addHandler("dragEnd",a)},remove_dragEnd:function(a){this.get_events().removeHandler("dragEnd",a)},add_valueChanged:function(a){this.get_events().addHandler("valueChanged",a)},remove_valueChanged:function(a){this.get_events().removeHandler("valueChanged",a)},_correctHandlesDataForRTL:function(b){var a=[0,this._maximum];if(!Srch.U.n(b)&&b.length==2){var c=Srch.U.isRTL()?1:0;a[0]=b[c];var d=Srch.U.isRTL()?0:1;a[1]=b[d];if(Srch.U.isRTL()){a[0]=this._maximum-a[0];a[1]=this._maximum-a[1]}}return a},_setHandlesAndValuesToRange:function(d,e,f){var c=this._correctHandlesDataForRTL([d,e]),a=c[0],b=c[1];if(this._handles===2){this.beginUpdate();if(!Srch.U.n(a)&&a!==""){a=Math.max(Math.min(a,this._maximum),this._minimum);this._manuallySetHandleAndValue(this._multiHandleSliderTargets[0].ControlID,a,false)}if(!Srch.U.n(b)&&b!==""){b=Math.max(Math.min(b,this._maximum),a);this._manuallySetHandleAndValue(this._multiHandleSliderTargets[1].ControlID,b,false)}if(!Srch.U.n(a)&&a!==""){a=Math.max(Math.min(a,this._maximum),this._minimum);this._manuallySetHandleAndValue(this._multiHandleSliderTargets[0].ControlID,a,f)}this._initializeInnerRail();this.endUpdate()}},_manuallySetHandleAndValue:function(c,b,d){var a=$get(c);if(a&&a.Handle){a.value=b;a.Handle.Value=b;this._setHandlePosition(a.Handle,true);d&&$common.tryFireEvent(a,"change")}},_getHandlePostionsAsLogicalRangeArray:function(){var a=[];if(!Srch.U.n(this._handleData)&&this._handleData.length>=2){var b=[this._handleData[0].Value,this._handleData[1].Value];a=this._correctHandlesDataForRTL(b);var c=a[0],d=a[1]}return a}};AjaxControlToolkit.MultiHandleSliderBehavior.DropPending=null;AjaxControlToolkit.MultiHandleSliderBehavior.registerClass("AjaxControlToolkit.MultiHandleSliderBehavior",Sys.UI.Behavior);AjaxControlToolkit.SliderRefinementControl=function(a,b,c){this._multiHandleSliderComponent=a;this._refinementPropertyName=b;this._controlBaseId=c;this._tickDefinitions={dateRangeExponential:[{Label:"Earlier than One Year Ago",FilterDaysOffset:""},{Label:"One Year Ago",FilterDaysOffset:-365},{Label:"Six Months Ago",FilterDaysOffset:-180},{Label:"One Month Ago",FilterDaysOffset:-30},{Label:"One Week Ago",FilterDaysOffset:-7},{Label:"Today",FilterDaysOffset:0},{Label:"Later than Today",FilterDaysOffset:""}]};this._dateFilterDefinitionsInitialized=false;this._maxResultCount=0};AjaxControlToolkit.SliderRefinementControl.OnPostRenderInitSliderForElement=function(c){var a=c.RefinementControl,f=a.MinValue,e=a.MaxValue,d=null;if(!$isNull(a.SliderOptions)&&!$isNull(a.SliderOptions.Component)&&!$isNull(a.SliderOptions.Component.minimum)&&!$isNull(a.SliderOptions.Component.maximum)){d=a.SliderOptions;f=a.SliderOptions.Component.minimum;e=a.SliderOptions.Component.maximum}var g=a.propertyName,h=a.containerId,b=AjaxControlToolkit.SliderRefinementControl.CreateSliderWithBaseId(h,f,e,g,d);if($isNull(b)||$isNull(b._sliderRefinementControl))return;b._sliderRefinementControl.RefinementControlConfig=a;b._sliderRefinementControl.rangleLabelElem=$get(a.containerId+"RangeLabel");b._sliderRefinementControl.labelSection=$get(a.containerId+"LabelSection");a.alternateRenderer=b._sliderRefinementControl.PopulateHistogramFromCurrentData;b._sliderRefinementControl.PopulateHistogramFromCurrentData($get(c.RefinementControl.containerId),c)};AjaxControlToolkit.SliderRefinementControl.CreateSliderWithBaseId=function(a,g,f,i){var c=a+"SliderBehaviour",j=Sys.Application._components[c],m,l;if(j){Srch.U.trace(null,"CreateSliderWithBaseId","A Slider Component already exists with the given ID so skipping create: "+c);return null}var d=$get(a+"Data");if(!d)return;var h=[{ControlID:a+"LeftHandleData",HandleCssClass:"handle_horizontal_left handle_noforcepressed",SupressCssClassEventHandlers:true,Decimals:0,Offset:0},{ControlID:a+"RightHandleData",HandleCssClass:"handle_horizontal_right handle_noforcepressed",SupressCssClassEventHandlers:true,Decimals:0,Offset:0}],k=f-g+1,b=$create(AjaxControlToolkit.MultiHandleSliderBehavior,{enableKeyboard:true,enableMouseWheel:false,id:c,length:160,maximum:f,minimum:g,steps:k,showHandleDragStyle:true,showHandleHoverStyle:true,showInnerRail:true,multiHandleSliderTargets:h},null,null,$get(a+"Data")),e=new AjaxControlToolkit.SliderRefinementControl(b,i,a);b._sliderRefinementControl=e;AjaxControlToolkit.addHandlerWorkaround(d,"change",e.OnSliderChange);b.add_drag(AjaxControlToolkit.SliderRefinementControl.handleDragEvent);return b};AjaxControlToolkit.addHandlerWorkaround=function(a,b,c){if(a.attachEvent){browserHandler=function(){var b={};try{b=Sys.UI.DomElement._getWindow(a).event}catch(d){}return c.call(a,new Sys.UI.DomEvent(b))};a.attachEvent("on"+b,browserHandler)}else $addHandler(a,b,c)};AjaxControlToolkit.SliderRefinementControl.adjustRangeValueArray=function(b,a){if(!Srch.U.n(b)&&!Srch.U.n(a)&&a.length>=2&&!Srch.U.n(b._sliderRefinementControl)){var c=b._sliderRefinementControl.LastRangeValues;if(a[0]==a[1]){if(!Srch.U.n(c)&&c[0]!=c[1]){a[0]=c[0];a[1]=c[1]}else if(b.get_maximum()>a[1]){a[0]=a[0];a[1]=a[1]+1}else if(b.get_minimum()<a[0]){a[0]=a[0]-1;a[1]=a[1]}else{a[0]=b.get_minimum();a[1]=b.get_maximum()}return true}}return false};AjaxControlToolkit.SliderRefinementControl.sliderPositionChangeHandler=function(a){if(!Srch.U.n(a)&&!Srch.U.n(a._handleData)&&a._handleData.length>=2&&!Srch.U.n(a._sliderRefinementControl)){var c=a._sliderRefinementControl.LastRangeValues,b=a._getHandlePostionsAsLogicalRangeArray(),d=AjaxControlToolkit.SliderRefinementControl.adjustRangeValueArray(a,b);a._sliderRefinementControl.LastRangeValues=b;if(d){Srch.U.trace(null,"sliderPositionChangeHandler",String.format("Prevent HandleMerge: Set values to [{0}-{1}]",b[0],b[1]));a._setHandlesAndValuesToRange(b[0],b[1],false,true)}var e=Srch.U.n(c)||c[0]!=b[0]||c[1]!=b[1];return e}};AjaxControlToolkit.SliderRefinementControl.touchTargetPressEvent=function(c){if(Srch.U.n(c)||Srch.U.n(c.target))return;window._event=c;var l=c.target,j=l.getAttribute("controlBaseId"),g=l.getAttribute("boundaryIndex"),b=null;if(!Srch.U.w(j))b=$get(j+"Data");if(!Srch.U.n(g)&&!Srch.U.n(b)&&!Srch.U.n(b.MultiHandleSliderBehavior)&&!Srch.U.n(b.MultiHandleSliderBehavior._handleData)&&b.MultiHandleSliderBehavior._handleData.length>=2){var h=false,f=g,e=b.MultiHandleSliderBehavior._getHandlePostionsAsLogicalRangeArray(),d=null,a=0,k=e[0],o=f-k,i=e[1],n=i-f;if(g==k)a=0;else if(g==i)a=1;else if(i<f||n<o){a=1;h=true}else{a=0;h=true}d=b.MultiHandleSliderBehavior._handleData[a];if(Srch.U.isRTL()){var m=(a-1)*-1;d=b.MultiHandleSliderBehavior._handleData[m]}if(h){Srch.U.trace(null,"pressTargetEvent",String.format("Move Handle[{0}] from {1}->{2} then start drag handling.",a,e[a],f));e[a]=f;AjaxControlToolkit.SliderRefinementControl.SnapSliderHandlesAndValuesToRange(b.MultiHandleSliderBehavior.get_element(),j,e[0],e[1],false,true)}if(!AjaxControlToolkit.MultiHandleSliderBehavior.DropPending&&!Srch.U.n(d)&&!Srch.U.n(c)&&!Srch.U.n(c.preventDefault)){Srch.U.trace(null,"pressTargetEvent",String.format("Start drag on Handle[{0}] at {1}",a,f));c.preventDefault();c.target=d;Sys.UI.DomElement.removeCssClass(d,"handle_noforcepressed");Sys.UI.DomElement.addCssClass(d,"handle_forcepressed");b.MultiHandleSliderBehavior._onMouseDown(c)}}};AjaxControlToolkit.SliderRefinementControl.handleDragEvent=function(a){if(!Srch.U.n(a)&&!Srch.U.n(a._handleData)&&a._handleData.length>=2&&!Srch.U.n(a._sliderRefinementControl)){var b=a._getHandlePostionsAsLogicalRangeArray(),c=AjaxControlToolkit.SliderRefinementControl.sliderPositionChangeHandler(a);if(c){Srch.U.trace(null,"handleDragEvent",String.format("Slider[{0}] handle drag postion change to: [{1} - {2}]",a._sliderRefinementControl._controlBaseId,b[0],b[1]));a._sliderRefinementControl.SetFilterLabelsForPosition(b[0],b[1]);a._sliderRefinementControl.UpdateSliderAndHistogramElementsForData(null,a,null)}}};AjaxControlToolkit.SliderRefinementControl.getDateFilterValue=function(c,d){if(""==String(c))return "";var a=new Date,b=new Date(a.getFullYear(),a.getMonth(),a.getDate());b.setDate(a.getDate()+c+d);return b};AjaxControlToolkit.SliderRefinementControl.FindAndSetSliderHandlesAndValuesToRange=function(b,c,d){Srch.U.trace(null,"FindAndSetSliderHandlesAndValuesToRange",String.format("Manually set range to [{0}-{1}] Slider[{2}]",c,d,b));var e=$get(b+"Data"),a=AjaxControlToolkit.SliderRefinementControl.SnapSliderHandlesAndValuesToRange(e,b,c,d,true,true);a&&a._sliderRefinementControl&&a._sliderRefinementControl.UpdateEachSliderOnChange(null,a._sliderRefinementControl._controlBaseId);return false};AjaxControlToolkit.SliderRefinementControl.SnapSliderHandlesAndValuesToRange=function(a,g,d,e,f,c){if(a&&a.MultiHandleSliderBehavior){var b=[d,e];AjaxControlToolkit.SliderRefinementControl.adjustRangeValueArray(a.MultiHandleSliderBehavior,b);a.MultiHandleSliderBehavior._setHandlesAndValuesToRange(b[0],b[1],f,c);!Srch.U.n(a.MultiHandleSliderBehavior._sliderRefinementControl)&&a.MultiHandleSliderBehavior._sliderRefinementControl.UpdateSliderAndHistogramElementsForData(null,a.MultiHandleSliderBehavior,null);return a.MultiHandleSliderBehavior}return null};AjaxControlToolkit.SliderRefinementControl.prototype={GetCurrentFilterLogicalRange:function(){var f=this._multiHandleSliderComponent,d=this.RefinementControlConfig,e=this._refinementClientcontrol,a=[f.get_minimum(),f.get_maximum()];if(!Srch.U.n(d)&&!Srch.U.n(e)){var b=e.getCurrentRefinementCategory(d.propertyName);if(!Srch.U.n(b)&&b.get_tokenCount()==1){var c=Srch.U.parseTypedRangeToken(b.t[0],null);if(c!=null&&c.length>2){var h=this.GetFilterIndexForValue(d,c[1]);if(h>=0)a[0]=h;var g=this.GetFilterIndexForValue(d,c[2]);if(g>=0)a[1]=g;var i=String.format("Current slider filter range: [{0} - {1}] found from current filter token: {2}",a[0],a[1],b);Srch.U.trace(e,"Slider GetCurrentFilterLogicalRange",i)}}}return a},PopulateHistogramFromCurrentData:function(a,f){var g="Slider updating UI from returned search data (using AlternateRenderer).",e=f["ClientControl"];if(!Srch.U.n(e))g+=" controld id: "+e.get_id();var h=f["RefinementControl"];if(!Srch.U.n(h)&&!Srch.U.n(a)){g+=" refiner name:"+h.propertyName+" container:"+a.tagName+":"+a.id;Srch.U.trace(e,"PopulateHistogramFromCurrentData",g);var i=a.id+"SliderBehaviour",b=Sys.Application._components[i],c=b._sliderRefinementControl;c._refinementClientcontrol=e;if(!Srch.U.n(b)&&!Srch.U.n(b._sliderRefinementControl)){var d=c.GetCurrentFilterLogicalRange();AjaxControlToolkit.SliderRefinementControl.SnapSliderHandlesAndValuesToRange(b.get_element(),a.id,d[0],d[1],false,true);c.SetFilterLabelsForPosition(d[0],d[1]);c.UpdateSliderAndHistogramElementsForData(a,b,f["ListData"])}}},UpdateSliderAndHistogramElementsForData:function(D,d,v){var g="",s=-1,r=-1,E=-1;this._maxResultCount=0;if(d&&d._sliderRefinementControl&&d._sliderRefinementControl._controlBaseId){g=d._sliderRefinementControl._controlBaseId;E=d.get_maximum();var i=d._getHandlePostionsAsLogicalRangeArray();if(i&&i.length>=2){if(!$isNull(i[0]))s=i[0];if(!$isNull(i[1]))r=i[1]}}if(""==g)return;var e=this._tickDefinitions["dateRangeExponential"],f=null;if(!$isNull(d._sliderRefinementControl.RefinementControlConfig)&&!$isNull(d._sliderRefinementControl.RefinementControlConfig.BucketConfig)){e=d._sliderRefinementControl.RefinementControlConfig.BucketConfig.BoundaryValues;this._tickDefinitions["dateRangeExponential"]=e;f=d._sliderRefinementControl.RefinementControlConfig.HistogramOptions}this.initializeCountsForHistogram(e,this._refinementPropertyName,s,r);var u=[],A=!Srch.U.n(v)&&v.length>0;if(A){u=v;for(var j=0;j<u.length&&j<e.length-1;j++){var h=u[j];if(typeof h=="object"&&h["RefinerName"]==this._refinementPropertyName){var O=h["RefinementCount"],a=e[j];a.BucketRawData=h;a.FilterToken=h["RefinementToken"];a.TokenCondition=h["RefinerName"]+":"+h["RefinementToken"];this.addToCountForHistogram(e[j],this._refinementPropertyName,O)}}}var L=d.get_maximum()!=r||d.get_minimum()!=s,G=this._maxResultCount>0;if(!Srch.U.n(D))D.style["display"]=G||L?"":"none";var m=$get(g+"HistogramContainer"),l=[];if(!Srch.U.n(m))if(!Srch.U.n(m.querySelectorAll))l=m.querySelectorAll(".histogram_bar_link");else l=m.childNodes;for(var N=null,c=0;c<e.length;c++){var b=null,k=null;if(c<l.length){b=l[c];k=b.getAttribute("activeBarId")}var p=true;if(Srch.U.n(b)||b.tagName!="A")p=false;var a=e[c];if("undefined"==typeof a.ResultCounts)a.ResultCounts={};if("undefined"==typeof a.ResultCounts[this._refinementPropertyName])a.ResultCounts[this._refinementPropertyName]=0;if("undefined"==typeof a.ActiveStates)a.ActiveStates={};if("undefined"==typeof a.ActiveStates[this._refinementPropertyName])a.ActiveStates[this._refinementPropertyName]=true;var o=a.ResultCounts[this._refinementPropertyName],K=a.ActiveStates[this._refinementPropertyName],q="histogram_bar_active",B="slider_tick_active";if(!K){q="histogram_bar_inactive";B="slider_tick_inactive"}var J=AjaxControlToolkit.SliderRefinementControl.GetTickOrTouchTargetElementId(g,c,false),z=$get(J);if(!Srch.U.n(z))z.className=B;if(Srch.U.n(a.TickTargets))a.TickTargets={};var y=AjaxControlToolkit.SliderRefinementControl.GetTickOrTouchTargetElementId(g,c,true);if(Srch.U.n(a.TickTargets[y])){var w=$get(y);!Srch.U.n(w)&&$addHandler(w,"mousedown",AjaxControlToolkit.SliderRefinementControl.touchTargetPressEvent)}if(p&&A){var Q=String.format("{0} ({1})",a.NextIntervalLabel,Srch.U.toFormattedNumber(o,0)),M=e.length-2,R=Math.max(c,0),S=Math.min(c+1,M),n=50,I=n/this._maxResultCount,F=I*o,x=Math.floor(n-F),H=n-x,C=g+"_HistogramBgBar"+c,t=g+"_HistogramActiveBar"+c;if(!Srch.U.n(f)&&!Srch.U.n(f.ElementIds)&&!Srch.U.e(f.ElementIds.HistogramActiveBarPrefix)&&!Srch.U.e(f.ElementIds.HistogramBgBarPrefix)){C=f.ElementIds.HistogramBgBarPrefix+c;t=f.ElementIds.HistogramActiveBarPrefix+c}b.innerHTML=String.format('<div id="{0}" class="histogram_bar_background">   <div id="{4}" class="{3}"     style="height: {1}px; margin-top: {2}px;" ></div></div>',C,H,x,q,t);b.title=Q;b.setAttribute("activeBarId",t);var P=b.clientHeight<=70?0:70-b.clientHeight-1;b.style["bottom"]=P+"px";if(0==o){b.setAttribute("disabled","disabled");b.style["cursor"]="default"}else{b.removeAttribute("disabled");b.style["cursor"]="auto"}}else if(p&&!Srch.U.e(k)&&!Srch.U.n($get(k)))$get(k).className=q;N=a}},OnSliderChange:function(a){if(!(a&&a.target))if(window.event&&window.event.srcElement){a={};a.target=window.event.srcElement}if("function"==typeof this.UpdateEachSliderOnChange)this.UpdateEachSliderOnChange(a,this._controlBaseId);else this.MultiHandleSliderBehavior&&this.MultiHandleSliderBehavior._sliderRefinementControl&&"function"==typeof this.MultiHandleSliderBehavior._sliderRefinementControl.UpdateEachSliderOnChange&&this.MultiHandleSliderBehavior._sliderRefinementControl.UpdateEachSliderOnChange(a)},GetFilterIndexForValue:function(a,d){if(!$isNull(a)&&!$isNull(a.BucketConfig)&&!$isNull(a.BucketConfig.BoundaryType)&&!$isNull(a.BucketConfig.BoundaryValues))for(var b=0;b<a.BucketConfig.BoundaryValues.length;b++){var c=a.BucketConfig.BoundaryValues[b];if(d==c.Value)return b}return -1},GetFilterForIndex:function(a,c){var d="ExplicitIntervalBoundaries";if(!$isNull(a)&&!$isNull(a.BucketConfig)&&!$isNull(a.BucketConfig.BoundaryType)&&!$isNull(a.BucketConfig.BoundaryValues)){d=a.BucketConfig.BoundaryType;this._tickDefinitions["dateRangeExponential"]=a.BucketConfig.BoundaryValues}var b=this._tickDefinitions["dateRangeExponential"];if(d.startsWith("ExplicitIntervalBoundaries")&&typeof b!="undefined"&&b.length>c&&typeof b[c]!="undefined")return b[c];else{var e={};e.Value=c;return e}},SetFilterLabelsForPosition:function(o,m){var q=this.rangleLabelElem,s=this.rightSliderLabel,p="",b=this.RefinementControlConfig,f=null;if(!Srch.U.n(b)&&!Srch.U.n(b.SliderType)){p=b.SliderType;if(!Srch.U.n(b.BucketConfig))f=b.BucketConfig.Labels}var d=Number(o),c=Number(m);if(""===o)d=0;if(""===m)c=n.length-1;var e=this.GetFilterForIndex(b,d),g=this.GetFilterForIndex(b,c),a=Srch.U.loadResource("rf_All"),n=this._tickDefinitions["dateRangeExponential"],r=[],l=0===d,k=c>=n.length-1;if(!$isNull(f))if(l)a=String.format(f.min,g.Label);else if(k)a=String.format(f.max,e.Label);else a=String.format(f.range,Srch.U.isRTL()?g.Label:e.Label,Srch.U.isRTL()?e.Label:g.Label);var i=l&&k;if(i)a=Srch.U.loadResource("rf_All");else if(1==c-d&&!$isNull(e)&&!$isNull(e.NextIntervalLabel))a=e.NextIntervalLabel;if(!Srch.U.n(this.rangleLabelElem)&&!(d===c)){if(!Srch.U.n(q.textContent))this.rangleLabelElem.textContent=a;else this.rangleLabelElem.innerText=a;var j=this.GetCurrentFilterLogicalRange(),h=!i&&d==j[0]&&c==j[1];Sys.UI.DomElement.removeCssClass(this.rangleLabelElem,"ms-ref-filterSel");if(h){Sys.UI.DomElement.addCssClass(this.rangleLabelElem,"ms-ref-filterSel");this.rangleLabelElem.style["display"]=""}}Sys.UI.DomElement.removeCssClass(this.labelSection,"ms-ref-allSec");Sys.UI.DomElement.removeCssClass(this.labelSection,"ms-ref-selSec");Sys.UI.DomElement.removeCssClass(this.labelSection,"ms-ref-unselSec");if(!h&&!$isNull(this.labelSection))Sys.UI.DomElement.addCssClass(this.labelSection,"ms-ref-allSec");else if(!$isNull(this.labelSection)){Sys.UI.DomElement.addCssClass(this.labelSection,"ms-ref-selSec");this.labelSection.style["display"]=""}},UpdateEachSliderOnChange:function(){var r=$get(this._controlBaseId+"Data"),x=$get(this._controlBaseId+"LeftHandleData"),w=$get(this._controlBaseId+"RightHandleData"),q=this._controlBaseId+"SliderBehaviour",a=Sys.Application._components[q];if(Srch.U.n(a.CurrentFilterTokens))a.CurrentFilterTokens=[];var k=a._getHandlePostionsAsLogicalRangeArray(),e=k[0],d=k[1],i=Number(e),h=Number(d);a._sliderRefinementControl.SetFilterLabelsForPosition(i,h);var n="",c=this.RefinementControlConfig;if(!Srch.U.n(c)&&!Srch.U.n(c.SliderType))n=c.SliderType;var f=this.GetFilterForIndex(c,e),t=this.GetFilterForIndex(c,d),u="",s=this._tickDefinitions["dateRangeExponential"],b=[],p=0==i,o=h>=s.length-1;if(!(p&&o))if(1==h-i&&!$isNull(f)&&!$isNull(f.NextIntervalToken))b.push(f.NextIntervalToken);else{e=f.Value;d=t.Value;var l=AjaxControlToolkit.SliderRefinementControl.GetTypeReadyRangeToken(e,d,c);b.push(l)}var m=Srch.U.getClientComponent(r),g=a.CurrentFilterTokens;if(Srch.U.n(g))g=[];a.CurrentFilterTokens=b;var j=g.join("")!=b.join("");Srch.U.trace(null,"UpdateEachSliderOnChange",String.format("FilterChanged?[{0}] FilterToken[{1}] Slider[{0}]",j,b.join(""),this._controlBaseId));if(!Srch.U.n(a._handleData)&&a._handleData.length>=2)if(!Srch.U.n(a._handleData[0])&&!Srch.U.n(a._handleData[1])){Sys.UI.DomElement.removeCssClass(a._handleData[0],"handle_forcepressed");Sys.UI.DomElement.addCssClass(a._handleData[0],"handle_noforcepressed");Sys.UI.DomElement.removeCssClass(a._handleData[1],"handle_forcepressed");Sys.UI.DomElement.addCssClass(a._handleData[1],"handle_noforcepressed")}j&&m.updateRefinementFilters(this._refinementPropertyName,b)},initializeCountsForHistogram:function(d,b,f,e){for(var a=null,g=null,c=0;c<d.length;c++){a=d[c];if("undefined"==typeof a.ResultCounts)a.ResultCounts={};if("undefined"==typeof a.ResultCounts[b])a.ResultCounts[b]=0;if("undefined"==typeof a.ActiveStates)a.ActiveStates={};if("undefined"==typeof a.ActiveStates[b])a.ActiveStates[b]=true;if(c>=f&&(c<e||e<0))a.ActiveStates[b]=true;else{a.ActiveStates[b]=false;if(this._maxResultCount<a.ResultCounts[b])this._maxResultCount=a.ResultCounts[b]}}},addToCountForHistogram:function(e,c,a){if(SP.ScriptUtility.isNullOrUndefined(e))return;if(SP.ScriptUtility.isNullOrUndefined(a)||NaN==Number(a))a=1;else a=Number(a);var d=e,g=e,b=d.ResultCounts[c],f=d.ActiveStates[c];if(f){b=a;if(this._maxResultCount<b)this._maxResultCount=b;d.ResultCounts[c]=b;return}}};function formatDateForSearch(a){if(!a||!a.format)return a;else return a.format("M/d/yyyy")}function encodeForHtmlDomId(a){if(typeof a=="string")return a.replace(/ /g,"_").replace(/[^A-Za-z0-9]*/g,"")}var EmptyBucketConfig={BoundaryValues:[],Intervals:[],BucketSpecString:""},DateRangeExponentialBucketConfig={BoundaryValues:[{Value:"min",Label:"Earlier than 1 Year Ago",NextIntervalLabel:"Earlier than 1 Year Ago"},{FilterDaysOffset:-365,Label:"1 Year Ago",NextIntervalLabel:"1 Year Ago - 1 Months Ago"},{FilterDaysOffset:-30,Label:"1 Month Ago",NextIntervalLabel:"1 Month Ago - 1 Week Ago"},{FilterDaysOffset:-7,Label:"1 Week Ago",NextIntervalLabel:"1 Week Ago - Today"},{FilterDaysOffset:0,Label:"Today",NextIntervalLabel:"Later than Today"},{Value:"max",Label:""}],Intervals:[{Label:"Earlier than 1 Year Ago"},{Label:"1 Year Ago - 1 Month Ago"},{Label:"1 Month Ago - 1 Week Ago"},{Label:"1 Week Ago - Today"},{Label:"Later than Today"}],BucketSpecString:""};AjaxControlToolkit.SliderRefinementControl.GetDefaultNumberLabels=function(){return {min:Srch.U.loadResource("rf_DefaultNumberLabels_min"),max:Srch.U.loadResource("rf_DefaultNumberLabels_max"),range:Srch.U.loadResource("rf_DefaultNumberLabels_range"),value:Srch.U.loadResource("rf_DefaultNumberLabels_value")}};AjaxControlToolkit.SliderRefinementControl.GetDefaultDateRangeLabels=function(){return {0:Srch.U.loadResource("rf_DefaultDateBoundaryLabels_0"),1:Srch.U.loadResource("rf_DefaultDateBoundaryLabels_1"),2:Srch.U.loadResource("rf_DefaultDateBoundaryLabels_2"),3:Srch.U.loadResource("rf_DefaultDateBoundaryLabels_3"),4:Srch.U.loadResource("rf_DefaultDateBoundaryLabels_4"),min:Srch.U.loadResource("rf_DefaultDateRangeLabels_min"),max:Srch.U.loadResource("rf_DefaultDateRangeLabels_max"),range:Srch.U.loadResource("rf_DefaultDateRangeLabels_range"),value:Srch.U.loadResource("rf_DefaultDateRangeLabels_value")}};AjaxControlToolkit.SliderRefinementControl.GetDefaultBuckets=function(a){var h=EmptyBucketConfig;if(!$isNull(a.RefinementControl)){var g=a.RefinementControl.spec;if(Srch.U.n(g)||Srch.U.w(g))g="";var b=Srch.ValueInfo.getIntervalLabelsDictionary(a.RefinementControl.propertyName);if(Srch.U.n(b))b=AjaxControlToolkit.SliderRefinementControl.GetDefaultNumberLabels(a);else if(Srch.U.n(b)&&a.RefinementControl.useDefaultDateIntervals)b=AjaxControlToolkit.SliderRefinementControl.GetDefaultDateRangeLabels(a);var c=g.replace("(","").replace(")","").split("/"),p=c.length-1,o=c.length+1;if(c.length>1&&c[0].startsWith("discretize=manual")){h={BoundaryValues:[{Value:"min",Label:b.min}],Intervals:[],BucketSpecString:g,Labels:b};for(var f=h.BoundaryValues[0],e=null,d=1;d<=c.length;d++){if(d<c.length){var m=Srch.U.toFormattedNumber(c[d],2),j=String.format(b.value,m),k=b[(d-1).toString()];if(!$isNull(k))j=k;else if("Size"==a.RefinementControl.propertyName)j=String.format(b.value,Srch.U.toFileSizeDisplay(c[d],false));e={Value:c[d],Label:j}}else e={Value:"max",Label:b.max};h.BoundaryValues.push(e);var i=String.format(b.range,Srch.U.isRTL()?e.Label:f.Label,Srch.U.isRTL()?f.Label:e.Label);if($isNull(a.RefinementControl.filterTokenType)&&!$isNull(a.ListData)&&a.ListData.length>0&&!$isNull(a.ListData[0].filterTokenType))a.RefinementControl.filterTokenType=a.ListData[0].filterTokenType;var l=AjaxControlToolkit.SliderRefinementControl.GetTypeReadyRangeToken(f.Value,e.Value,a.RefinementControl);if(d==1)i=String.format(b.min,e.Label);else if(d==c.length)i=String.format(b.max,f.Label);var n={Label:i,IntervalToken:l};h.Intervals.push(n);f.NextIntervalLabel=i;f.NextIntervalToken=l;f=e}}}return h};AjaxControlToolkit.SliderRefinementControl.GetDefaultFilterLabelOptions=function(c,a,b){return {ElementIds:{LabelSection:a+"LabelSection",RangeLabel:a+"RangeLabel"},BucketData:b}};AjaxControlToolkit.SliderRefinementControl.GetDefaultFilterLabelMarkupAndOptions=function(a,e,b){a.FilterLabelOptions=AjaxControlToolkit.SliderRefinementControl.GetDefaultFilterLabelOptions(a,e,b);if(!$isNull(a.RefinementControl)){a.RefinementControl.BucketConfig=b;a.RefinementControl.FilterLabelOptions=a.FilterLabelOptions;if(!$isNull(a.RefinementControl.BucketConfig)&&a.RefinementControl.BucketConfig.BoundaryValues.length<4)return ""}var c=Srch.Refinement.getExpanded(a.RefinementControl.propertyName),d=c=="true"?"":' style="display: none;" ';return '<div id="'+a.FilterLabelOptions.ElementIds.LabelSection+'" class="handle_label_section ms-ref-allSec" '+d+'>              <span id="'+a.FilterLabelOptions.ElementIds.RangeLabel+'" class="handle_label">                                </span>                                </span>          </div>'};var BoundaryIdSuffix="Boundary",TickIdSuffix="_Tick_",TickTouchTargetIdSuffix="_TickTouchTarget_";AjaxControlToolkit.SliderRefinementControl.GetTickOrTouchTargetElementId=function(c,d,b){var a=c+BoundaryIdSuffix;a+=b?TickTouchTargetIdSuffix:TickIdSuffix;a+=d;return a};AjaxControlToolkit.SliderRefinementControl.GetDefaultSliderOptions=function(h,b,d,c,g,a){var f=c-d+1;if(!$isNull(a)&&a.BoundaryValues.length>=3){d=0;c=a.BoundaryValues.length-1;f=a.BoundaryValues.length;a.BoundaryType="ExplicitIntervalBoundaries"}else if(!$isNull(a)&&a.BoundaryValues.length==2){d=a.BoundaryValues[0].Value;c=a.BoundaryValues[1].Value;f=c-d+1;a.BoundaryType="MinMaxOnly"}var e={ElementIds:{DataInputElement:b+"Data",SliderContainer:b+"SliderContainer"},LeftHandle:{ControlID:b+"LeftHandleData",handleCssClass:"handle_horizontal_left",decimals:0,offset:0},RightHandle:{ControlID:b+"RightHandleData",handleCssClass:"handle_horizontal_right",decimals:0,offset:0},Component:{id:b+"SliderBehaviour",minimum:d,maximum:c,enableKeyboard:true,enableMouseWheel:false,length:g,steps:f,showHandleDragStyle:true,showHandleHoverStyle:true,showInnerRail:true},LayoutConfig:{MaxWidth:g,TickWidth:3,LeftPadding:5,RightPadding:5},BucketData:a};e.Component.multiHandleSliderTargets=[e.LeftHandle,e.RightHandle];return e};AjaxControlToolkit.SliderRefinementControl.GetDefaultSliderMarkupAndOptions=function(a,e,v,u,t,c){a.SliderOptions=AjaxControlToolkit.SliderRefinementControl.GetDefaultSliderOptions(a,e,v,u,t,c);if(!$isNull(a.RefinementControl)){a.RefinementControl.BucketConfig=c;a.RefinementControl.SliderOptions=a.SliderOptions;if(!$isNull(a.RefinementControl.BucketConfig)&&a.RefinementControl.BucketConfig.BoundaryValues.length<4)return ""}var b=[];b.push('<div id="'+a.SliderOptions.ElementIds.SliderContainer+'_ExtentLabelSection" class="ms-textSmall slider_extent_label_section">');b.push('<div id="'+a.SliderOptions.ElementIds.SliderContainer+'_ExtentLabelMax" class="slider_extent_label_right">');b.push(c.BoundaryValues[c.BoundaryValues.length-2].Label);b.push("</div>");b.push('<div id="'+a.SliderOptions.ElementIds.SliderContainer+'_ExtentLabelMin" class="slider_extent_label_left">');b.push(c.BoundaryValues[1].Label);b.push("</div>");b.push("</div>");b.push('<div id="'+a.SliderOptions.ElementIds.SliderContainer+'" class="slideronly_container">              <input style="display: none" id="'+a.SliderOptions.LeftHandle.ControlID+'" name="'+a.SliderOptions.LeftHandle.ControlID+'" value="'+a.SliderOptions.Component.minimum+'" />              <input style="display: none" id="'+a.SliderOptions.RightHandle.ControlID+'" name="'+a.SliderOptions.RightHandle.ControlID+'" value="'+a.SliderOptions.Component.maximum+'" />              <div id="'+a.SliderOptions.Component.id+'RailSection" style="display: block; position: relative; " >                  <input style="display: block" id="'+a.SliderOptions.ElementIds.DataInputElement+'" name="'+a.SliderOptions.ElementIds.DataInputElement+'" />');for(var s=!$isNull(c)&&!$isNull(c.BoundaryValues)&&c.BoundaryValues.length>=4,d=0;s&&d<c.BoundaryValues.length;d++){var q=a.SliderOptions.LayoutConfig.MaxWidth-a.SliderOptions.LayoutConfig.LeftPadding-a.SliderOptions.LayoutConfig.RightPadding,f=q/(c.BoundaryValues.length-1),g=c.BoundaryValues[d],r=d*f,p=a.SliderOptions.LayoutConfig.TickWidth/2,i=a.SliderOptions.LayoutConfig.LeftPadding+Math.floor(r-p),j=Math.floor(i-f/2),o=Math.floor(f-a.SliderOptions.LayoutConfig.TickWidth);g.CaculatedTickLeftPosition=i;g.CaculatedTickTargetLeftPosition=j;var l=d==0||d==c.BoundaryValues.length-1?"":g.Label,h=d,n=AjaxControlToolkit.SliderRefinementControl.GetTickOrTouchTargetElementId(e,h,false),m=AjaxControlToolkit.SliderRefinementControl.GetTickOrTouchTargetElementId(e,h,true),k=Srch.U.isRTL()?"right":"left";b.push('<div                 id="'+n+'"                style="'+k+": "+i+'px;"                class="slider_tick_active"                title="'+$htmlEncode(l)+'" >                </div>');b.push('<div                 id="'+m+'"                style="'+k+": "+j+"px; width: "+o+'px;"                class="slider_tick_targetbox"                title="'+$htmlEncode(l)+'"                 controlBaseId="'+$htmlEncode(e)+'"                 boundaryIndex="'+$htmlEncode(h)+'"                 >                </div>')}b.push("              </div>          </div>");return b.join("")};AjaxControlToolkit.SliderRefinementControl.GetDefaultHistogramOptions=function(e,a,c,d,b){return {ElementIds:{HistogramContainer:a+"HistogramContainer",HistogramBgBarPrefix:a+"_HistogramBgBar",HistogramActiveBarPrefix:a+"_HistogramActiveBar",HistogramContainer:a+"HistogramContainer"},CssStyles:{HistogramActiveBar:"histogram_bar_active",HistogramInactiveBar:"histogram_bar_inactive"},LayoutConfig:{MaxHeight:c,MaxWidth:d,PaddingBetweenColumns:5,LeftPadding:Srch.U.isRTL()?8:7,RightPadding:Srch.U.isRTL()?7:8,TopPadding:2},BucketData:b}};AjaxControlToolkit.SliderRefinementControl.GetDefaultHistogramMarkupAndOptions=function(a,i,n,o,c){a.HistogramOptions=AjaxControlToolkit.SliderRefinementControl.GetDefaultHistogramOptions(a,i,n,o,c);if(!$isNull(a.RefinementControl)){a.RefinementControl.BucketConfig=c;a.RefinementControl.HistogramOptions=a.HistogramOptions;if(!$isNull(a.RefinementControl.BucketConfig)&&a.RefinementControl.BucketConfig.BoundaryValues.length<4)return ""}var b=[];b.push('<div id="'+a.HistogramOptions.ElementIds.HistogramContainer+'" class="histogram_container">');for(var m=!$isNull(c)&&!$isNull(c.Intervals)&&c.Intervals.length>=1,d=0;m&&d<c.Intervals.length;d++){var e=a.HistogramOptions.LayoutConfig.MaxWidth-a.HistogramOptions.LayoutConfig.LeftPadding-a.HistogramOptions.LayoutConfig.RightPadding;e=e+a.HistogramOptions.LayoutConfig.PaddingBetweenColumns;var h=Math.floor(e/c.Intervals.length)-a.HistogramOptions.LayoutConfig.PaddingBetweenColumns,f=c.Intervals[d],g=a.HistogramOptions.LayoutConfig.LeftPadding+d*(a.HistogramOptions.LayoutConfig.PaddingBetweenColumns+h);f.CaculatedColumnLeftPosition=g;var k=d,l=Math.min(d+1,c.BoundaryValues.length),j=Srch.U.isRTL()?"right":"left";b.push(' <a                 style="bottom: 0px; '+j+": "+g+"px; width: "+h+'px; "                class="histogram_bar_link"                title="'+$htmlEncode(f.Label)+'"                href="#" ');b.push('    onclick="AjaxControlToolkit.SliderRefinementControl.FindAndSetSliderHandlesAndValuesToRange(&quot;'+$htmlEncode(i)+"&quot;, "+k+", "+l+', this); return false;" >');b.push('        <div                     id="'+a.HistogramOptions.ElementIds.HistogramBgBarPrefix+d.toString()+'"                      class="histogram_bar_background" >');b.push('          <div                      style="margin-top: ');b.push(a.HistogramOptions.LayoutConfig.MaxHeight-2*a.HistogramOptions.LayoutConfig.TopPadding+"px; ");b.push("           height: "+(a.HistogramOptions.LayoutConfig.TopPadding+'px"'));b.push('          id="'+(a.HistogramOptions.ElementIds.HistogramActiveBarPrefix+d.toString())+'"                     class="'+a.HistogramOptions.CssStyles.HistogramActiveBar+'" >                    </div>                   </div>                </a>')}b.push("</div>");return b.join("")};AjaxControlToolkit.SliderRefinementControl.GetTypeReadyRangeToken=function(d,b,a){var c="range({0}, {1}{2})";if(!Srch.U.n(a)&&!Srch.U.e(a.filterTokenType)&&("decimal"==a.filterTokenType||"min"==d&&"max"==b))c="range("+a.filterTokenType+"({0}), "+a.filterTokenType+"({1}){2})";var e="max"==b?', to="le"':"";return String.format(c,d,b,e)};function ajaxtoolkit_initialize(){CommonToolkitScripts=AjaxControlToolkit.CommonToolkitScripts=new AjaxControlToolkit._CommonToolkitScripts;$common=CommonToolkitScripts}RegisterModuleInit("ajaxtoolkit.js",ajaxtoolkit_initialize);typeof Sys!="undefined"&&Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded();NotifyScriptLoadedAndExecuteWaitingJobs("ajaxtoolkit.js")