function $_global_hierarchytaskslist(){(function(){a:;if(typeof window.CheckMarkFieldTemplate=="object")return;var c="PercentComplete",d="PercentComplete.",e="hasCheckmarkHandler",a="ms-chkmark-complete",b="ms-chkmark-notcomplete",g="ms-chkmark",h="js-chkmark";function f(){a:;return SP.Res.changesHaveNotBeenSaved}window.CheckMarkFieldTemplate={GetCheckMarkId:function(b,a){return b.ctxId+","+a+",chk"},RenderCheckMarkField:function(f,m,e,l){function i(d,n){function m(){a:;var a=e.PermMask;return(parseInt("0x"+a.substring(a.length-1))&4)!=0}function c(b,a){a:;d.push(" ");d.push(b);d.push('="');d.push(a);d.push('"')}var k=e.ID,p=f.listName,q=window.CheckMarkFieldTemplate.GetCheckMarkId(f,k);d.push("<img");c("id",q);var i=n?a:b,o=null,j=k!=null&&m();if(j&&typeof APD_InAssetPicker=="function"&&APD_InAssetPicker())j=false;if(j){c("liid",k);c("shouldAnimate",l.StrikeThroughOnCompletedEnabled);i=h+" "+i}else i=g+" "+i;c("lid",p);c("tabindex","0");c("title",o);c("class",i);c("src",GetThemedImageUrl("spcommon.png"));c("unselectable","on");d.push(" />")}if(!(d in e))return"";f.CurrentFieldSchema.GridActiveAndReadOnly="TRUE";var j=e[d],k=Number.parseInvariant(j),c=[];c.push('<div class="ms-chkmark-container">');c.push('<div class="ms-chkmark-container-centerer">');c.push('<span class="ms-cui-img-16by16 ms-cui-img-cont-float" unselectable="on" style="z-index:0">');i(c,k>=1);c.push("</span>");c.push("</div>");c.push("</div>");return c.join("")},OnCheckMarkFieldPostRender:function(d){function i(){a:;var i=0;m$(".js-chkmark").forEach(function(j){if(typeof APD_InAssetPicker=="function"&&APD_InAssetPicker()){Sys.UI.DomElement.removeCssClass(j,h);Sys.UI.DomElement.addCssClass(j,g);if(Sys.UI.DomElement.containsCssClass(j,a))j.title=Strings.STS.L_CheckMarkCompleteNoPerms_Tooltip;else j.title=Strings.STS.L_CheckMarkNotCompleteNoPerms_Tooltip;return}else if(Sys.UI.DomElement.containsCssClass(j,a))j.title=Strings.STS.L_CheckMarkComplete_Tooltip;else j.title=Strings.STS.L_CheckMarkNotComplete_Tooltip;var q=j.getAttribute(e);if(q)return;j.setAttribute(e,"1");var l=j.getAttribute("liid"),p=j.getAttribute("lid");if(l==null||l.length==0||p==null||p.length==0)return;function r(a){!a.altKey&&!a.ctrlKey&&!a.shiftKey&&a.keyCode==Sys.UI.Key.space&&o(a)}var n=null,k=null,m=false;function o(q){function o(){a:;i--;m=false;n=null;if(k!==null)h(k);else if(typeof AJAXRefreshView=="function"&&i<1){$removeHandler(window,"beforeunload",f);i=0;var b={currentCtx:d,csrAjaxRefresh:true};if(d.clvp!=null){var a="pageYOffset"in window?window.pageYOffset:document.documentElement.scrollTop,c=j.id;d.clvp.ctx.onViewReRenderCompleted=function(){a:;window.scrollBy(0,a);var b=$get(c);b!=null&&b.focus()}}d.skipNextAnimation=true;AJAXRefreshView(b,SP.UI.DialogResult.OK)}k=null}function h(a){a:;if(d.inGridMode){var h=g_SPGridInitInfo[d.view],e=window[h.controllerId],j=(a*(e.IsParseAndSetFields(c)?100:1)).toString(),s=SP.JsGrid.CreateUnvalidatedPropertyUpdate(l,c,j,true);e.UpdateProperties([s])}else if(!m){i<=0&&$addHandler(window,"beforeunload",f);var g=new SP.ClientContext(null),q=g.get_web(),r=q.get_lists().getById(new SP.Guid(p)),b=r.getItemById(l);b.retrieve();b.set_item(c,a);b.update();n=a;m=true;i++;g.executeQueryAsync(o,o)}else if(n===a)k=null;else k=a}var e;if(Sys.UI.DomElement.containsCssClass(j,b)){Sys.UI.DomElement.removeCssClass(j,b);Sys.UI.DomElement.addCssClass(j,a);e=1}else{Sys.UI.DomElement.removeCssClass(j,a);Sys.UI.DomElement.addCssClass(j,b);e=0}if(Boolean(j.getAttribute("shouldAnimate"))){var r=GetAncestor(j,"TR"),g=r.querySelector('a[class*="ms-listlink"]');if(g!=null)if(e==1)if(!d.inGridMode||browseris==null||!browseris.firefox){g.parentNode.style.position="relative";SPAnimationUtility.BasicAnimator.StrikeThrough(g,null,function(){a:;h(e)},null)}else{g.style.textDecoration="line-through";h(e)}else{if(d.inGridMode){g.style.textDecoration="none";if(g.parentNode!=null)g.parentNode.style.textDecoration="none"}h(e)}else h(e)}else h(e);q!=null&&q.stopPropagation()}$addHandler(j.parentNode.parentNode.parentNode,"click",o);$addHandler(j,"keyup",r);j.OnClickCheckmark=o});m$(".ms-chkmark").forEach(function(b){if(Sys.UI.DomElement.containsCssClass(b,a))b.title=Strings.STS.L_CheckMarkCompleteNoPerms_Tooltip;else b.title=Strings.STS.L_CheckMarkNotCompleteNoPerms_Tooltip;return})}EnsureScriptFunc("mQuery.js","m$",function(){a:;EnsureScriptFunc("strings.js","Strings.STS.L_CheckMarkCompleteNoPerms_Tooltip",i)})}};function i(){a:;var a={Templates:{Fields:{Checkmark:{View:window.CheckMarkFieldTemplate.RenderCheckMarkField}}},OnPostRender:window.CheckMarkFieldTemplate.OnCheckMarkFieldPostRender};SPClientTemplates.TemplateManager.RegisterTemplateOverrides(a)}ExecuteOrDelayUntilScriptLoaded(i,"clienttemplates.js")})();(function(){a:;if(typeof window.CompletedTitleTemplate=="object")return;window.CompletedTitleTemplate={RenderTitleField:function(h,f,a,d){var e=ComputedFieldWorker[f.Name](h,f,a,d);if(Boolean(d.StrikeThroughOnCompletedEnabled)){var b="PercentComplete.";if(b in a){var c=a[b];if(c!=null){var g=Number.parseInvariant(c);if(g>=1)return'<span style="text-decoration: line-through">'+e+"</span>"}}}return e}};function a(){a:;var a={Templates:{Fields:{LinkTitle:{View:window.CompletedTitleTemplate.RenderTitleField}},ListTemplateType:171}};SPClientTemplates.TemplateManager.RegisterTemplateOverrides(a)}ExecuteOrDelayUntilScriptLoaded(a,"clienttemplates.js")})();(function(){a:;if(typeof window.DuedateFieldTemplate=="object")return;window.DuedateFieldTemplate={RenderDuedateField:function(j,b,a,h){var c="PercentComplete.",f=new DateTimeFieldRenderer(b.Name),g=a[b.Name];if(c in a)if(g!=null){var e=a[c];if(e!=null){var d=Number.parseInvariant(e);if(isNaN(d)||d<1){var i=Date.parseLocale(g,null);if(i!=null)if(GetDaysAfterToday(i)<0)return String.format('<span class="ms-error" title="{1}">{2}</span>',Strings.STS.L_DueDate_Color,Strings.STS.L_DueDate_Overdue_Tooltip,f.RenderField(j,b,a,h))}}}return f.RenderField(j,b,a,h)}};function a(){a:;var a={Templates:{Fields:{DueDate:{View:window.DuedateFieldTemplate.RenderDuedateField}},ListTemplateType:171}};SPClientTemplates.TemplateManager.RegisterTemplateOverrides(a)}ExecuteOrDelayUntilScriptLoaded(a,"clienttemplates.js")})();(function(){a:;if(typeof window.HierarchyTaskCallout=="object")return;function h(b){var g=b.CurrentItem,a=[];a.push('<div id="');function h(){a:;var a={PercentComplete:null,DueDate:null,AssignedTo:null,ContentTypeId:null};for(var b in a)if(!(b in g))return false;return true}function d(c){for(var d=b.ListSchema.Field,a=0;a<d.length;a++){var e=d[a];if(e.Name==c)return e.DisplayName}return c}var i=c(_spPageContextInfo.webAbsoluteUrl,_spPageContextInfo.webTitle,b.listName,b.listUrlDir,b.ListTitle,g,d("AssignedTo"),d("DueDate"));if(h())a.push(f(b));else a.push(e(b));a.push('" >');a.push(i);a.push("</div>");return a.join("")}function f(b){var a=b.CurrentItem,c=b.ListSchema;return c.ViewCount+","+a.ID+","+a.FSObjType+",comp"}function a(a){return a==null||a.length==null||a.length==0}function e(b){var a=b.CurrentItem,c=b.ListSchema;return c.ViewCount+","+a.ID+","+a.FSObjType+",inc"}function b(j,k,i,m,e){var l={PercentComplete:null,DueDate:null,AssignedTo:null,ContentTypeId:null},d=j.get_web();d.retrieve("Title");d.retrieve("Url");var b=d.get_lists().getById(new SP.Guid(k));b.retrieve("Title");b.retrieve("DefaultViewUrl");var a=['<View Scope="RecursiveAll">',"<ViewFields>"];for(var n in l){a.push('<FieldRef Name="');a.push(n);a.push('"></FieldRef>')}a.push("</ViewFields>");a.push("<Query>");a.push("<Where>");a.push("<Eq>");a.push('<FieldRef Name="ID" />');a.push('<Value Type="Number">');a.push(i);a.push("</Value>");a.push("</Eq>");a.push("</Where>");a.push("</Query>");a.push("</View>");var o=b.renderListData(a.join("")),h=b.get_fields(),f=h.getByInternalNameOrTitle("AssignedTo");f.retrieve();var g=h.getByInternalNameOrTitle("DueDate");g.retrieve();j.executeQueryAsync(function(){a:;for(var j=JSON.parse(o.get_value()),h=null,a=0;a<j.Row.length;a++)if(j.Row[a].ID==i)h=j.Row[a];ULS.AssertJS("TasksList",h!=null,"Should be able to find the row we're querying for");m.innerHTML=c(d.get_url(),d.get_title(),k,b.get_defaultViewUrl(),b.get_title(),h,f.get_title(),g.get_title());e!=null&&e()},function(){a:;Sys.Debug.fail("server call failed for some reason...");e!=null&&e()})}function c(f,j,r,l,h,b,p){var c=b.AssignedTo,e=b.DueDate,g=b["DueDate.FriendlyDisplay"],i=b["PercentComplete."],k=b.ContentTypeId;function o(e){if(a(f)||a(j))return;e.push('<div class="ms-metadata" style="margin-top: 6px;">');var d=[],b=[],c=[];d.push('<a href="');d.push(f);d.push('">');d.push(STSHtmlEncode(j));d.push("</a>");if(!a(l)&&!a(h)){var g=fRightToLeft?"left":"right";b.push('<span class="ms-pagearrow-');b.push(g);b.push('" style="vertical-align:middle;" >');b.push('<img src="');b.push(GetThemedImageUrl("spcommon.png"));b.push('" class="ms-pagearrow-');b.push(g);b.push('-icon" />');b.push("</span>");c.push(' <a href="');c.push(l);c.push('">');c.push(STSHtmlEncode(h));c.push("</a>")}e.push(String.format(Strings.STS.L_TaskCallout_Breadcrumb,d.join(""),b.join(""),c.join("")));e.push("</div>")}function m(a){if(c==null||c.length==null||c.length==0)return;a.push('<h3 class="ms-soften" style="margin-top: 12px; margin-bottom: 3px;">');a.push(p);a.push(": </h3>");for(var f=null,e=true,d=0;d<c.length;d++){!e&&a.push(";&#160;");var b=c[d];if(b.id!=null&&b.value!=""){a.push(STSHtmlEncode(b.value));e=false}}}function n(b){if(a(e))return;var n=Date.parseLocale(e,null);if(n==null)return;var c=GetDaysAfterToday(n),m,h,l=true;if(!a(i)){var j=Number.parseInvariant(i);if(isNaN(j)||j<1)l=false}if(!a(g))h=GetRelativeDateTimeString(g);else h=e;var k=c<0&&!l;b.push('<div style="margin-top: 12px;">');b.push('<div class="ms-taskdate-daysvalue');if(!k)b.push('"');else b.push(' ms-error"');var d,f;if(c<0){d=Strings.STS.L_DaysAgoLabelForCallout;f=Strings.STS.L_DaysAgoLabelForCalloutIntervals}else{d=Strings.STS.L_DaysLabelForCallout;f=Strings.STS.L_DaysLabelForCalloutIntervals}var o=String.format(d,"");m=GetLocalizedCountValue(o,f,Math.abs(c));b.push(">");b.push(Math.abs(c));b.push("</div>");b.push('<div class="ms-taskdate-dayinfo">');b.push('<div class="ms-taskdate-daysunit');if(!k)b.push('"');else b.push(' ms-error"');b.push(">");b.push(m);b.push("</div>");b.push('<div class="ms-metadata">');b.push(String.format(Strings.STS.L_TaskDueModifier,h));b.push("</div>");b.push("</div>");b.push("</div>")}function q(d){if(!a(k)){var c=[];c.push('<input value="');c.push(f);c.push("/");c.push(_spPageContextInfo.layoutsUrl);c.push("/listform.aspx?PageType=4&ListId=");c.push(r);c.push("&ID=");c.push(b.ID);c.push("&ContentTypeID=");c.push(k);c.push('" class="js-callout-location" />');d.push(Callout.GenerateDefaultSection(null,c.join("")))}}var d=[];o(d);m(d);n(d);q(d);return d.join("")}function j(a,d,c){if(!Boolean(a))return false;var b=false;RunOperationOnTimelineData(function(){a:;b=SP.UI.Timeline.ListTimelineDatasource.IsItemVisibleOnTimeline(d,c,a)});return b}window.HierarchyTaskCallout={TheCallout:null,TheCalloutLaunchpointTop:0,RenderItem:function(a){return h(a)},RenderFooter:function(a){var d=a.CurrentItem;function c(){a:;function a(){a:;var a=d.PermMask;return(parseInt("0x"+a.substring(a.length-4))&2052)==2052}return function(){a:;return a()}}function e(){a:;function b(){a:;if(!GetCtxFromView(a.view).AllowGridMode)return false;var b=d.PermMask;return(parseInt("0x"+b.substring(b.length-1))&4)==4}return function(){a:;return b()}}function b(){a:;return function(){a:;return!(typeof APD_InAssetPicker=="function")||!APD_InAssetPicker()}}function f(f,d){d.addAction(new CalloutAction({text:Strings.STS.L_CalloutOpenAction,onClickCallback:function(a,b){CalloutAction_Open_OnClick(a,b,f)}}));var g=GetCalloutFromRenderCtx(a);SP.SOD.executeFunc("SP.UI.Timeline.js","SP.UI.Timeline",function(){a:;var h=f.CurrentItem.ID;if(a.ListSchema.PropertyBag!=null){var i=SP.UI.Timeline.ListTimelineDatasource.GetSelectedViewName(a.ListSchema.PropertyBag),k=f.listName;if(j(h,k,i))d.addAction(new CalloutAction({text:Strings.STS.L_TimelineRemoveFromTimeline,onClickCallback:function(){RemoveItemsFromTimeline([{id:h}],k,i);CalloutManager.closeAll()},isVisibleCallback:b(),isEnabledCallback:c()}));else d.addAction(new CalloutAction({text:Strings.STS.L_TimelineAddToTimeline,onClickCallback:function(){AddItemsToTimeline([{id:h}],k,i);CalloutManager.closeAll()},isVisibleCallback:b(),isEnabledCallback:c()}))}d.addAction(new CalloutAction({text:Strings.STS.L_CalloutCreateSubtask,onClickCallback:function(){CalloutManager.closeAll();CreateSubItem(GetCtxFromView(a.view),h)},isVisibleCallback:b(),isEnabledCallback:e()}));g.set({contentWidth:d.calculateActionWidth()+50})})}return CalloutRenderFooterTemplate(a,f,true)},RetrieveCalloutContent:b,OnOpeningCallback:function(a){var g=GetCalloutFromRenderCtx(a);window.HierarchyTaskCallout.TheCallout==null&&SP.UI.Workspace.add_resized(i);window.HierarchyTaskCallout.TheCallout=g;window.HierarchyTaskCallout.TheCalloutLaunchpointTop=d(g).offsetTop;var j=a.CurrentItem,l=GetCalloutElementIDFromRenderCtx(a),k=a.listName,h=j.ID,c=$get(e(a));c!=null&&b(SP.ClientContext.get_current(),k,h,c,function(){a:;c.id=f(a)})}};function d(b){var a=b.getLaunchPoint();return a.id.indexOf("calloutLaunchPoint")>=0?a:a.firstChild}function i(){a:;var a=window.HierarchyTaskCallout.TheCallout;if(a!=null&&a.isOpenOrOpening()){var b=d(a),c=b.offsetTop-window.HierarchyTaskCallout.TheCalloutLaunchpointTop;if(c!=0){window.HierarchyTaskCallout.TheCalloutLaunchpointTop=b.offsetTop;a.getContentElement().parentNode.style.top=String(parseFloat(a.getContentElement().parentNode.style.top)+c)+"px"}}}function g(){a:;var a={ListTemplateType:171,BaseViewID:"Callout",Templates:{Header:CalloutRenderHeaderTemplate,Footer:window.HierarchyTaskCallout.RenderFooter,Item:window.HierarchyTaskCallout.RenderItem,OnPostRender:window.HierarchyTaskCallout.OnOpeningCallback}};SPClientTemplates.TemplateManager.RegisterTemplateOverrides(a)}ExecuteOrDelayUntilScriptLoaded(g,"clienttemplates.js")})();(function(){a:;if(typeof window.TaskFirstDateNotify=="object")return;window.TaskFirstDateNotify={AddNotificationOnFirstDate:function(a){var h=RenderViewTemplate(a),g={StartDate:null,DueDate:null};function d(){a:;var b=SP.UI.Timeline.ListTimelineDatasource.GetSelectedViewName(a.ListSchema.PropertyBag);return SP.UI.Timeline.ListTimelineDatasource.DoesTimelineHaveRWData(a.listName,b)&&!SP.UI.Timeline.ListTimelineDatasource.DoesTimelineHaveInterestingData(a.listName,b)}function e(){a:;var b=g_SPGridInitInfo[a.view];return b==null?null:window[b.controllerId]}function f(b,c){var a=document.createElement("div");a.id=c;a.height="0px";a.width="0px";b.appendChild(a);return a}function c(a){return function(b){var c=b.isRTL;b.isRTL=!b.isRTL;a(b);b.isRTL=c}}function b(b){a:;var d=document.getElementById("siteactiontd");if(!fIsNullOrUndefined(d)){var g=a.listName,e="siteactiontd"+a.wpq,h=$get(e);if(h!=null)return;EnsureScriptFunc("callout.js","Callout",function(){a:;f(d,e);var l="ctx"+a.ctxId+"_"+b+"_calloutLaunchPoint",k=$get(l);if(k==null)return;var m=GetAncestor(k,"TR"),o=GetEcbTdFromRow(m),n=GetEcbAffordanceDivFromRow(m);if(n==null)return;var i=[];i.push('<div style="margin-bottom:20px;">');i.push('<span class="ms-dlg-heading">');i.push(Strings.STS.L_TaskNotifyFirstDateHeader);i.push("</span>");i.push("</div>");i.push(Strings.STS.L_TaskNotifyFirstDateLineOne);i.push("<br />");var h=new CalloutOptions;h.content=i.join("");h.launchPoint=k;h.ID=l+"Callout";h.beakOrientation="leftRight";h.positionAlgorithm=c(h.positionAlgorithm);h.onClosedCallback=function(a){calloutManager.remove(a)};var j=new CalloutOpenOptions;j.event="none";j.closeCalloutOnBlur=true;h.openOptions=j;try{GetTimelineView(a.ListSchema.PropertyBag,function(c){a:;AddItemsToTimeline([{id:b}],g,c);var a=CalloutManager.createNew(h);a.addAction(new CalloutAction({text:Strings.STS.L_TimelineRemoveFromTimeline,onClickCallback:function(){SP.SOD.executeFunc("SP.UI.Timeline.js","SP.UI.Timeline",function(){a:;RemoveItemsFromTimeline([{id:b}],g,c)})}}));a.set({contentWidth:a.getActionMenu().calculateActionWidth()});a.open()})}catch(p){}})}}ExecuteOrDelayUntilScriptLoaded(function(){a:;SP.GanttControl.WaitForGanttCreation(function(c){a:;var a=e();!fIsNullOrUndefined(a)&&c==a&&ExecuteOrDelayUntilScriptLoaded(function(){a:;a.AttachRowChanged(function(h,c,e){if(!d())return;if(e)return;var a=false;for(var f in g)if(c[f]!=null){a=true;break}a&&window.setTimeout(function(){a:;b(h)},500)})},"sp.ui.timeline.js")})},"spgantt.js");return h}};function a(){a:;var a={ListTemplateType:171,Templates:{View:window.TaskFirstDateNotify.AddNotificationOnFirstDate}};SPClientTemplates.TemplateManager.RegisterTemplateOverrides(a)}ExecuteOrDelayUntilScriptLoaded(a,"clienttemplates.js")})();(function(){a:;if(typeof window.TaskListShortcutFooterRenderer=="object")return;window.TaskListShortcutFooterRenderer={RenderShortcutFooter:function(b){var a=[];a.push(RenderFooterTemplate(b));if(b.inGridMode){a.push('<br/><div class="ms-helper">');a.push(Strings.STS.L_TasksListShortcut_Header);a.push('&nbsp;<a id="taskShortcutCalloutPoint');a.push(b.wpq);a.push('" class="ms-taskListShortcutCallout"><span class="ms-taskListShortcutCalloutSpan">&nbsp;</span><span class="ms-accessible">');a.push(Strings.STS.L_TasksListShortcut_Header);a.push("</span></a></div>")}return a.join("")},OnRenderShortcutFooterPostRender:function(a){EnsureScriptFunc("mQuery.js","m$",function(){a:;EnsureScriptFunc("callout.js","Callout",function(){a:;m$("#taskShortcutCalloutPoint"+a.wpq).forEach(function(e){if(!e.hasCallOutInited){var b=[];b.push('<div class="ms-helper" style="padding-top: 15px;">');for(var d=[Strings.STS.L_TasksListShortcut_Insert,Strings.STS.L_TasksListShortcut_Indent,Strings.STS.L_TasksListShortcut_Outdent,Strings.STS.L_TasksListShortcut_MoveUp,Strings.STS.L_TasksListShortcut_MoveDown],c=0;c<d.length;c++){b.push(d[c]);c+1!=d.length&&b.push("<br/>")}b.push("</div>");CalloutManager.createNew({ID:"taskShortcutCallout"+a.wpq,launchPoint:e,openOptions:{event:"click",showCloseButton:true},content:b.join(""),beakOrientation:"topBottom",positionAlgorithm:function(a){if(!a.isRTL)a.moveDownAndRight();else a.moveDownAndLeft();if(a.numberOfEdgesCollidingWithBoundingBox()>0){var b=new CalloutOptions;b.positionAlgorithm.apply(this,arguments)}}});e.hasCallOutInited=true}})})})}};function a(){a:;var a={Templates:{Footer:window.TaskListShortcutFooterRenderer.RenderShortcutFooter,ListTemplateType:171},OnPostRender:window.TaskListShortcutFooterRenderer.OnRenderShortcutFooterPostRender};SPClientTemplates.TemplateManager.RegisterTemplateOverrides(a)}ExecuteOrDelayUntilScriptLoaded(a,"clienttemplates.js")})();typeof Sys!="undefined"&&typeof Sys.Application!="undefined"&&typeof Sys.Application.notifyScriptLoaded!="undefined"&&Sys.Application.notifyScriptLoaded();typeof NotifyScriptLoadedAndExecuteWaitingJobs=="function"&&NotifyScriptLoadedAndExecuteWaitingJobs("hierarchytaskslist.js")}function ULSEhz(){var a={};a.ULSTeamName="Microsoft SharePoint Foundation";a.ULSFileName="hierarchytaskslist.commentedjs";return a}$_global_hierarchytaskslist();