function ULSToL(){var o=new Object;o.ULSTeamName="DLC Server";o.ULSFileName="EDiscovery.SourceAdderControl.js";return o;}
Type.registerNamespace("Discovery");Discovery.SourceAdderControl=function(){};Discovery.SourceAdderControl.newValidateClick=function(a){ULSToL:;a&&a.target&&Discovery.SourceAdderControl.validateControl(a.target.parentNode,a.target.getAttribute("serviceUrl"),a.target.getAttribute("isLocation"))};Discovery.SourceAdderControl.handleKeyDown=function(a,d,c,b){ULSToL:;if(a&&(a.keyCode===75&&a.ctrlKey||a.keyCode===13)){Discovery.SourceAdderControl.validateControl(d,c,b);return false}return true};Discovery.SourceAdderControl.handleEnterPressed=function(b,a){ULSToL:;b&&a&&b.keyCode===13&&a.click()};Discovery.SourceAdderControl.validateControl=function(a,e,d){ULSToL:;var b=Discovery.SourceAdderControl.$0(a);if(b)if(b.value){if(Discovery.SourceAdderControl.$5(a)!==b.value){Discovery.SourceAdderControl.$1(a);var c={};c.location=b.value;c.isLocation=d;Sys.Net.WebServiceProxy.invoke(e,"ValidateSource",false,c,Discovery.SourceAdderControl.$9,Discovery.SourceAdderControl.$8,a,Sys.Net.WebRequestManager.get_defaultTimeout(),false,null)}}else Discovery.SourceAdderControl.$1(a)};Discovery.SourceAdderControl.getControlValues=function(e){ULSToL:;var b=new Array(0),c=$get(e);if(c){var f=0,a=c.firstChild;while(a){if(a.nodeName==="SPAN"){var d=Discovery.SourceAdderControl.$0(a.firstChild);if(d)b[f++]=d.value}a=a.nextSibling}}return b};Discovery.SourceAdderControl.openBrowseDialog=function(c,e){ULSToL:;var d=$get(c);if(d){var a=new SP.UI.DialogOptions;a.width=575;a.autoSize=true;a.url=e;var b={};b.controlId=c;b.currentValue=d.value;a.args=b;a.dialogReturnValueCallback=Discovery.SourceAdderControl.$7;SP.UI.ModalDialog.showModalDialog(a)}};Discovery.SourceAdderControl.$7=function(d,c){ULSToL:;if(d===1)if(c){var a=c,b=$get(a.controlId);b&&Discovery.SourceAdderControl.$4(b.parentNode,true,a.validationMessage,a.result,a.result,b.value)}};Discovery.SourceAdderControl.$8=function(a){ULSToL:;if(!a)throw Error.argumentNull("error");alert(a.get_message())};Discovery.SourceAdderControl.$4=function(c,e,g,f,h,i){ULSToL:;var b=Discovery.SourceAdderControl.$0(c);if(b)if(b.value===i){if(e){b.value=h;b.title=f;Discovery.SourceAdderControl.$A(c,b.value,f)}var a=Discovery.SourceAdderControl.$2(c);if(a){a.innerHTML=g;Sys.UI.DomElement.removeCssClass(a,"ms-hide");if(e){Sys.UI.DomElement.removeCssClass(a,"error-text-shown");Sys.UI.DomElement.addCssClass(a,"validated-text-shown")}else{Sys.UI.DomElement.removeCssClass(a,"validated-text-shown");Sys.UI.DomElement.addCssClass(a,"error-text-shown")}}var d=Discovery.SourceAdderControl.$3(c);if(d)if(e)Sys.UI.DomElement.removeCssClass(d,"ms-hide");else Sys.UI.DomElement.addCssClass(d,"ms-hide")}};Discovery.SourceAdderControl.$1=function(a){ULSToL:;var b=Discovery.SourceAdderControl.$2(a);Sys.UI.DomElement.addCssClass(b,"ms-hide");var c=Discovery.SourceAdderControl.$3(a);Sys.UI.DomElement.addCssClass(c,"ms-hide")};Discovery.SourceAdderControl.$9=function(a,b){ULSToL:;b&&Discovery.SourceAdderControl.$4(b,a.IsValid,a.ValidationText,a.DisplayId,a.Title,a.InputText)};Discovery.SourceAdderControl.$5=function(b){ULSToL:;if(b&&b.firstChild){var a=b.firstChild;while(a){if(a&&a.nodeName==="INPUT"&&a.attributes.getNamedItem("type")&&a.attributes.getNamedItem("type").value==="hidden")return a.value;a=a.nextSibling}}return null};Discovery.SourceAdderControl.$A=function(b,e,f){ULSToL:;if(b&&b.firstChild){var c=true,a=b.firstChild;while(a){if(a&&a.nodeName==="INPUT"&&a.attributes.getNamedItem("type")&&a.attributes.getNamedItem("type").value==="hidden"){var d=a;if(c){d.value=e;c=false}else{d.value=f;break}}a=a.nextSibling}}};Discovery.SourceAdderControl.$0=function(b){ULSToL:;if(b&&b.firstChild){var a=b.firstChild;while(a){if(Discovery.SourceAdderControl.$6(a))return a;a=a.nextSibling}}return null};Discovery.SourceAdderControl.$2=function(b){ULSToL:;if(b&&b.lastChild){var a=b.lastChild;while(a){if(a.nodeName==="DIV")return a;a=a.previousSibling}}return null};Discovery.SourceAdderControl.$3=function(a){ULSToL:;return a&&a.parentNode&&a.parentNode.firstChild&&a.parentNode.firstChild.className==="discovery-addsource-validation"&&a.parentNode.firstChild.firstChild?a.parentNode.firstChild.firstChild:null};Discovery.SourceAdderControl.$6=function(a){ULSToL:;return!!a&&a.nodeName==="INPUT"&&!!a.attributes.getNamedItem("type")&&a.attributes.getNamedItem("type").value==="text"};Discovery.SourceAdderControl.registerClass("Discovery.SourceAdderControl");function ediscovery_sourceaddercontrol_initialize(){}ediscovery_sourceaddercontrol_initialize();RegisterModuleInit("ediscovery.sourceaddercontrol.js",ediscovery_sourceaddercontrol_initialize);typeof Sys!="undefined"&&Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded();NotifyScriptLoadedAndExecuteWaitingJobs("EDiscovery.SourceAdderControl.js");