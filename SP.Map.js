function ULSagB(){var o=new Object;o.ULSTeamName="Microsoft SharePoint Foundation";o.ULSFileName="SP.Map.js";return o;}
function _registerMap(){ULSagB:;Type.registerNamespace("SP.Maps");SP.Maps.IMapProvider=function(){};SP.Maps.IMapProvider.registerInterface("SP.Maps.IMapProvider");SP.Maps.MapOptions=function(){ULSagB:;this.center=new SP.Maps.Geolocation(0,0);this.disableKeyboardInput=false;this.disableUserInput=false;this.enableClickableLogo=false;this.enableSearchLogo=false;this.showCopyright=true;this.showDashboard=false;this.showLogo=true;this.showScalebar=true;this.zoom=1};SP.Maps.MapOptions.prototype={center:null,credentials:null,disableKeyboardInput:false,disableUserInput:false,enableClickableLogo:false,enableSearchLogo:false,height:0,showCopyright:false,showDashboard:false,showLogo:false,showScalebar:false,width:0,zoom:0};SP.Maps.PushpinOptions=function(){ULSagB:;this.icon=null;this.text=null;this.typeName=null;this.visible=true;this.draggable=false};SP.Maps.PushpinOptions.prototype={icon:null,text:null,typeName:null,visible:false,draggable:false};SP.Maps.ViewOptions=function(){};SP.Maps.ViewOptions.prototype={bounds:null,center:null,zoom:0};SP.Maps.MouseEventArgs=function(){};SP.Maps.MouseEventArgs.prototype={eventName:null,pageX:0,pageY:0,target:null,targetType:null,getX:function(){ULSagB:;return 0},getY:function(){ULSagB:;return 0}};SP.Maps.SPPushpin=function(){};SP.Maps.SPPushpin.prototype={latitude:0,longitude:0,isDraggable:false,showHover:false,label:null,pushpinID:null,icon:null};SP.Maps.SPMapOption=function(){};SP.Maps.SPMapOption.prototype={mapDiv:null,center:null,zoom:0,height:0,width:0,apiKey:null};SP.Maps.Geolocation=function(b,a){ULSagB:;this.latitude=b;this.longitude=a};SP.Maps.Geolocation.prototype={latitude:0,longitude:0};SP.Maps.BingMaps=function(){};SP.Maps.BingMaps.isLoaded=function(){ULSagB:;return typeof window.Microsoft==="undefined"||typeof window.Microsoft.Maps==="undefined"||typeof window.Microsoft.Maps.Location==="undefined"?false:true};SP.Maps.BingMaps.isBlocked=function(){ULSagB:;return SP.Maps.BingMaps.isBingMapsBlocked};SP.Maps.BingMaps.blockedStatus=function(a){ULSagB:;SP.Maps.BingMaps.isBingMapsBlocked=a};SP.Maps.BingMapProvider=function(){ULSagB:;this.$$d_removePushpinOnHover=Function.createDelegate(this,this.removePushpinOnHover);this.$$d_showPushpinOnHover=Function.createDelegate(this,this.showPushpinOnHover);this.$2_0=new SP.Maps.MapOptions;this.$3_0=null;if(typeof window.Microsoft!=="undefined"&&typeof window.Microsoft.Maps!=="undefined"&&typeof window.Microsoft.Maps.EntityCollection!=="undefined"){this.$3_0=new Microsoft.Maps.EntityCollection;this.$4_0=new Microsoft.Maps.EntityCollection}this.$1_0=false};SP.Maps.BingMapProvider.prototype={$0_0:null,$2_0:null,$3_0:null,$4_0:null,$1_0:false,normalizeLocation:function(b,a){ULSagB:;return!SP.Maps.BingMaps.isLoaded()?null:new Microsoft.Maps.Location(b,Microsoft.Maps.Location.normalizeLongitude(a))},loadMap:function(a){ULSagB:;if(!SP.ScriptUtility.isNullOrUndefined(a)&&!SP.ScriptUtility.isNullOrUndefined(a.mapDiv)){if(a.width>0)a.mapDiv.style.width=a.width+"px";if(a.height>0)a.mapDiv.style.height=a.height+"px";if(SP.Maps.BingMaps.isBlocked()){a.mapDiv.innerHTML='<div style="position:absolute;width:100%;bottom:50%;text-align:center;"><span>'+Strings.STS.L_BingMap_Blocked+"</span></div>";return}if(!SP.Maps.BingMaps.isLoaded()){a.mapDiv.innerHTML='<div style="position:absolute;width:100%;bottom:50%;text-align:center;"><span>'+Strings.STS.L_BingMap_NoInternetAccess+"</span></div>";return}if(!this.isNullOrUndefinedOrEmpty(a.apiKey))this.$2_0.credentials=a.apiKey;else this.$2_0.credentials="";if(!SP.ScriptUtility.isNullOrUndefined(a.center)){var b=this.normalizeLocation(a.center.latitude,a.center.longitude);this.$2_0.center=new SP.Maps.Geolocation(b.latitude,b.longitude);if(a.zoom>0)this.$2_0.zoom=a.zoom;else this.$2_0.zoom=15}this.$0_0=new Microsoft.Maps.Map(a.mapDiv,this.$2_0);this.$1_0=true}},isNullOrUndefinedOrEmpty:function(b){ULSagB:;var c=null,a=b;return a===c||typeof a==="undefined"||!b.length},clearMap:function(){ULSagB:;if(!this.$1_0)return;this.$0_0.entities.clear();this.$3_0.clear()},disposeMap:function(){ULSagB:;if(!this.$1_0)return;this.$0_0.dispose()},disableKeyboardInputOnMap:function(a){ULSagB:;if(!this.$1_0)return;if(a)this.$2_0.disableKeyboardInput=true;else this.$2_0.disableKeyboardInput=false;this.$0_0.setOptions(this.$2_0)},addPushpins:function(b){ULSagB:;if(!this.$1_0)return;if(!b||!b.length)return;for(var h,c,f=new SP.Maps.ViewOptions,d,k=b.length,e=0,a=0,a=0;a<k;a++)if(b[a]){h=this.normalizeLocation(b[a].latitude,b[a].longitude);c=new SP.Maps.PushpinOptions;c.draggable=b[a].isDraggable;c.text=b[a].label;if(!this.isNullOrUndefinedOrEmpty(b[a].icon))c.icon=b[a].icon;c.typeName="ms-pushpin";d=new Microsoft.Maps.Pushpin(h,c);d.pushpinID=b[a].pushpinID;if(b[a].showHover){var i,g;i=this.$$d_showPushpinOnHover;g=this.$$d_removePushpinOnHover;Microsoft.Maps.Events.addHandler(d,"mouseover",i);Microsoft.Maps.Events.addHandler(d,"mouseout",g);Microsoft.Maps.Events.addHandler(d,"mousedown",g)}this.$3_0.push(d)}e=this.$3_0.getLength();if(!e)return;if(e===1){f.zoom=15;f.center=this.$3_0.get(0).getLocation()}else{var j=new Array(e);for(a=0;a<e;a++)j[a]=this.$3_0.get(a).getLocation();f.bounds=Microsoft.Maps.LocationRect.fromLocations.apply(null,j)}this.$0_0.setView(f);this.$0_0.entities.clear();this.$0_0.entities.push(this.$3_0)},addHighlightedPushpin:function(a){ULSagB:;if(!this.$1_0||!a)return;var c=this.normalizeLocation(a.latitude,a.longitude),b=new SP.Maps.PushpinOptions;b.draggable=a.isDraggable;b.text=a.label;b.icon=SP.Utilities.Utility.get_layoutsLatestVersionUrl()+"images/MapPushpinHover.25x39x32.png";b.typeName="ms-pushpin";var d=new Microsoft.Maps.Pushpin(c,b);this.$4_0.push(d);this.$0_0.entities.indexOf(this.$4_0)===-1&&this.$0_0.entities.push(this.$4_0)},removeHighlightedPushpin:function(){ULSagB:;if(!this.$1_0)return;this.$4_0.clear()},moveMapToSelectedLocation:function(b){ULSagB:;if(!this.$1_0||!b)return;var d=this.normalizeLocation(b.latitude,b.longitude),a=this.$0_0.tryLocationToPixel(d,2);if(!(a.x>=0&&a.y>=0&&a.x<this.$0_0.getWidth()&&a.y<this.$0_0.getHeight())){var c=new SP.Maps.ViewOptions;c.center=d;c.zoom=this.$0_0.getZoom();this.$0_0.setView(c)}},showPushpinOnHover:function(a){ULSagB:;if(!this.$1_0)return;if(a.targetType!="pushpin")return;var c=a.target,b=this.$0_0.tryLocationToPixel(a.target.getLocation(),2);MapViewTemplate.ShowMapPushpinHover(b.x,b.y-20,c)},removePushpinOnHover:function(a){ULSagB:;if(!this.$1_0)return;if(a.targetType!="pushpin")return;var b=a.target.pushpinID;MapViewTemplate.HideMapPushpinHover(b)}};SP.Maps.MapView=function(){};SP.Maps.MapView.getCenter=function(b){ULSagB:;if(!SP.Maps.BingMaps.isLoaded()||SP.Maps.BingMaps.isBlocked())return null;for(var c=null,e,d=new Array(0),f=0,g=b.length,a=0;a<g;a++)if(b[a]){c=new Microsoft.Maps.Location(b[a].latitude,Microsoft.Maps.Location.normalizeLongitude(b[a].longitude));d[f++]=c}if(d.length>1){e=Microsoft.Maps.LocationRect.fromLocations.apply(null,d);return e.center}else return c};SP.Maps.MapProviderFactory=function(){};SP.Maps.MapProviderFactory.createMapProvider=function(d,b){ULSagB:;var c=d+"_"+b,e=new SP.Maps.Geolocation(0,0),a;switch(c){case"bing_7.0":a=new SP.Maps.BingMapProvider;return a;default:a=new SP.Maps.BingMapProvider;return a}};SP.Maps.MapOptions.registerClass("SP.Maps.MapOptions");SP.Maps.PushpinOptions.registerClass("SP.Maps.PushpinOptions");SP.Maps.ViewOptions.registerClass("SP.Maps.ViewOptions");SP.Maps.MouseEventArgs.registerClass("SP.Maps.MouseEventArgs");SP.Maps.SPPushpin.registerClass("SP.Maps.SPPushpin");SP.Maps.SPMapOption.registerClass("SP.Maps.SPMapOption");SP.Maps.Geolocation.registerClass("SP.Maps.Geolocation");SP.Maps.BingMaps.registerClass("SP.Maps.BingMaps");SP.Maps.BingMapProvider.registerClass("SP.Maps.BingMapProvider",null,SP.Maps.IMapProvider);SP.Maps.MapView.registerClass("SP.Maps.MapView");SP.Maps.MapProviderFactory.registerClass("SP.Maps.MapProviderFactory");function a(){ULSagB:;SP.Maps.BingMaps.isBingMapsBlocked=false}a();RegisterModuleInit("SP.Map.js",a);NotifyScriptLoadedAndExecuteWaitingJobs("SP.Map.js")}ExecuteOrDelayUntilScriptLoaded(_registerMap,"sp.js");