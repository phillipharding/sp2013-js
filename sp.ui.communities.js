Type.registerNamespace("SP.UI.Communities");SP.UI.Communities.CommunityDiscussionHeader=function(a){SP.UI.Communities.CommunityDiscussionHeader.initializeBase(this,[a])};SP.UI.Communities.CommunityDiscussionHeader.prototype={getNewPostUrl:function(){var a=SP.UI.Discussions.HeaderBehavior.prototype.getNewPostUrl.call(this),c=SP.ScriptHelpers.getDocumentQueryPairs(),b=c.CategoryID;if(!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(b)){a=SP.ScriptHelpers.replaceOrAddQueryString(a,"Category",b);a=SP.ScriptHelpers.replaceOrAddQueryString(a,"ClientRender","FALSE")}return a},onClickNewPostLink:function(a){SP.UI.Discussions.HeaderBehavior.prototype.onClickNewPostLink.call(this,a);if(SP.UI.Communities.Helpers.$9(this.context)&&SP.UI.Discussions.Helpers.isNullOrUndefined(this.context.ListSchema.ListRight_AddListItems)){a.preventDefault();SP.UI.Communities.Helpers.$b(this.context)}},populateSortFilterItemList:function(){var a=SP.ScriptHelpers.getDocumentQueryPairs(),b=a.CategoryID;if(SP.UI.Communities.Helpers.$9(this.context)&&!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(b)){this.sortFilterPickerControl.addItem(new SP.UI.Discussions.QueryOverrideItem(this.context,Strings.STS.L_SPDiscSortMostRecent,""));this.$8_1(Strings.STS.L_SPDiscSortWhatsHot,"Popularity",'<Gt><FieldRef Name="Popularity"/><Value Type="Number">-1</Value></Gt>');this.$8_1(Strings.STS.L_SPDiscSortMyPosts,"Author",'<Eq><FieldRef Name="Author"/><Value Type="Integer"><UserID Type="Integer"/></Value></Eq>');this.$8_1(Strings.STS.L_SPDiscSortUnanswered,"IsAnswered",'<Eq><FieldRef Name="IsAnswered"/><Value Type="Integer">0</Value></Eq>');this.$8_1(Strings.STS.L_SPDiscSortAnswered,"IsAnswered",'<Eq><FieldRef Name="IsAnswered"/><Value Type="Integer">1</Value></Eq>');this.$8_1(Strings.STS.L_SPDiscFilterFeatured,"IsFeatured",'<Eq><FieldRef Name="IsFeatured"/><Value Type="Integer">1</Value></Eq>')}else{SP.UI.Discussions.HeaderBehavior.prototype.populateSortFilterItemList.call(this);if(SP.UI.Discussions.Helpers.doesSchemaContainField(this.context.ListSchema,"Popularity")){var c=new SP.UI.Discussions.QueryOverrideItem(this.context,Strings.STS.L_SPDiscSortWhatsHot,'<Query><OrderBy UseIndexForOrderBy="TRUE" Override="TRUE"/><Where><Gt><FieldRef Name="Popularity"/><Value Type="Number">-1</Value></Gt></Where></Query>');this.sortFilterPickerControl.insertItem(1,c)}}},$8_1:function(e,f,g){var b=SP.ScriptHelpers.getDocumentQueryPairs(),c=b.CategoryID,d=String.format('<Eq><FieldRef LookupId="TRUE" Name="CategoriesLookup"/><Value Type="Number">{0}</Value></Eq>',c),a=SP.UI.Communities.Helpers.$l(this.context,"CategoriesLookup",f,d,g);!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(a)&&this.sortFilterPickerControl.addItem(new SP.UI.Discussions.QueryOverrideItem(this.context,e,a))}};SP.UI.Communities.CommunityDiscussionPost=function(a,b){SP.UI.Communities.CommunityDiscussionPost.initializeBase(this,[a,b])};SP.UI.Communities.CommunityDiscussionPost.prototype={get_topicListViewUrl:function(){var a,b=SP.UI.Communities.Helpers.$M(this.get_jsonItem()),c=b.length>0;if(SP.UI.Communities.Helpers.$9(this.get_context()))a=SP.ScriptHelpers.urlCombine(SP.Utilities.HttpUtility.urlPathEncode(SP.PageContextInfo.get_webAbsoluteUrl()),String.format("/SitePages/{0}.aspx",c?SP.UI.Communities.Helpers.$E(this.get_context(),"CategoryPage",Strings.STS.L_SPDiscCategoryPage):SP.UI.Communities.Helpers.$E(this.get_context(),"HomePage",Strings.STS.L_SPDiscHomePage)));else a=SP.UI.Discussions.PostBehavior.prototype.get_topicListViewUrl.call(this);if(c){a=SP.ScriptHelpers.replaceOrAddQueryString(a,"CategoryID",b[0].$G_0.toString());a=SP.ScriptHelpers.replaceOrAddQueryString(a,"SiteMapTitle",b[0].$I_0.toString())}return a},get_topicLinkUrl:function(){var a;if(SP.UI.Communities.Helpers.$9(this.get_context())){var e=SP.UI.Communities.Helpers.$E(this.get_context(),"TopicPage",Strings.STS.L_SPDiscTopicPage);a=SP.ScriptHelpers.urlCombine(SP.Utilities.HttpUtility.urlPathEncode(SP.PageContextInfo.get_webAbsoluteUrl()),String.format("/SitePages/{0}.aspx",e));a=SP.ScriptHelpers.replaceOrAddQueryString(a,"RootFolder",this.jsonItem.FileRef);a=SP.ScriptHelpers.replaceOrAddQueryString(a,"FolderCTID",this.jsonItem.ContentTypeId);var c=SP.UI.Communities.Helpers.$T(this.jsonItem);if(!SP.ScriptHelpers.isNullOrUndefinedOrEmpty(c)){a=SP.ScriptHelpers.replaceOrAddQueryString(a,"SiteMapTitle",c);var d=SP.UI.Communities.Helpers.$E(this.get_context(),"CategoryPage",Strings.STS.L_SPDiscCategoryPage);if(!SP.ScriptHelpers.isNullOrUndefinedOrEmpty(d)){var b=this.get_context().HttpRoot+String.format("/SitePages/{0}.aspx",d);b=SP.ScriptHelpers.replaceOrAddQueryString(b,"CategoryID",SP.UI.Communities.Helpers.$j(this.jsonItem));b=SP.ScriptHelpers.replaceOrAddQueryString(b,"SiteMapTitle",c);a=SP.ScriptHelpers.replaceOrAddQueryString(a,"SiteMapUrl",b)}}}else a=SP.UI.Discussions.PostBehavior.prototype.get_topicLinkUrl.call(this);return a},populateCommandBar:function(){SP.UI.Discussions.PostBehavior.prototype.populateCommandBar.call(this);if(!SP.UI.Discussions.Helpers.isAnonymousAccess(this.get_context())){var b=SP.ScriptHelpers.getListLevelPermissionMask(this.jsonItem),a=SP.ScriptHelpers.hasPermission(b,2);if(SP.UI.Discussions.Helpers.doesSchemaContainField(this.get_context().ListSchema,"AverageRating"))this.commandBar.insertCommand(new SP.UI.Communities.RateAction(this),0);else SP.UI.Discussions.Helpers.doesSchemaContainField(this.get_context().ListSchema,"LikesCount")&&this.commandBar.insertCommand(new SP.UI.Communities.LikeAction(this),0);SP.UI.Communities.Helpers.$9(this.get_context())&&!a&&this.commandBar.addCommand(new SP.UI.Communities.JoinAction(this,"replyJoin",Strings.STS.L_SPDiscReply));if(SP.UI.Discussions.Helpers.doesSchemaContainField(this.get_context().ListSchema,"AbuseReportsCount"))if(a)this.commandBar.addCommand(new SP.UI.Communities.ReportAbuseAction(this));else this.commandBar.addCommand(new SP.UI.Communities.JoinAction(this,"reportJoin",Strings.STS.L_SPDiscReportAbuse))}},populateRepliesSortPicker:function(){SP.UI.Discussions.PostBehavior.prototype.populateRepliesSortPicker.call(this);if(SP.UI.Discussions.Helpers.doesSchemaContainField(this.get_context().ListSchema,"LikesCount")){var a=new SP.UI.Discussions.QueryOverrideItem(this.get_context(),Strings.STS.L_SPDiscSortMostLiked,'<Query><OrderBy><FieldRef Name="LikesCount" Ascending="FALSE"></FieldRef></OrderBy></Query>');this.repliesSortPicker.addItem(a)}},renderAuthorCardMetaData:function(a){SP.UI.Discussions.PostBehavior.prototype.renderAuthorCardMetaData.call(this,a);var b=SP.UI.Communities.Helpers.getGiftedBadgeFromAuthor(this.get_context(),this.get_jsonItem(),a);if(b)SP.UI.Communities.Helpers.$Y(a,b);else this.$16_1(a)},renderRootPostMetaData:function(a){SP.UI.Discussions.PostBehavior.prototype.renderRootPostMetaData.call(this,a)},populateFolderMetalineItems:function(c){SP.UI.Discussions.PostBehavior.prototype.populateFolderMetalineItems.call(this,c);var a=SP.ScriptHelpers.getDocumentQueryPairs(),b=a.CategoryID;SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(b)&&this.insertFolderMetalineItem(1,this.$n_1())},$n_1:function(){var b=new SP.HtmlBuilder,c=STSHtmlEncode(SP.UI.Communities.Helpers.$T(this.jsonItem));if(!SP.ScriptHelpers.isNullOrUndefinedOrEmpty(c)){b.renderBeginTag("span");var a=new SP.HtmlBuilder;a.addAttribute("href",this.get_topicListViewUrl());a.renderBeginTag("a");a.write(c);a.renderEndTag();b.write(String.format(STSHtmlEncode(Strings.STS.L_SPDiscMetaLineCategory),a.toString()));b.renderEndTag()}return b.toString()},$16_1:function(b){if(!SP.UI.Discussions.Helpers.doesSchemaContainField(this.get_context().ListSchema,"AuthorReputationLookup"))return;var a=Number.parseLocale(this.get_jsonItem().AuthorReputationLookup);if(SP.UI.Discussions.Helpers.isNullOrUndefined(a)||a<=0)return;SP.UI.Communities.Helpers.renderReputationBar(b,a,true,this.get_context().ListSchema.PropertyBag,this)},$13_1:function(c){var a=this.get_context().forumViewState,b=a.createPostBehavior(this.get_context(),this.get_jsonItem());b.render(c,new SP.UI.Discussions.PostBehavior.RenderOptions(false,true,false,false,false,false,false))}};SP.UI.Communities.JoinAction=function(a,b,c){SP.UI.Communities.JoinAction.initializeBase(this,[a,b,c])};SP.UI.Communities.JoinAction.prototype={onClick:function(){SP.UI.Communities.Helpers.$b(this.get_owner().get_context())}};SP.UI.Communities.LikeAction=function(a){SP.UI.Communities.LikeAction.initializeBase(this,[a,"like",Strings.STS.L_SPDiscLike]);this.$7_2=a.get_jsonItem().ID.toString()};SP.UI.Communities.LikeAction.prototype={$A_2:null,$7_2:null,get_linkElement:function(){if(SP.UI.Discussions.Helpers.isNullOrUndefined(this.$A_2)){this.$A_2=$get("likesElement-"+this.$7_2);if(SP.UI.Discussions.Helpers.isNullOrUndefined(this.$A_2))this.$A_2=$get("likesElement-best"+this.$7_2)}return this.$A_2},attachEvents:function(){SP.UI.Reputation.LikesFieldTemplate.onPostRender()},render:function(a){a.write(spMgr.RenderFieldByName(this.get_owner().get_context(),"LikesCount",this.get_owner().get_jsonItem(),this.get_owner().get_context().ListSchema))}};SP.UI.Communities.RateAction=function(a){SP.UI.Communities.RateAction.initializeBase(this,[a,"",""]);this.$7_2=a.get_jsonItem().ID.toString()};SP.UI.Communities.RateAction.prototype={$C_2:null,$7_2:null,get_linkElement:function(){if(!this.$C_2){this.$C_2=$get("averageRatingElement-"+this.$7_2);if(!this.$C_2)this.$C_2=$get("averageRatingElement-best"+this.$7_2)}return this.$C_2},attachEvents:function(){SP.UI.Reputation.AverageRatingFieldTemplate.onPostRender()},render:function(a){a.write(spMgr.RenderFieldByName(this.get_owner().get_context(),"AverageRating",this.get_owner().get_jsonItem(),this.get_owner().get_context().ListSchema))}};SP.UI.Communities.ReportAbuseAction=function(a){SP.UI.Communities.ReportAbuseAction.initializeBase(this,[a,"report",Strings.STS.L_SPDiscReportAbuse]);var b=SP.UI.Communities.Helpers.getCurrentUserAbuseReportComment(a.get_context(),a.get_jsonItem());!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(b)&&this.set_displayName(Strings.STS.L_SPDiscReported)};SP.UI.Communities.ReportAbuseAction.prototype={onClick:function(){var a=new SP.UI.Communities.ReportAbuseBehavior(this.get_owner(),null);a.renderDialog()}};SP.UI.Communities.CommunityDiscussionRenderer=function(a,b){SP.UI.Communities.CommunityDiscussionRenderer.initializeBase(this,[a,b])};SP.UI.Communities.CommunityDiscussionRenderer.prototype={createForumViewState:function(a){return new SP.UI.Communities.CommunityDiscussionViewState(a)}};SP.UI.Communities.CommunityFeaturedDiscussionRenderer=function(a,b){SP.UI.Communities.CommunityFeaturedDiscussionRenderer.initializeBase(this,[a,b])};SP.UI.Communities.CommunityFeaturedDiscussionRenderer.prototype={renderForumHeader:function(a){return SP.UI.Discussions.FeaturedDiscussionRenderer.renderFeaturedHeader(a)},setRenderOptions:function(a){SP.UI.Discussions.FeaturedDiscussionRenderer.setFeaturedRenderOptions(a)},get_postListId:function(){return SP.UI.Discussions.FeaturedDiscussionRenderer.get_featuredPostListId()}};SP.UI.Communities.CommunityDiscussionViewState=function(a){SP.UI.Communities.CommunityDiscussionViewState.initializeBase(this,[a])};SP.UI.Communities.CommunityDiscussionViewState.prototype={createHeaderBehavior:function(a){return new SP.UI.Communities.CommunityDiscussionHeader(a)},createPostBehavior:function(a,b){return new SP.UI.Communities.CommunityDiscussionPost(a,b)}};SP.UI.Communities.GlobalTemplateOverrides=function(){};SP.UI.Communities.GlobalTemplateOverrides.$$cctor=function(){var i=new SP.UI.Communities.SingleCategoryRenderer(SP.UI.Communities.GlobalTemplateOverrides.$e,SP.UI.Communities.GlobalTemplateOverrides.singleCategoryViewID);SPClientTemplates.TemplateManager.RegisterTemplateOverrides(i.createRenderingContextOverrides());for(var j=[1,2,3],e=j,g=e.length,a=0;a<g;++a){var n=e[a],o=new SP.UI.Communities.MembersRenderer(880,n);SPClientTemplates.TemplateManager.RegisterTemplateOverrides(o.createRenderingContextOverrides())}var k=new SP.UI.Communities.MembersAdminViewRenderer(880,4);SPClientTemplates.TemplateManager.RegisterTemplateOverrides(k.createRenderingContextOverrides());var l=new SP.UI.Communities.SingleMemberRenderer(880,5);SPClientTemplates.TemplateManager.RegisterTemplateOverrides(l.createRenderingContextOverrides());for(var m=[1,2,3,7],f=m,h=f.length,b=0;b<h;++b){var c=f[b],d;if(c===7)d=new SP.UI.Communities.CommunityFeaturedDiscussionRenderer(108,c);else d=new SP.UI.Communities.CommunityDiscussionRenderer(108,c);SPClientTemplates.TemplateManager.RegisterTemplateOverrides(d.createRenderingContextOverrides())}};SP.UI.Communities.Helpers=function(){};SP.UI.Communities.Helpers.$i=function(b,c){var d="",e="",f="",g="",h="",i="";if(b){d=b.get_jsonItem().AuthorNumOfPostsLookup;e=b.get_jsonItem().AuthorNumOfRepliesLookup;f=b.get_jsonItem().AuthorNumOfBestResponsesLookup;g=b.get_jsonItem().AuthorMemberSinceLookup;h=b.get_jsonItem().AuthorMemberStatusIntLookup;i=b.get_jsonItem().AuthorLastActivityLookup}else if(c){d=c.NumberOfDiscussions;e=c.NumberOfReplies;f=c.NumberOfBestResponses;g=c.Created;h=c.MemberStatusInt;i=c.LastActivity}else return"";var a=new Sys.StringBuilder;if(!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(h)&&Number.parseInvariant(h)!==1)a.appendLine(Strings.STS.L_SPMemberNotActive);else{!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(d)&&SP.UI.Communities.Helpers.$O(a,d,SP.Utilities.LocUtility.getLocalizedCountValue(Strings.STS.L_SPDiscNumberOfDiscussions,Strings.STS.L_SPDiscNumberOfDiscussionsIntervals,Number.parseLocale(d)));!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(e)&&SP.UI.Communities.Helpers.$O(a,e,SP.Utilities.LocUtility.getLocalizedCountValue(Strings.STS.L_SPDiscNumberOfReplies,Strings.STS.L_SPDiscNumberOfRepliesIntervals,Number.parseLocale(e)));!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(f)&&SP.UI.Communities.Helpers.$O(a,f,SP.Utilities.LocUtility.getLocalizedCountValue(Strings.STS.L_SPDiscNumberOfBestResponses,Strings.STS.L_SPDiscNumberOfBestResponsesIntervals,Number.parseLocale(f)));!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(g)&&a.appendLine(String.format(Strings.STS.L_SPMemberSince,g));!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(i)&&a.appendLine(String.format(Strings.STS.L_SPDiscLastActivity,i))}return a.toString()};SP.UI.Communities.Helpers.computeNumberOfPointsToReachNextLevel=function(e,c){for(var d=0,b=SP.UI.Communities.Helpers.$V(e.ListSchema.PropertyBag),a=0;a<b.length;a++)if(c<b[a]){d=b[a]-c;break}return d};SP.UI.Communities.Helpers.$M=function(g){var d=new Array(0),e=g.CategoriesLookup;if(!SP.UI.Discussions.Helpers.isNullOrUndefined(e))for(var c=e,f=c.length,a=0;a<f;++a){var b=c[a];if(!SP.UI.Discussions.Helpers.isNullOrUndefined(b))d[0]=new SP.UI.Communities.Category(b.lookupId,b.lookupValue)}return d};SP.UI.Communities.Helpers.$T=function(c){var a="",b=SP.UI.Communities.Helpers.$M(c);if(b.length>0)a=b[0].$I_0.toString();return a};SP.UI.Communities.Helpers.$j=function(c){var a="",b=SP.UI.Communities.Helpers.$M(c);if(b.length>0)a=b[0].$G_0.toString();return a};SP.UI.Communities.Helpers.$k=function(d,e,f){var a=null,c="Index:"+e+"|"+f,b=SP.UI.Communities.Helpers.$N(d,c);if(!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(b))a=b;return a};SP.UI.Communities.Helpers.$l=function(c,d,e,f,g){var a=null,b=SP.UI.Communities.Helpers.$k(c,d,e);if(!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(b))a=String.format('<Query><OrderBy Override="TRUE" UseIndexForOrderBy="TRUE" /><WithIndex ID="{0}"><And>{1}{2}</And></WithIndex></Query>',b,f,g);return a};SP.UI.Communities.Helpers.$E=function(b,c,d){var a=SP.UI.Communities.Helpers.$N(b,c);if(SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(a))a=d;a=escapeProperlyCore(a,false);return a};SP.UI.Communities.Helpers.$N=function(c,d){var b=null,a=null;if(typeof g_ListReputationProperties!=="undefined")a=g_ListReputationProperties;else a=c.ListSchema.PropertyBag;if(!SP.UI.Discussions.Helpers.isNullOrUndefined(a))b=a[d];return b};SP.UI.Communities.Helpers.$V=function(f){var d=[0,100,500,2500,1e4];if(!SP.UI.Discussions.Helpers.isNullOrUndefined(f)){var e=f.LevelThresholds;if(!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(e)){var b=e.split(";");if(!SP.UI.Discussions.Helpers.isNullOrUndefined(b)&&b.length===5)for(var c,a=0;a<5;a++){c=parseInt(b[a]);if(!isNaN(c))d[a]=c}}}return d};SP.UI.Communities.Helpers.$p=function(d,c){var a=0,b=SP.UI.Communities.Helpers.$V(d);if(c>b[4])a=5;else if(c>b[3])a=4;else if(c>b[2])a=3;else if(c>b[1])a=2;else if(c>b[0])a=1;return a};SP.UI.Communities.Helpers.$9=function(a){return SP.UI.Discussions.Helpers.doesSchemaContainField(a.ListSchema,"CategoriesLookup")};SP.UI.Communities.Helpers.$O=function(b,a,c){if(SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(a))a="0";b.appendLine(String.format(c,a))};SP.UI.Communities.Helpers.reputationBarRenderCallback=function(a){var b=new SP.HtmlBuilder,c=a.CurrentItem,f=SP.UI.Communities.Helpers.getGiftedBadgeFromMember(a,c,b);if(f)SP.UI.Communities.Helpers.$Y(b,f);else if(SP.UI.Discussions.Helpers.doesSchemaContainField(a.ListSchema,"ReputationScore")){var d=Number.parseLocale(c.ReputationScore);if(SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(d.toString()))d=0;var e=null;if(typeof g_ListReputationProperties!=="undefined")e=g_ListReputationProperties;else e=a.ListSchema.PropertyBag;SP.UI.Communities.Helpers.renderReputationBarCore(b,d,true,e,null,c)}return b.toString()};SP.UI.Communities.Helpers.renderReputationBar=function(d,c,a,b,e){SP.UI.Communities.Helpers.renderReputationBarCore(d,c,a,b,e,null)};SP.UI.Communities.Helpers.renderReputationBarCore=function(a,k,j,b,d,f){var g=b.AchievementPointsEnabled,h=true;if(!SP.ScriptHelpers.isNullOrUndefinedOrEmpty(g))h=Boolean.parse(g);if(!h)return;var e=SP.UI.Communities.Helpers.$p(b,k);if(!e)return;if(j&&(!SP.UI.Discussions.Helpers.isNullOrUndefined(d)||!SP.UI.Discussions.Helpers.isNullOrUndefined(f))){var l=SP.UI.Communities.Helpers.$i(d,f);a.addAttribute("title",l)}var i="True";if(!SP.UI.Discussions.Helpers.isNullOrUndefined(b))i=b.DisplayAchievementAsImage;if(i==="True"){a.addCommunitiesCssClass("reputationTextContainer");a.renderBeginTag("div");for(var c=0;c<5;c++){if(e>c)if(c===4)a.addCommunitiesCssClass("reputationBarSqLast");else a.addCommunitiesCssClass("reputationBarSq");else if(c===4)a.addCommunitiesCssClass("reputationBarSqEmptyLast");else a.addCommunitiesCssClass("reputationBarSqEmpty");a.renderBeginTag("span");a.write("&nbsp");a.renderEndTag()}}else{var m=!SP.UI.Discussions.Helpers.isNullOrUndefined(d)&&!SP.UI.Discussions.Helpers.isNullOrUndefined(d.get_isRenderedByRootPost())&&d.get_isRenderedByRootPost();if(m)a.addCommunitiesCssClass("reputationTextContainerBestResponse");else a.addCommunitiesCssClass("reputationTextContainer");a.renderBeginTag("div");SP.UI.Communities.Helpers.$15(a,b,e)}a.renderEndTag()};SP.UI.Communities.Helpers.$15=function(b,a,d){if(!SP.UI.Discussions.Helpers.isNullOrUndefined(a)){var c=[a.Level1Text,a.Level2Text,a.Level3Text,a.Level4Text,a.Level5Text];b.addCssClass("ms-accentText");b.addCssClass("ms-noWrap");b.renderBeginTag("span");b.writeEncoded(c[d-1]);b.renderEndTag()}};SP.UI.Communities.Helpers.getGiftedBadgeFromAuthor=function(c,a,b){return SP.UI.Communities.Helpers.$U(c,a,b,"AuthorGiftedBadgeLookup")};SP.UI.Communities.Helpers.getGiftedBadgeFromMember=function(c,a,b){return SP.UI.Communities.Helpers.$U(c,a,b,"GiftedBadgeText")};SP.UI.Communities.Helpers.$U=function(c,d,e,b){if(!SP.UI.Discussions.Helpers.doesSchemaContainField(c.ListSchema,b))return null;var a=d[b];return SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(a)?null:a};SP.UI.Communities.Helpers.$Y=function(a,b){b=STSHtmlEncode(b);a.addCommunitiesCssClass("giftedBadgeContainer");a.renderBeginTag("div");a.addAttribute("title",b);a.addAttribute("alt",b);a.addAttribute("src",GetThemedImageUrl("CommunitiesGiftedBadge.16x16x32.png"));a.addCommunitiesCssClass("giftedBadgeIcon");a.renderBeginTag("img");a.renderEndTag();a.addCssClass("ms-metadata");a.addCssClass("ms-noWrap");a.addCommunitiesCssClass("giftedBadgeText");a.renderBeginTag("div");a.write(b);a.renderEndTag();a.renderEndTag()};SP.UI.Communities.Helpers.getCurrentUserAbuseReportComment=function(j,d){var e="",b=d.AbuseReportsReporterLookup,f=d.AbuseReportsCommentsLookup;if(!SP.UI.Discussions.Helpers.isNullOrUndefined(b)&&!SP.UI.Discussions.Helpers.isNullOrUndefined(f))for(var a=0;a<b.length;a++){var g=b[a];if(!SP.UI.Discussions.Helpers.isNullOrUndefined(g)){var h=j.CurrentUserId,i=g.lookupValue;if(!SP.UI.Discussions.Helpers.isNullOrUndefined(i)&&!SP.UI.Discussions.Helpers.isNullOrUndefined(h))if(h.toString()===i.toString()){var c=f[a];if(!SP.UI.Discussions.Helpers.isNullOrUndefined(c)&&!SP.UI.Discussions.Helpers.isNullOrUndefined(c.lookupValue))e=c.lookupValue.toString();break}}}return e};SP.UI.Communities.Helpers.$b=function(){var a=new SP.UI.DialogOptions;a.url=SP.Utilities.Utility.getLayoutsPageUrl("CommunityJoinPage.aspx");a.dialogReturnValueCallback=function(a){SP.UI.ModalDialog.RefreshPage(a)};SP.UI.ModalDialog.showModalDialog(a)};SP.UI.Communities.Helpers.$W=function(b){var a=$get("Hero-"+b.wpq);!SP.UI.Discussions.Helpers.isNullOrUndefined(a)&&a.setAttribute("class","ms-hidden")};SP.UI.Communities.Helpers.usingIE8OrPrevious=function(){return Sys.Browser.agent===Sys.Browser.InternetExplorer&&Sys.Browser.version<=8};SP.UI.Communities.Helpers.renderMemberSince=function(b,a){a.addCssClass("ms-metadata");a.renderBeginTag("div");a.write(String.format(Strings.STS.L_SPMemberSince,spMgr.RenderFieldByName(b,"Created",b.CurrentItem,b.ListSchema)));a.renderEndTag()};SP.UI.Communities.Helpers.renderMemberStats=function(b,a){a.addCssClass("ms-noList");a.addCssClass("ms-metadata");a.renderBeginTag("div");a.addCssClass("ms-margin0");a.renderBeginTag("ul");SP.UI.Communities.Helpers.$K(a,b,"NumberOfDiscussions",Strings.STS.L_SPDiscNumberOfDiscussions,Strings.STS.L_SPDiscNumberOfDiscussionsIntervals,"myMemberStatsDiscussions");SP.UI.Communities.Helpers.$K(a,b,"NumberOfReplies",Strings.STS.L_SPDiscNumberOfReplies,Strings.STS.L_SPDiscNumberOfRepliesIntervals,"myMemberStatsReplies");SP.UI.Communities.Helpers.$K(a,b,"NumberOfBestResponses",Strings.STS.L_SPDiscNumberOfBestResponses,Strings.STS.L_SPDiscNumberOfBestResponsesIntervals,"myMemberStatsBestResponses");a.renderEndTag();a.renderEndTag()};SP.UI.Communities.Helpers.$K=function(a,c,d,e,f,g){if(SP.UI.Discussions.Helpers.doesSchemaContainField(c.ListSchema,d)){a.addCommunitiesCssClass("myMemberStatsItem");a.addAttribute("id",g);a.renderBeginTag("li");var b=c.CurrentItem[d];if(SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(b))b="0";a.write(String.format(SP.Utilities.LocUtility.getLocalizedCountValue(e,f,Number.parseLocale(b)),String.format('<span class="{0}">{1}</span>',"ms-comm-reputationNumbers",b)));a.renderEndTag()}};SP.UI.Communities.Category=function(a,b){this.$I_0=b;this.$G_0=a};SP.UI.Communities.Category.prototype={$I_0:null,$G_0:0,get_id:function(){return this.$G_0},get_name:function(){return this.$I_0}};SP.UI.Communities.MembersRenderer=function(a,b){this.$$d_$B_0=Function.createDelegate(this,this.$B_0);this.$$d_$a_0=Function.createDelegate(this,this.$a_0);this.$$d_$11_0=Function.createDelegate(this,this.$11_0);this.$$d_$10_0=Function.createDelegate(this,this.$10_0);this.$$d_$z_0=Function.createDelegate(this,this.$z_0);this.$$d_$y_0=Function.createDelegate(this,this.$y_0);this.$2_0=a;this.$0_0=b};SP.UI.Communities.MembersRenderer.$o=function(d){var a=new SP.UI.Discussions.SortFilterPickerControl,n=SP.ScriptHelpers.getDocumentQueryPairs(),o=window.self.ajaxNavigate,b=o.get_href(),e=SP.ScriptHelpers.replaceOrAddQueryString(b,"SortField","ReputationScore");e=SP.ScriptHelpers.replaceOrAddQueryString(e,"SortDir","Desc");var f=SP.ScriptHelpers.replaceOrAddQueryString(b,"SortField","Created");f=SP.ScriptHelpers.replaceOrAddQueryString(f,"SortDir","Desc");var g=SP.ScriptHelpers.replaceOrAddQueryString(b,"SortField","Title");g=SP.ScriptHelpers.replaceOrAddQueryString(g,"SortDir","Asc");var h=SP.ScriptHelpers.replaceOrAddQueryString(b,"SortField","Title");h=SP.ScriptHelpers.replaceOrAddQueryString(h,"SortDir","Desc");var i=new SP.UI.Discussions.SortFilterItem(d,SP.UI.Communities.TemplateResources.get_l_SPMembersReputedHeader()),j=new SP.UI.Discussions.SortFilterItem(d,SP.UI.Communities.TemplateResources.get_l_SPMembersNewHeader()),k=new SP.UI.Discussions.SortFilterItem(d,SP.UI.Communities.TemplateResources.get_l_SPCategorySortAlpha()),l=new SP.UI.Discussions.SortFilterItem(d,SP.UI.Communities.TemplateResources.get_l_SPCategorySortAlphaRev());i.set_linkUrl(e);j.set_linkUrl(f);k.set_linkUrl(g);l.set_linkUrl(h);var c=SP.UI.Discussions.Helpers.getListSortOverride(n),m=true;if(c)if(c.get_fieldName()==="Created"){j.set_isSelected(true);m=false}else if(c.get_fieldName()==="Title"){if(c.get_direction()==="Desc")l.set_isSelected(true);else k.set_isSelected(true);m=false}m&&i.set_isSelected(true);a.addItem(i);a.addItem(j);a.addItem(k);a.addItem(l);return a};SP.UI.Communities.MembersRenderer.prototype={$0_0:0,$2_0:0,$F_0:null,createRenderingContextOverrides:function(){var a=new ListContext;a.BaseViewID=this.$0_0;a.ListTemplateType=this.$2_0;a.Templates.Body=this.$$d_$y_0;a.Templates.Footer=this.$$d_$z_0;a.Templates.Header=this.$$d_$10_0;a.Templates.View=this.$$d_$11_0;var b={};b.SPListItem2=this.$$d_$a_0;a.Templates.Item=b;a.OnPostRender=this.$$d_$B_0;return a},$y_0:function(b){var a=new SP.HtmlBuilder;a.addCommunitiesCssClass("membersList");a.addCssClass("ms-table");a.renderBeginTag("div");for(var d=b.ListData.Row,c=0,e=d.length;c<e;c++){b.CurrentItem=d[c];a.write(this.$a_0(b));b.CurrentItem=null}a.renderEndTag();return a.toString()},$z_0:function(c){var a=new SP.HtmlBuilder;if(this.$0_0===1){var b=new Array(0);RenderPaging(b,c);a.write(b.join(""))}return a.toString()},$10_0:function(b){var a=new SP.HtmlBuilder;if(this.$0_0===1){this.$F_0=SP.UI.Communities.MembersRenderer.$o(b);a.addCommunitiesCssClass("forumHeaderContainer");a.renderBeginTag("div");this.$F_0.render(a);a.renderEndTag()}this.$0_0===2&&a.write(String.format('<div class="ms-webpart-titleText">{0}</div>',SP.UI.Communities.TemplateResources.get_l_SPMembersTopContributorsHeader()));this.$0_0===3&&a.write(String.format('<div class="ms-webpart-titleText">{0}</div>',SP.UI.Communities.TemplateResources.get_l_SPMembersNewHeader()));return a.toString()},$a_0:function(b){var a=new SP.HtmlBuilder,d=b.CurrentItem;if(!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(d.Member)){a.addCommunitiesCssClass("membersListItem");a.addCssClass("ms-tableRow");a.renderBeginTag("div");var c=SP.ScriptHelpers.getFieldFromSchema(b.ListSchema,"Member");if(c){c.RenderCallback="SP.UI.Communities.Helpers.reputationBarRenderCallback";c.WithPictureDetail=1;c.PictureSize="Size_48px";c.MaxWidth=500;this.$0_0===1&&a.addCssClass("ms-comm-memberColumn");a.addCssClass("ms-tableCell");a.addCssClass("ms-noWrap");a.renderBeginTag("div");a.write(spMgr.RenderFieldByName(b,"Member",d,b.ListSchema));a.renderEndTag()}if(this.$0_0===1){a.addCssClass("ms-comm-memberColumn");a.addCssClass("ms-tableCell");a.addCssClass("ms-verticalAlignTop");a.addCssClass("ms-noWrap");a.renderBeginTag("div");SP.UI.Communities.Helpers.renderMemberStats(b,a);a.renderEndTag();a.addCssClass("ms-comm-memberColumn");a.addCssClass("ms-tableCell");a.addCssClass("ms-verticalAlignTop");SP.UI.Communities.Helpers.renderMemberSince(b,a)}a.renderEndTag()}return a.toString()},$11_0:function(b){var a=new SP.HtmlBuilder;a.renderBeginTag("div");a.addCommunitiesCssClass("membersContainer");a.addCssClass("ms-core-defaultFont");a.addAttribute("id",b.listName+"-"+b.view);a.renderBeginTag("div");a.write(b.RenderHeader(b));a.write(b.RenderBody(b));a.write(b.RenderFooter(b));a.renderEndTag();a.renderEndTag();return a.toString()},$B_0:function(a){!SP.UI.Discussions.Helpers.isNullOrUndefined(this.$F_0)&&this.$F_0.initialize();SP.ScriptHelpers.disableWebpartSelection(a)}};SP.UI.Communities.MembersAdminViewRenderer=function(a,b){this.$$d_$B_0=Function.createDelegate(this,this.$B_0);this.$2_0=a;this.$0_0=b};SP.UI.Communities.MembersAdminViewRenderer.prototype={$0_0:0,$2_0:0,createRenderingContextOverrides:function(){var a=new ListContext;a.BaseViewID=this.$0_0;a.ListTemplateType=this.$2_0;a.OnPostRender=this.$$d_$B_0;return a},$B_0:function(a){SP.UI.Communities.Helpers.$W(a)}};SP.UI.Communities.SingleMemberRenderer=function(a,b){this.$$d_$B_0=Function.createDelegate(this,this.$B_0);this.$$d_$Z_0=Function.createDelegate(this,this.$Z_0);this.$$d_$12_0=Function.createDelegate(this,this.$12_0);this.$$d_$x_0=Function.createDelegate(this,this.$x_0);this.$2_0=a;this.$0_0=b};SP.UI.Communities.SingleMemberRenderer.prototype={$0_0:0,$2_0:0,createRenderingContextOverrides:function(){var a=new ListContext;a.BaseViewID=this.$0_0;a.ListTemplateType=this.$2_0;a.Templates.Body=this.$$d_$x_0;a.Templates.View=this.$$d_$12_0;var b={};b.SPListItem2=this.$$d_$Z_0;a.Templates.Item=b;a.OnPostRender=this.$$d_$B_0;return a},$x_0:function(a){var b=new SP.HtmlBuilder,c=a.ListData.Row;if(c.length===1){a.CurrentItem=c[0];b.write(this.$Z_0(a))}return b.toString()},$12_0:function(b){var a=new SP.HtmlBuilder;a.renderBeginTag("div");a.addCommunitiesCssClass("myMembershipContainer");a.addCssClass("ms-core-defaultFont");a.addAttribute("id",b.listName+"-"+b.view);a.renderBeginTag("div");a.write(b.RenderBody(b));a.renderEndTag();a.renderEndTag();return a.toString()},$Z_0:function(b){var a=new SP.HtmlBuilder,g=b.CurrentItem;if(!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(g.Member)){var c=SP.ScriptHelpers.getFieldFromSchema(b.ListSchema,"Member");if(c){c.RenderCallback="SP.UI.Communities.Helpers.reputationBarRenderCallback";c.WithPictureDetail=1;c.PictureSize="Size_72px";c.MaxWidth=500;a.addCommunitiesCssClass("myMember");a.renderBeginTag("div");a.write(spMgr.RenderFieldByName(b,"Member",g,b.ListSchema));a.renderEndTag()}a.addCommunitiesCssClass("myMemberSince");SP.UI.Communities.Helpers.renderMemberSince(b,a);var h=SP.UI.Communities.Helpers.$N(b,"AchievementPointsEnabled"),e=true;if(!SP.ScriptHelpers.isNullOrUndefinedOrEmpty(h))e=Boolean.parse(h);var d=b.CurrentItem.ReputationScore;if(e&&!SP.ScriptHelpers.isNullOrUndefined(d)){a.addCssClass("ms-comm-myMemberScoreContainer");a.renderBeginTag("div");a.addCommunitiesCssClass("myMemberScore");a.addCssClass("ms-largeNumber");a.renderBeginTag("div");a.write(d.toString());a.renderEndTag();a.addCssClass("ms-metadata");a.renderBeginTag("div");a.write(Strings.STS.L_SPReputationScore);a.renderEndTag();a.renderEndTag()}SP.UI.Communities.Helpers.renderMemberStats(b,a);if(e&&!SP.ScriptHelpers.isNullOrUndefined(d)){var f=SP.UI.Communities.Helpers.computeNumberOfPointsToReachNextLevel(b,d);if(f>0){a.addCssClass("ms-metadata");a.addCommunitiesCssClass("myMemberNextLevel");a.addAttribute("id",b.wpq+"_idNumPointsToReachNextLevel");a.renderBeginTag("div");a.write(String.format(SP.Utilities.LocUtility.getLocalizedCountValue(Strings.STS.L_SPRepliesToReachNextLevel,Strings.STS.L_SPRepliesToReachNextLevelIntervals,f),f));a.renderEndTag()}}}return a.toString()},$B_0:function(a){SP.ScriptHelpers.disableWebpartSelection(a)}};SP.UI.Communities.TemplateResources=function(){};SP.UI.Communities.TemplateResources.get_l_SPDiscReply=function(){return Strings.STS.L_SPDiscReply};SP.UI.Communities.TemplateResources.get_l_SPDiscEdit=function(){return Strings.STS.L_SPDiscEdit};SP.UI.Communities.TemplateResources.get_l_SPDiscDelete=function(){return Strings.STS.L_SPDiscDelete};SP.UI.Communities.TemplateResources.get_l_SPDiscCategoryPage=function(){return Strings.STS.L_SPDiscCategoryPage};SP.UI.Communities.TemplateResources.get_l_SPCategorySortAlpha=function(){return Strings.STS.L_SPCategorySortAlpha};SP.UI.Communities.TemplateResources.get_l_SPCategorySortAlphaRev=function(){return Strings.STS.L_SPCategorySortAlphaRev};SP.UI.Communities.TemplateResources.get_l_SPCategoryLastPost=function(){return Strings.STS.L_SPCategoryLastPost};SP.UI.Communities.TemplateResources.get_l_SPDiscMembersPage=function(){return Strings.STS.L_SPDiscMembersPage};SP.UI.Communities.TemplateResources.get_l_SPMemberSince=function(){return Strings.STS.L_SPMemberSince};SP.UI.Communities.TemplateResources.get_l_SPMembersReputedHeader=function(){return Strings.STS.L_SPMembersReputedHeader};SP.UI.Communities.TemplateResources.get_l_SPMembersNewHeader=function(){return Strings.STS.L_SPMembersNewHeader};SP.UI.Communities.TemplateResources.get_l_SPMembersTopContributorsHeader=function(){return Strings.STS.L_SPMembersTopContributorsHeader};SP.UI.Communities.ReportAbuseBehavior=function(a,b){this.$$d_$u_0=Function.createDelegate(this,this.$u_0);this.$$d_$v_0=Function.createDelegate(this,this.$v_0);this.$$d_$r_0=Function.createDelegate(this,this.$r_0);this.$$d_$s_0=Function.createDelegate(this,this.$s_0);this.$$d_$t_0=Function.createDelegate(this,this.$t_0);this.$3_0=a;this.$w_0=b;this.$f_0=this.$$d_$t_0;this.$c_0=this.$$d_$s_0;this.$S_0=this.$$d_$r_0};SP.UI.Communities.ReportAbuseBehavior.prototype={$3_0:null,$w_0:null,$L_0:false,$q_0:null,$5_0:null,$4_0:null,$1_0:null,$f_0:null,$c_0:null,$S_0:null,get_$R_0:function(){if(!this.$1_0)this.$1_0=$get(this.$6_0("ReportAbuseCancel"));return this.$1_0},get_$H_0:function(){return this.$L_0},set_$H_0:function(a){if(this.$L_0!==a){this.$L_0=a;this.$18_0();this.$J_0()}return a},get_$P_0:function(){if(!this.$4_0)this.$4_0=$get(this.$6_0("ReportAbuseSubmit"));return this.$4_0},get_$D_0:function(){if(!this.$5_0)this.$5_0=$get(this.$6_0("ReportAbuseTextBox"));return this.$5_0},renderDialog:function(){var c=this.$m_0();this.$g_0();var b=SP.UI.Communities.Helpers.getCurrentUserAbuseReportComment(this.$3_0.get_context(),this.$3_0.get_jsonItem());this.set_textValue(b);this.$J_0();if(!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(b))this.get_$P_0().innerHTML=Strings.STS.L_SPDiscSaveChangesButton;var a=new SP.UI.DialogOptions;a.title=Strings.STS.L_SPDiscReportAbuseDialogTitle;a.html=c;if(window.browseris.chrome)a.autoSize=false;else a.autoSize=true;SP.UI.ModalDialog.showModalDialog(a);this.get_$D_0().focus()},get_textValue:function(){return SP.ScriptHelpers.getTextAreaElementValue(this.get_$D_0())},set_textValue:function(a){SP.ScriptHelpers.setTextAreaElementValue(this.get_$D_0(),a);this.$J_0();return a},$g_0:function(){$addHandler(this.get_$D_0(),"keyup",this.$f_0);$addHandler(this.get_$P_0(),"click",this.$c_0);$addHandler(this.get_$R_0(),"click",this.$S_0)},$6_0:function(a){return this.$3_0.getPostElementID(a)},$r_0:function(){SP.UI.ModalDialog.commonModalDialogClose(0,null)},$s_0:function(){this.set_$H_0(true);var a=this;EnsureScriptFunc("reputation.js","Microsoft.SharePoint.Portal.CommunityModeration",function(){var b=new SP.ClientContext;a.$q_0=Microsoft.SharePoint.Portal.CommunityModeration.reportAbuse(b,a.$3_0.get_context().listName,a.$3_0.get_jsonItem().ID,a.get_textValue());b.executeQueryAsync(a.$$d_$v_0,a.$$d_$u_0)})},$t_0:function(){this.$J_0()},$v_0:function(){SP.UI.ModalDialog.commonModalDialogClose(1,null);SP.UI.Notify.addNotification(Strings.STS.L_SPDiscReportAbuseSuccessNotification,false);SP.UI.Discussions.Helpers.refreshCurrentPage(this.$3_0.get_context())},$u_0:function(b,a){SP.UI.Discussions.Helpers.showScriptError(a.get_message());this.set_$H_0(false)},$14_0:function(){var a=new SP.HtmlBuilder;a.addCssClass("ms-comm-reportedContentContainer");a.renderBeginTag("div");this.$3_0.$13_1(a);a.renderEndTag();return a.toString()},$m_0:function(){var b=document.createElement("div");b.className="ms-comm-reportAbuseDialog";var d=document.createElement("div"),a=new SP.HtmlBuilder;a.renderBeginTag("div");a.addCssClass("ms-comm-joinDialogText");a.renderBeginTag("div");a.writeEncoded(Strings.STS.L_SPDiscReportAbuseDialogText1);a.renderEndTag();a.write(this.$14_0());a.addCssClass("ms-comm-joinDialogText");a.renderBeginTag("div");a.writeEncoded(Strings.STS.L_SPDiscReportAbuseDialogText2);a.renderEndTag();a.renderEndTag();d.innerHTML=a.toString();b.appendChild(d);this.$5_0=document.createElement("textarea");this.$5_0.id=this.$6_0("ReportAbuseTextBox");this.$5_0.className="ms-comm-postReplyTextBox ms-fullWidth";b.appendChild(this.$5_0);var c=document.createElement("div");c.className="ms-comm-postReplyButtonContainer";this.$4_0=document.createElement("button");this.$4_0.className="ms-comm-postReplyButton ms-floatRight";this.$4_0.id=this.$6_0("ReportAbuseSubmit");this.$4_0.innerHTML=Strings.STS.L_SPDiscSubmitReportButton;c.appendChild(this.$4_0);this.$1_0=document.createElement("button");this.$1_0.className="ms-comm-postReplyButton ms-floatRight";this.$1_0.id=this.$6_0("ReportAbuseCancel");this.$1_0.innerHTML=Strings.STS.L_SPDiscCancelReplyButton;c.appendChild(this.$1_0);b.appendChild(c);var e=document.createElement("div");e.className="ms-clear";b.appendChild(e);var f=document.createElement("div");f.appendChild(b);return f},$18_0:function(){this.get_$R_0().disabled=this.get_$H_0()},$J_0:function(){this.get_$P_0().disabled=!(SP.ScriptHelpers.getTextAreaElementValue(this.get_$D_0()).length>0)||this.get_$H_0()}};SP.UI.Communities.SingleCategoryRenderer=function(a,b){this.$$d_$B_0=Function.createDelegate(this,this.$B_0);this.$$d_$X_0=Function.createDelegate(this,this.$X_0);this.$$d_$h_0=Function.createDelegate(this,this.$h_0);this.$$d_$19_0=Function.createDelegate(this,this.$19_0);this.$d_0=a;this.$0_0=b};SP.UI.Communities.SingleCategoryRenderer.prototype={$d_0:0,$0_0:0,createRenderingContextOverrides:function(){var a=new ListContext;a.BaseViewID=this.$0_0;a.ListTemplateType=this.$d_0;a.Templates.View=this.$$d_$19_0;a.Templates.Body=this.$$d_$h_0;var b={};b.SPListItem2=this.$$d_$X_0;a.Templates.Item=b;a.OnPostRender=this.$$d_$B_0;return a},$19_0:function(b){var c=$get("CategoryRootElement");if(SP.ScriptHelpers.isNullOrUndefined(c)){var a="";a+='<div id="CategoryRootElement">';a+=b.RenderBody(b);a+="</div>";return a}else return""},$h_0:function(b){var a='<div class="ms-comm-sCat-body">',c=b.ListData.Row;if(c&&c.length===1){b.CurrentItem=c[0];a+=this.$X_0(b);b.CurrentItem=null;a+='<div class="ms-clear"></div>'}a+="</div>";return a},$X_0:function(n){var b=n.CurrentItem;if(!b)return"";var o=b.ID,d=STSHtmlEncode(b.Title),e=b.TopicCount,f=b.ReplyCount,g=b.CategoryDescription,p=b.LastPostDate,c=b.CategoryImage,h=SP.Utilities.LocUtility.getLocalizedCountValue(Strings.STS.L_SPDiscNumberOfDiscussions,Strings.STS.L_SPDiscNumberOfDiscussionsIntervals,Number.parseLocale(e)),i=SP.Utilities.LocUtility.getLocalizedCountValue(Strings.STS.L_SPDiscNumberOfReplies,Strings.STS.L_SPDiscNumberOfRepliesIntervals,Number.parseLocale(f)),j='<span class="ms-accentText">'+e+"</span>",k='<span class="ms-accentText">'+f+"</span>",l=String.format(h,j)+" "+String.format(i,k),a='<ul class="ms-noList ms-margin0 ms-comm-sCat-infoList">';a+="<li>";a+='<div class="ms-comm-sCat-imageContainer" >';if(!SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(c)){c=StAttrQuote(c);var m="SP.ScriptHelpers.resizeImageToSquareLength(this, "+80+")";a+="<img src="+c+' alt="'+d+'" onload="'+m+'" />'}else a+='<img width="'+80+'" class="ms-comm-cat-defaultImage" src="_layouts/images/blank.gif" alt="'+d+'" />';a+="</div>";a+="</li>";a+='<li class="ms-comm-sCat-counts"><h2>'+l+"</h2></li>";a+='<li class="ms-comm-sCat-desc">'+g+"</li>";a+="</ul>";return a},$B_0:function(a){SP.ScriptHelpers.disableWebpartSelection(a)}};Type.registerNamespace("SP.UI.CommunityModeration");SP.UI.CommunityModeration.GlobalTemplateOverrides=function(){};SP.UI.CommunityModeration.GlobalTemplateOverrides.$$cctor=function(){var a=new SP.UI.CommunityModeration.ModerationViewRenderer(108,6);SPClientTemplates.TemplateManager.RegisterTemplateOverrides(a.createRenderingContextOverrides())};SP.UI.CommunityModeration.ModerationViewRenderer=function(a,b){this.$$d_$B_0=Function.createDelegate(this,this.$B_0);this.$$d_$17_0=Function.createDelegate(this,this.$17_0);this.$2_0=a;this.$0_0=b};SP.UI.CommunityModeration.ModerationViewRenderer.prototype={$0_0:0,$2_0:0,createRenderingContextOverrides:function(){var a=new ListContext;a.BaseViewID=this.$0_0;a.ListTemplateType=this.$2_0;a.Templates.Fields={DiscussionTitleOrBody:{View:this.$$d_$17_0}};a.OnPostRender=this.$$d_$B_0;return a},$17_0:function(e){var b=new SP.HtmlBuilder,d=e.CurrentItem,a=SP.Utilities.Utility.getLayoutsPageUrl("CommunityModerationView.aspx");a=SP.ScriptHelpers.replaceOrAddQueryString(a,"ID",d.ID.toString());a=SP.ScriptHelpers.replaceOrAddQueryString(a,"List",e.listName);a=SP.ScriptHelpers.replaceOrAddQueryString(a,"Source",document.URL);b.addAttribute("href",a);b.renderBeginTag("a");if(d.FSObjType==="1")b.write(spMgr.RenderFieldByName(e,"Title",d,e.ListSchema));else{var c=SP.ScriptHelpers.removeHtmlAndTrimStringWithEllipsis(d.Body.toString(),100),f=new RegExp("\\s\\u200b","g");c=c.replace(f,"");if(SP.UI.Discussions.Helpers.isNullOrUndefinedOrEmpty(c.trim()))c=Strings.STS.L_SPDiscNoPreviewAvailable;b.write(c)}b.renderEndTag();return b.toString()},$B_0:function(a){SP.UI.Communities.Helpers.$W(a)}};SP.UI.Communities.CommunityDiscussionHeader.registerClass("SP.UI.Communities.CommunityDiscussionHeader",SP.UI.Discussions.HeaderBehavior);SP.UI.Communities.CommunityDiscussionPost.registerClass("SP.UI.Communities.CommunityDiscussionPost",SP.UI.Discussions.PostBehavior);SP.UI.Communities.JoinAction.registerClass("SP.UI.Communities.JoinAction",SP.UI.Discussions.PostAction);SP.UI.Communities.LikeAction.registerClass("SP.UI.Communities.LikeAction",SP.UI.Discussions.PostAction);SP.UI.Communities.RateAction.registerClass("SP.UI.Communities.RateAction",SP.UI.Discussions.PostAction);SP.UI.Communities.ReportAbuseAction.registerClass("SP.UI.Communities.ReportAbuseAction",SP.UI.Discussions.PostAction);SP.UI.Communities.CommunityDiscussionRenderer.registerClass("SP.UI.Communities.CommunityDiscussionRenderer",SP.UI.Discussions.ForumRenderer);SP.UI.Communities.CommunityFeaturedDiscussionRenderer.registerClass("SP.UI.Communities.CommunityFeaturedDiscussionRenderer",SP.UI.Communities.CommunityDiscussionRenderer);SP.UI.Communities.CommunityDiscussionViewState.registerClass("SP.UI.Communities.CommunityDiscussionViewState",SP.UI.Discussions.ForumViewState);SP.UI.Communities.GlobalTemplateOverrides.registerClass("SP.UI.Communities.GlobalTemplateOverrides");SP.UI.Communities.Helpers.registerClass("SP.UI.Communities.Helpers");SP.UI.Communities.Category.registerClass("SP.UI.Communities.Category");SP.UI.Communities.MembersRenderer.registerClass("SP.UI.Communities.MembersRenderer");SP.UI.Communities.MembersAdminViewRenderer.registerClass("SP.UI.Communities.MembersAdminViewRenderer");SP.UI.Communities.SingleMemberRenderer.registerClass("SP.UI.Communities.SingleMemberRenderer");SP.UI.Communities.TemplateResources.registerClass("SP.UI.Communities.TemplateResources");SP.UI.Communities.ReportAbuseBehavior.registerClass("SP.UI.Communities.ReportAbuseBehavior");SP.UI.Communities.SingleCategoryRenderer.registerClass("SP.UI.Communities.SingleCategoryRenderer");SP.UI.CommunityModeration.GlobalTemplateOverrides.registerClass("SP.UI.CommunityModeration.GlobalTemplateOverrides");SP.UI.CommunityModeration.ModerationViewRenderer.registerClass("SP.UI.CommunityModeration.ModerationViewRenderer");function sp_ui_communities_initialize(){SP.UI.Communities.GlobalTemplateOverrides.$e=500;SP.UI.Communities.GlobalTemplateOverrides.singleCategoryViewID=3;SP.UI.Communities.GlobalTemplateOverrides.$$cctor();SP.UI.CommunityModeration.GlobalTemplateOverrides.$$cctor()}sp_ui_communities_initialize();RegisterModuleInit("sp.ui.communities.js",sp_ui_communities_initialize);typeof Sys!="undefined"&&Sys&&Sys.Application&&Sys.Application.notifyScriptLoaded();NotifyScriptLoadedAndExecuteWaitingJobs("SP.UI.Communities.js");